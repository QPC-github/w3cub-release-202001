
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Repl - Node.js 4 LTS - W3cubDocs</title>
  
  <meta name="description" content="A Read-Eval-Print-Loop (REPL) is available both as a standalone program and easily includable in other programs. The REPL provides a way to &hellip;">
  <meta name="keywords" content="repl, -, node, js, lts, node~4_lts">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/node~4_lts/repl/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" integrity="sha256-6/DH7X+2hvUPElJfGsvzm+tgIpmM9zjbYxnpsr6gR1A=" crossorigin="anonymous" href="/assets/application-ebf0c7ed7fb686f50f12525f1acbf39beb6022998cf738db6319e9b2bea04750.css">
  <script type="text/javascript" src="/assets/application-db285287b40ed28fac520fcfd75d7d874692b647b5b5e05968c741dda5de4148.js" integrity="sha256-2yhSh7QO0o+sUg/P1119h0aStke1teBZaMdB3aXeQUg=" crossorigin="anonymous"></script>
  <script src="/json/node~4_lts.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2572770204602497",
            enable_page_level_ads: true
        });
  </script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/node~4_lts/" class="_nav-link" title="" style="margin-left:0;">Node.js 4 LTS</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _node">
				
				
<h1 id="repl_repl">REPL</h1> <div class="api_stability api_stability_2">Stability: 2 - Stable</div>
<p>A Read-Eval-Print-Loop (REPL) is available both as a standalone program and easily includable in other programs. The REPL provides a way to interactively run JavaScript and see the results. It can be used for debugging, testing, or just trying things out.</p> <p>By executing <code>node</code> without any arguments from the command-line you will be dropped into the REPL. It has simplistic emacs line-editing.</p> <pre>$ node
Type '.help' for options.
&gt; a = [1, 2, 3];
[ 1, 2, 3 ]
&gt; a.forEach((v) =&gt; {
...   console.log(v);
...   });
1
2
3
</pre>
<p>For advanced line-editors, start Node.js with the environmental variable <code>NODE_NO_READLINE=1</code>. This will start the main and debugger REPL in canonical terminal settings which will allow you to use with <code>rlwrap</code>.</p> <p>For example, you could add this to your bashrc file:</p> <pre>alias node="env NODE_NO_READLINE=1 rlwrap node"
</pre>
<h2 id="repl_environment_variable_options">Environment Variable Options</h2> <p>The built-in repl (invoked by running <code>node</code> or <code>node -i</code>) may be controlled via the following environment variables:</p> <ul> <li>
<code>NODE_REPL_HISTORY</code> - When a valid path is given, persistent REPL history will be saved to the specified file rather than <code>.node_repl_history</code> in the user's home directory. Setting this value to <code>""</code> will disable persistent REPL history. Whitespace will be trimmed from the value.</li> <li>
<code>NODE_REPL_HISTORY_SIZE</code> - Defaults to <code>1000</code>. Controls how many lines of history will be persisted if history is available. Must be a positive number.</li> <li>
<code>NODE_REPL_MODE</code> - May be any of <code>sloppy</code>, <code>strict</code>, or <code>magic</code>. Defaults to <code>magic</code>, which will automatically run "strict mode only" statements in strict mode.</li> </ul> <h2 id="repl_persistent_history">Persistent History</h2> <p>By default, the REPL will persist history between <code>node</code> REPL sessions by saving to a <code>.node_repl_history</code> file in the user's home directory. This can be disabled by setting the environment variable <code>NODE_REPL_HISTORY=""</code>.</p> <h3 id="repl_node_repl_history_file">NODE_REPL_HISTORY_FILE</h3> <div class="api_stability api_stability_0">Stability: 0 - Deprecated: Use <code>NODE_REPL_HISTORY</code> instead.</div>
<p>Previously in Node.js/io.js v2.x, REPL history was controlled by using a <code>NODE_REPL_HISTORY_FILE</code> environment variable, and the history was saved in JSON format. This variable has now been deprecated, and your REPL history will automatically be converted to using plain text. The new file will be saved to either your home directory, or a directory defined by the <code>NODE_REPL_HISTORY</code> variable, as documented <a href="#repl_environment_variable_options">here</a>.</p> <h2 id="repl_repl_features">REPL Features</h2>  <p>Inside the REPL, Control+D will exit. Multi-line expressions can be input. Tab completion is supported for both global and local variables.</p> <p>Core modules will be loaded on-demand into the environment. For example, accessing <code>fs</code> will <code>require()</code> the <code>fs</code> module as <code>global.fs</code>.</p> <p>The special variable <code>_</code> (underscore) contains the result of the last expression.</p> <pre>&gt; [ 'a', 'b', 'c' ]
[ 'a', 'b', 'c' ]
&gt; _.length
3
&gt; _ += 1
4
</pre>
<p>The REPL provides access to any variables in the global scope. You can expose a variable to the REPL explicitly by assigning it to the <code>context</code> object associated with each <code>REPLServer</code>. For example:</p> <pre data-language="js">// repl_test.js
const repl = require('repl');
var msg = 'message';

repl.start('&gt; ').context.m = msg;
</pre> <p>Things in the <code>context</code> object appear as local within the REPL:</p> <pre>$ node repl_test.js
&gt; m
'message'
</pre>
<p>There are a few special REPL commands:</p> <ul> <li>
<code>.break</code> - While inputting a multi-line expression, sometimes you get lost or just don't care about completing it. <code>.break</code> will start over.</li> <li>
<code>.clear</code> - Resets the <code>context</code> object to an empty object and clears any multi-line expression.</li> <li>
<code>.exit</code> - Close the I/O stream, which will cause the REPL to exit.</li> <li>
<code>.help</code> - Show this list of special commands.</li> <li>
<code>.save</code> - Save the current REPL session to a file .save ./file/to/save.js</li> <li>
<code>.load</code> - Load a file into the current REPL session. .load ./file/to/load.js</li> </ul> <p>The following key combinations in the REPL have these special effects:</p> <ul> <li>
<code>&lt;ctrl&gt;C</code> - Similar to the <code>.break</code> keyword. Terminates the current command. Press twice on a blank line to forcibly exit.</li> <li>
<code>&lt;ctrl&gt;D</code> - Similar to the <code>.exit</code> keyword.</li> <li>
<code>&lt;tab&gt;</code> - Show both global and local(scope) variables</li> </ul> <h3 id="repl_customizing_object_displays_in_the_repl">Customizing Object displays in the REPL</h3> <p>The REPL module internally uses <a href="../util/#util_util_inspect_object_options"><code>util.inspect()</code></a>, when printing values. However, <code>util.inspect</code> delegates the call to the object's <code>inspect()</code> function, if it has one. You can read more about this delegation <a href="../util/#util_custom_inspect_function_on_objects">here</a>.</p> <p>For example, if you have defined an <code>inspect()</code> function on an object, like this:</p> <pre>&gt; var obj = {foo: 'this will not show up in the inspect() output'};
undefined
&gt; obj.inspect = () =&gt; {
...   return {bar: 'baz'};
... };
[Function]
</pre>
<p>and try to print <code>obj</code> in REPL, it will invoke the custom <code>inspect()</code> function:</p> <pre>&gt; obj
{bar: 'baz'}
</pre>
<h2 id="repl_class_replserver">Class: REPLServer</h2> <div class="api_metadata"> <span>Added in: v0.1.91</span> </div>
<p>This inherits from <a href="../readline/#readline_class_interface">Readline Interface</a> with the following events:</p> <h3 id="repl_event_exit">Event: 'exit'</h3> <div class="api_metadata"> <span>Added in: v0.7.7</span> </div>
<p><code>function () {}</code></p> <p>Emitted when the user exits the REPL in any of the defined ways. Namely, typing <code>.exit</code> at the repl, pressing Ctrl+C twice to signal <code>SIGINT</code>, or pressing Ctrl+D to signal <code>'end'</code> on the <code>input</code> stream.</p> <p>Example of listening for <code>exit</code>:</p> <pre data-language="js">replServer.on('exit', () =&gt; {
  console.log('Got "exit" event from repl!');
  process.exit();
});
</pre> <h3 id="repl_event_reset">Event: 'reset'</h3> <div class="api_metadata"> <span>Added in: v0.11.0</span> </div>
<p><code>function (context) {}</code></p> <p>Emitted when the REPL's context is reset. This happens when you type <code>.clear</code>. If you start the repl with <code>{ useGlobal: true }</code> then this event will never be emitted.</p> <p>Example of listening for <code>reset</code>:</p> <pre data-language="js">// Extend the initial repl context.
var replServer = repl.start({ options ... });
someExtension.extend(r.context);

// When a new context is created extend it as well.
replServer.on('reset', (context) =&gt; {
  console.log('repl has a new context');
  someExtension.extend(context);
});
</pre> <h3 id="repl_replserver_definecommand_keyword_cmd">replServer.defineCommand(keyword, cmd)</h3> <div class="api_metadata"> <span>Added in: v0.3.0</span> </div>
<ul> <li>
<code>keyword</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type" target="_blank">&lt;String&gt;</a>
</li> <li>
<code>cmd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type" target="_blank">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" class="type" target="_blank">&lt;Function&gt;</a>
</li> </ul> <p>Makes a command available in the REPL. The command is invoked by typing a <code>.</code> followed by the keyword. The <code>cmd</code> is an object with the following values:</p> <ul> <li>
<code>help</code> - help text to be displayed when <code>.help</code> is entered (Optional).</li> <li>
<code>action</code> - a function to execute, potentially taking in a string argument, when the command is invoked, bound to the REPLServer instance (Required).</li> </ul> <p>If a function is provided instead of an object for <code>cmd</code>, it is treated as the <code>action</code>.</p> <p>Example of defining a command:</p> <pre data-language="js">// repl_test.js
const repl = require('repl');

var replServer = repl.start();
replServer.defineCommand('sayhello', {
  help: 'Say hello',
  action: function(name) {
    this.write(`Hello, ${name}!\n`);
    this.displayPrompt();
  }
});
</pre> <p>Example of invoking that command from the REPL:</p> <pre>&gt; .sayhello Node.js User
Hello, Node.js User!
</pre>
<h3 id="repl_replserver_displayprompt_preservecursor">replServer.displayPrompt([preserveCursor])</h3> <div class="api_metadata"> <span>Added in: v0.1.91</span> </div>
<ul> <li>
<code>preserveCursor</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type" target="_blank">&lt;Boolean&gt;</a>
</li> </ul> <p>Like <a href="../readline/#readline_rl_prompt_preservecursor"><code>readline.prompt</code></a> except also adding indents with ellipses when inside blocks. The <code>preserveCursor</code> argument is passed to <a href="../readline/#readline_rl_prompt_preservecursor"><code>readline.prompt</code></a>. This is used primarily with <code>defineCommand</code>. It's also used internally to render each prompt line.</p> <h2 id="repl_repl_start_options">repl.start(options)</h2> <p>Returns and starts a <code>REPLServer</code> instance, that inherits from <a href="../readline/#readline_class_interface">Readline Interface</a>. Accepts an "options" Object that takes the following values:</p> <ul> <li>
<p><code>prompt</code> - the prompt and <code>stream</code> for all I/O. Defaults to <code>&gt;</code>.</p> </li> <li>
<p><code>input</code> - the readable stream to listen to. Defaults to <code>process.stdin</code>.</p> </li> <li>
<p><code>output</code> - the writable stream to write readline data to. Defaults to <code>process.stdout</code>.</p> </li> <li>
<p><code>terminal</code> - pass <code>true</code> if the <code>stream</code> should be treated like a TTY, and have ANSI/VT100 escape codes written to it. Defaults to checking <code>isTTY</code> on the <code>output</code> stream upon instantiation.</p> </li> <li>
<p><code>eval</code> - function that will be used to eval each given line. Defaults to an async wrapper for <code>eval()</code>. See below for an example of a custom <code>eval</code>.</p> </li> <li>
<p><code>useColors</code> - a boolean which specifies whether or not the <code>writer</code> function should output colors. If a different <code>writer</code> function is set then this does nothing. Defaults to the repl's <code>terminal</code> value.</p> </li> <li>
<p><code>useGlobal</code> - if set to <code>true</code>, then the repl will use the <code>global</code> object, instead of running scripts in a separate context. Defaults to <code>false</code>.</p> </li> <li>
<p><code>ignoreUndefined</code> - if set to <code>true</code>, then the repl will not output the return value of command if it's <code>undefined</code>. Defaults to <code>false</code>.</p> </li> <li>
<p><code>writer</code> - the function to invoke for each command that gets evaluated which returns the formatting (including coloring) to display. Defaults to <code>util.inspect</code>.</p> </li> <li>
<p><code>replMode</code> - controls whether the repl runs all commands in strict mode, default mode, or a hybrid mode ("magic" mode.) Acceptable values are:</p> <ul> <li>
<code>repl.REPL_MODE_SLOPPY</code> - run commands in sloppy mode.</li> <li>
<code>repl.REPL_MODE_STRICT</code> - run commands in strict mode. This is equivalent to prefacing every repl statement with <code>'use strict'</code>.</li> <li>
<code>repl.REPL_MODE_MAGIC</code> - attempt to run commands in default mode. If they fail to parse, re-try in strict mode.</li> </ul> </li> </ul> <p>You can use your own <code>eval</code> function if it has following signature:</p> <pre>function eval(cmd, context, filename, callback) {
  callback(null, result);
}
</pre>
<p>On tab completion, <code>eval</code> will be called with <code>.scope</code> as an input string. It is expected to return an array of scope names to be used for the auto-completion.</p> <p>Multiple REPLs may be started against the same running instance of Node.js. Each will share the same global object but will have unique I/O.</p> <p>Here is an example that starts a REPL on stdin, a Unix socket, and a TCP socket:</p> <pre data-language="js">const net = require('net');
const repl = require('repl');
var connections = 0;

repl.start({
  prompt: 'Node.js via stdin&gt; ',
  input: process.stdin,
  output: process.stdout
});

net.createServer((socket) =&gt; {
  connections += 1;
  repl.start({
    prompt: 'Node.js via Unix socket&gt; ',
    input: socket,
    output: socket
  }).on('exit', () =&gt; {
    socket.end();
  })
}).listen('/tmp/node-repl-sock');

net.createServer((socket) =&gt; {
  connections += 1;
  repl.start({
    prompt: 'Node.js via TCP socket&gt; ',
    input: socket,
    output: socket
  }).on('exit', () =&gt; {
    socket.end();
  });
}).listen(5001);
</pre> <p>Running this program from the command line will start a REPL on stdin. Other REPL clients may connect through the Unix socket or TCP socket. <code>telnet</code> is useful for connecting to TCP sockets, and <code>socat</code> can be used to connect to both Unix and TCP sockets.</p> <p>By starting a REPL from a Unix socket-based server instead of stdin, you can connect to a long-running Node.js process without restarting it.</p> <p>For an example of running a "full-featured" (<code>terminal</code>) REPL over a <code>net.Server</code> and <code>net.Socket</code> instance, see: <a href="https://gist.github.com/2209310" target="_blank">https://gist.github.com/2209310</a></p> <p>For an example of running a REPL instance over <a href="http://man7.org/linux/man-pages/man1/curl.1.html" target="_blank">curl(1)</a>, see: <a href="https://gist.github.com/2053342" target="_blank">https://gist.github.com/2053342</a></p>
<div class="_attribution">
  <p class="_attribution-p">
    © Joyent, Inc. and other Node contributors<br>Licensed under the MIT License.<br>Node.js is a trademark of Joyent, Inc. and is used with its permission.<br>We are not endorsed by or affiliated with Joyent.<br>
    <a href="https://nodejs.org/dist/latest-v4.x/docs/api/repl.html" class="_attribution-link" target="_blank">https://nodejs.org/dist/latest-v4.x/docs/api/repl.html</a>
  </p>
</div>

				
			</div>
			<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
</amp-auto-ads>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
