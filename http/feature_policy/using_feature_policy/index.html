
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Feature Policy&#58; Using Feature Policy - HTTP - W3cubDocs</title>
  
  <meta name="description" content=" This is an experimental technologyCheck the Browser compatibility table carefully before using this in production. ">
  <meta name="keywords" content="feature, policy, using, -, http">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/http/feature_policy/using_feature_policy/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" integrity="sha256-6/DH7X+2hvUPElJfGsvzm+tgIpmM9zjbYxnpsr6gR1A=" crossorigin="anonymous" href="/assets/application-ebf0c7ed7fb686f50f12525f1acbf39beb6022998cf738db6319e9b2bea04750.css">
  <script type="text/javascript" src="/assets/application-db285287b40ed28fac520fcfd75d7d874692b647b5b5e05968c741dda5de4148.js" integrity="sha256-2yhSh7QO0o+sUg/P1119h0aStke1teBZaMdB3aXeQUg=" crossorigin="anonymous"></script>
  <script src="/json/http.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2572770204602497",
            enable_page_level_ads: true
        });
  </script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/http/" class="_nav-link" title="" style="margin-left:0;">HTTP</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _mdn">
				
				
<h1>Feature Policy: Using Feature Policy</h1> <div class="blockIndicator experimental indicator-warning"> <p> <strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Contribute/Guidelines/Conventions_definitions#Experimental" target="_blank">experimental technology</a></strong><br>Check the <a href="#Browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p> </div> <p><a href="../../feature_policy/">Feature Policy</a> allows you to control which origins can use which features, both in the top-level page and in embedded frames. Essentially, you write a policy, which is an allowed list of origins for each feature. For every feature controlled by Feature Policy, the feature is only enabled in the current document or frame if its origin matches the allowed list of origins.</p> <p>For each policy-controlled feature, the browser maintains a list of origins for which the feature is enabled, known as an allowlist. If you do not specify a policy for a feature, then a default allowlist will be used. The default allowlist is specific to each feature.</p> <h2 id="Writing_a_policy">Writing a policy</h2> <p>A policy is described using a set of individual policy directives. A policy directive is a combination of a defined feature name, and an allowlist of origins that can use the feature.</p> <h3 id="allowlist">allowlist</h3> <p>An allowlist is a list of origins that takes one or more of the following values:</p> <ul> <li>
<code>*</code>: The feature will be allowed in this document, and all nested browsing contexts (iframes) regardless of their origin.</li> <li>
<code>'self'</code>: The feature will be allowed in this document, and in all nested browsing contexts (iframes) in the same origin.</li> <li>
<code>'src'</code>: (In an iframe allow attribute only) The feature will be allowed in this iframe, as long as the document loaded into it comes from the same origin as the URL in the iframe's <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe#Attributes" target="_blank">src</a> attribute.</li> <li>
<code>'none'</code>: The feature is disabled in top-level and nested browsing contexts.</li> <li>&lt;origin(s)&gt;: The feature is allowed for specific origins (for example, https://example.com). Origins should be separated by a space.</li> </ul> <p>The values <code>*</code> (enable for all origins) or <code>'none'</code> (disable for all origins) may only be used alone, while <code>'self'</code> and <code>'src'</code> may be used with one or more origins.</p> <p>Features are each defined to have a default allowlist, which is one of:</p> <ul> <li>
<code>*</code>: The feature is allowed by default in top-level browsing contexts and all nested browsing contexts (iframes).</li> <li>
<code>'self'</code>: The feature is allowed by default in top-level browsing contexts and in nested browsing contexts (iframes) in the same origin. The feature is not allowed in cross-origin documents in nested browsing contexts.</li> <li>
<code>'none'</code>: The feature is disabled in top-level and nested browsing contexts.</li> </ul> <h2 id="Specifying_your_policy">Specifying your policy</h2> <p>Feature Policy provides two ways to specify policies to control features:</p> <ul> <li>The <a href="../../headers/feature-policy/"><code>Feature-Policy</code></a> HTTP header.</li> <li>The <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe#Attributes" target="_blank">allow</a> attribute on <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe" target="_blank"><code>&lt;iframe&gt;</code></a>s.</li> </ul> <p>The primary difference between the HTTP header and the <code>allow</code> attribute is that the allow attribute only controls features within an iframe. The header controls features in the response and any embedded content within the page.</p> <h3 id="The_Feature-Policy_HTTP_header">The Feature-Policy HTTP header</h3> <p>You can send the <code>Feature-Policy</code> HTTP header with the response of a page. The value of this header is a policy to be enforced by the browser for the given page. It has the following structure.</p> <pre data-language="bash">Feature-Policy: &lt;feature name&gt; &lt;allowlist of origin(s)&gt;</pre> <p>For example, to block all content from using the Geolocation API across your site:</p> <pre data-language="bash">Feature-Policy: geolocation 'none'</pre> <p>Several features can be controlled at the same time by sending the HTTP header with a semicolon-separated list of policy directives, or by sending a separate header for each policy.</p> <p>For example, the following are equivalent:</p> <pre data-language="bash">Feature-Policy: unsized-media 'none'; geolocation 'self' https://example.com; camera *;

Feature-Policy: unsized-media 'none'
Feature-Policy: geolocation 'self' https://example.com
Feature-Policy: camera *;
</pre> <h3 id="The_iframe_allow_attribute">The iframe allow attribute</h3> <p>The second way to use Feature Policy is for controlling content within an iframe. Use the <code>allow</code> attribute to specify a policy list for embedded content.</p> <p>For example, allow all browsing contexts within this iframe to use fullscreen:</p> <pre data-language="html">&lt;iframe src="https://example.com..." allow="fullscreen"&gt;&lt;/iframe&gt;</pre> <p>This is equivalent to:</p> <pre data-language="html">&lt;iframe src="https://example.com..." allow="fullscreen 'src'"&gt;&lt;/iframe&gt;</pre> <p>This example allows <code>&lt;iframe&gt;</code> content on a particular origin to access the user's location:</p> <pre data-language="html">&lt;iframe src="https://google-developers.appspot.com/demos/..."
        allow="geolocation https://google-developers.appspot.com"&gt;&lt;/iframe&gt;
</pre> <p>Similar to the HTTP header, several features can be controlled at the same time by specifying a semicolon-separated list of policy directives.</p> <p>For example, this blocks the <code>&lt;iframe&gt;</code> from using the camera and microphone:</p> <pre data-language="html">&lt;iframe allow="camera 'none'; microphone 'none'"&gt;
</pre> <h2 id="Inheritance_of_policy_for_embedded_content">Inheritance of policy for embedded content</h2> <p>Scripts inherit the policy of their browsing context, regardless of their origin. That means that top-level scripts inherit the policy from the main document.</p> <p>All iframes inherit the policy of their parent page. If the iframe has an <code>allow</code> attribute, the policies of the parent page and the <code>allow</code> attribute are combined, using the most restrictive subset. For an iframe to have a feature enabled, the origin must be in the allowlist for both the parent page and the allow attribute.</p> <p>Disabling a feature in a policy is a one-way toggle. If a feature has been disabled for a child frame by its parent frame, the child cannot re-enable it, and neither can any of the child's descendants.</p> <h2 id="Enforcing_best_practices_for_good_user_experiences">Enforcing best practices for good user experiences</h2> <p>It's difficult to build a website that uses all the latest best practices and provides great performance and user experiences. As the website evolves, it can become even harder to maintain the user experience over time. You can use feature policies to specify the desired best practices, and rely on the browser to enforce the policies to prevent regressions.</p> <p>There are several policy-controlled features designed to represent functionality that can negatively impact the user experience. These features include:</p> <ul> <li>Layout-inducing Animations</li> <li>Unoptimized (poorly compressed) images</li> <li>Oversized images</li> <li>Synchronous scripts</li> <li>Synchronous XMLHttpRequest</li> <li>Unsized media</li> </ul> <p>To avoid breaking existing web content, the default for such policy-controlled features is to allow the functionality to be used by all origins. That is, the default allowlist is <code>'*'</code> for each feature. Preventing the use of the sub-optimal functionality requires explicitly specifying a policy that disables the features.</p> <p>For new content, you can start developing with a policy that disables all the features. This approach ensures that none of the functionality is introduced. When applying a policy to existing content, testing is likely required to verify it continues to work as expected. This is especially important for embedded or third-party content that you do not control.</p> <p>To turn on the enforcement of all the best practices, specify the policy as below.</p> <p>Send the following the HTTP header:</p> <pre data-language="bash">Feature-Policy: layout-animations 'none'; unoptimized-images 'none'; oversized-images 'none'; sync-script 'none'; sync-xhr 'none'; unsized-media 'none';</pre> <p>Using the <code>&lt;iframe&gt;</code> <code>allow</code> attribute:</p> <pre data-language="html">&lt;iframe src="https://example.com..." allow="layout-animations 'none'; unoptimized-images 'none'; oversized-images 'none'; sync-script 'none'; sync-xhr 'none'; unsized-media 'none';"&gt;&lt;/iframe&gt;</pre> <h2 id="See_also">See also</h2> <ul> <li><a href="../../feature_policy/">Feature Policy</a></li> <li>
<a href="../../headers/feature-policy/"><code>Feature-Policy</code></a> header</li> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe#Attributes" target="_blank">allow</a> attribute on iframes</li> <li>
<a href="../../headers/content-security-policy/"><code>Content-Security-Policy</code></a> header</li> <li>
<a href="../../headers/referrer-policy/"><code>Referrer-Policy</code></a> header</li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Feature_Policy/Using_Feature_Policy%24edit" class="_attribution-link" target="_blank">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2018 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Feature_Policy/Using_Feature_Policy" class="_attribution-link" target="_blank">https://developer.mozilla.org/en-US/docs/Web/HTTP/Feature_Policy/Using_Feature_Policy</a>
  </p>
</div>

				
			</div>
			<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
</amp-auto-ads>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
