
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Trade-offs - Cypress - W3cubDocs</title>
  
  <meta name="description" content="Cypress automates the browser with its own unique architecture - different from any other testing tool. While this unlocks the power to do things &hellip;">
  <meta name="keywords" content="trade-offs, permanent, -, cypress">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/cypress/guides/references/trade-offs/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" integrity="sha256-6/DH7X+2hvUPElJfGsvzm+tgIpmM9zjbYxnpsr6gR1A=" crossorigin="anonymous" href="/assets/application-ebf0c7ed7fb686f50f12525f1acbf39beb6022998cf738db6319e9b2bea04750.css">
  <script type="text/javascript" src="/assets/application-db285287b40ed28fac520fcfd75d7d874692b647b5b5e05968c741dda5de4148.js" integrity="sha256-2yhSh7QO0o+sUg/P1119h0aStke1teBZaMdB3aXeQUg=" crossorigin="anonymous"></script>
  <script src="/json/cypress.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2572770204602497",
            enable_page_level_ads: true
        });
  </script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cypress/" class="_nav-link" title="" style="margin-left:0;">Cypress</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _cypress">
				
				
<h1 class="article-title" itemprop="name">Trade-offs</h1>  <div class="article-content" itemprop="articleBody"> <p>Cypress automates the browser with its own unique architecture - different from any other testing tool. While this unlocks the power to do things you will not find anywhere else, there are specific trade-offs that are made. There is no free lunch!</p> <p>In this guide we will lay out what some of the trade-offs are - and specifically how you can work around them.</p> <p>While at first it may seem like these are strict limitations in Cypress - we think you will soon realize that many of these boundaries are actually <strong>good</strong> to have. In a sense they prevent you from writing bad, slow, or flaky tests.</p> <h3 id="Permanent-trade-offs" class="article-heading">
Permanent trade-offs:
</h3>
<ul> <li>Cypress is not a general purpose <a href="#Automation-restrictions">automation tool</a>.</li> <li>Cypress commands run <a href="#Inside-the-browser">inside of a browser</a>.</li> <li>There will never be support for <a href="#Multiple-tabs">multiple browser tabs</a>.</li> <li>You cannot use Cypress to drive <a href="#Multiple-browsers-open-at-the-same-time">two browsers at the same time</a>.</li> <li>Each test is bound to a <a href="#Same-origin">single origin</a>.</li> </ul> <h3 id="Temporary-trade-offs" class="article-heading">
Temporary trade-offs:
</h3>
<p>We have <a href="https://github.com/cypress-io/cypress/issues" target="_blank" rel="noopener">open issues</a> where you can find a full list of things Cypress will eventually address, we wanted to highlight some of the more important <em>temporary</em> restrictions that Cypress will eventually address. <a href="https://on.cypress.io/contributing" target="_blank" rel="noopener">PRs are welcome ;-)</a></p> <p>Many of these issues are currently being worked on or are on our <a href="../roadmap/">Roadmap</a>.</p> <ul> <li><a href="../../../api/commands/hover/">Workarounds for the lack of a <code>cy.hover()</code> command.</a></li> <li><a href="https://github.com/cypress-io/cypress/issues/299" target="_blank" rel="noopener noreferrer">There is no <code>cy.tab()</code> command.</a></li> <li><a href="https://github.com/cypress-io/cypress/issues/311#issuecomment-339824191" target="_blank" rel="noopener noreferrer">There is not any native or mobile events support.</a></li> <li><a href="https://github.com/cypress-io/cypress/issues/170#issuecomment-340012621" target="_blank" rel="noopener noreferrer">Testing file uploads is application specific.</a></li> <li><a href="https://github.com/cypress-io/cypress/issues/433#issuecomment-280465552" target="_blank" rel="noopener noreferrer">Testing file downloads is application specific.</a></li> <li><a href="https://github.com/cypress-io/cypress/issues/685" target="_blank" rel="noopener noreferrer">iframe support is somewhat limited, but does work.</a></li> <li><a href="https://github.com/cypress-io/cypress/issues/310" target="_blank" rel="noopener noreferrer">There is no cross browser support other than Chrome and Electron.</a></li> <li>
<a href="https://github.com/cypress-io/cypress/issues/95#issuecomment-281273126" target="_blank" rel="noopener noreferrer">You cannot use <code>cy.route()</code> on <code>window.fetch</code> but there is a workaround.</a> See the implementation in <a href="https://github.com/cypress-io/cypress-example-recipes/tree/master/examples/stubbing-spying__window-fetch/cypress/integration" target="_blank" rel="noopener">this recipe.</a>
</li> <li>
<a href="https://github.com/cypress-io/cypress/issues/144" target="_blank" rel="noopener noreferrer">There is no shadow DOM support, but there are workarounds.</a> See <a href="https://github.com/cypress-io/cypress/issues/830#issuecomment-449411701" target="_blank" rel="noopener">this comment.</a> </li> </ul> <h1 id="Permanent-trade-offs-1" class="article-heading">
Permanent trade-offs
</h1>
<h2 id="Automation-restrictions" class="article-heading">
Automation restrictions
</h2>
<p>Cypress is a specialized tool that does one thing really well: end-to-end testing web applications while they are under development. You should not use Cypress for things it is not designed for such as:</p> <ul> <li>Indexing the web</li> <li>Spidering links</li> <li>Performance testing</li> <li>Scripting 3rd party sites</li> </ul> <p>There are other excellent tools that are optimized for doing each item listed above.</p> <p>The <strong>sweet spot</strong> of Cypress is to be used as a tool to test your own application <strong>as you build it</strong>. It is built for developers and QA engineers, not manual testers or exploratory testing.</p> <h2 id="Inside-the-browser" class="article-heading">
Inside the browser
</h2>
<p>In case you missed it before - Cypress tests run inside of the browser! This means we can do things nobody else can. There is no object serialization or JSON wire protocols. You have real, native access to everything in your application under test. It is impossible for Cypress to ‘miss’ elements and it always knows the moment your application fires any kind of event.</p> <p>But what this also means is that your test code <strong>is being evaluated inside the browser</strong>. Test code is not evaluated in Node, or any other server side language. The <strong>only</strong> language we will ever support is the language of the web: JavaScript.</p> <p>This trade-off means it makes it a little bit harder to communicate with the back end - like your server or database. You will not be able to connect or import those server-side libraries or modules directly. Although you can of course require <code>node_modules</code> which can be used in the browser. Additionally, you have the ability to use Node to import or talk directly to your back end scripts using <a href="../../../api/plugins/writing-a-plugin/">our Plugins API</a> or <a href="../../../api/commands/task/"><code>cy.task()</code></a>.</p> <p>To talk to your database or server you need to use the <a href="../../../api/commands/exec/"><code>cy.exec()</code></a>, <a href="../../../api/commands/task/"><code>cy.task()</code></a>, or <a href="../../../api/commands/request/"><code>cy.request()</code></a> commands. That means you will need to expose a way to seed and setup your database. This really is not that hard, but it might take a bit more elbow grease than other testing tools written in your back end language.</p> <p>The trade-off here is that doing everything in the browser (basically all of your tests) is a much better experience in Cypress. But doing things outside of the browser may take a little extra work.</p> <p>In the future we <strong>do</strong> have plans to release back end adapters for other languages.</p> <h2 id="Multiple-tabs" class="article-heading">
Multiple tabs
</h2>
<p>Because Cypress runs in the browser, it will never have multi-tabs support. We do have access to the browser automation APIs to actually switch tabs, but there is no reason for us to ever expose them.</p> <p>Most of the time this use case is needed when users click an <code>&lt;a&gt;</code> that opens a new tab. Users then want to switch to that tab to verify that the content loaded. But, you shouldn’t need to do this. In fact we have <a href="https://docs.cypress.io/examples/examples/recipes.html#Testing-the-DOM" target="_blank">recipes of showing you how to test this without multiple tabs</a>.</p> <p>To take this a step further - we don’t believe there is any use case for testing the browser’s native behavior. You should ask yourself why you are testing that clicking an <code>&lt;a href="/foo" target="_blank"&gt;</code> opens a new tab. You already know that is what the browser is designed to do and you already know that it is triggered by the <code>target="_blank"</code> attribute.</p> <p>Since that is the case, just test <strong>the thing</strong> triggering the browser to perform this behavior - as opposed to testing the behavior itself.</p> <pre class=" language-js" data-language="javascript">cy.get('a[href="/foo"]').should('have.attr', 'target', '_blank') // so simple
</pre> <p>This principle applies to everything in Cypress. Do not test what does not need testing. It is slow, brittle, and adds zero value. Only test the underlying thing that causes the behavior you care about testing.</p> <h2 id="Multiple-browsers-open-at-the-same-time" class="article-heading">
Multiple browsers open at the same time
</h2>
<p>Just like with multiple tabs - Cypress does not support controlling more than 1 open browser at a time.</p> <p>However it <strong>is possible</strong> to synchronize Cypress with another back end process - whether it is Selenium or Puppeteer to drive a 2nd open browser. We have actually seen this work together quite nicely!</p> <p>With that said, except in the most unusual and rare circumstances, you can still test most application behavior without opening multiple browsers at the same time.</p> <p>You may ask about this functionality like this:</p> <blockquote> <p>I’m trying to test a chat application. Can I run more than one browser at a time with Cypress?</p> </blockquote> <p>Whether you are testing a chat application or anything else - what you are really asking about is testing collaboration. But, <strong>you don’t need to recreate the entire environment in order to test collaboration with 100% coverage</strong>.</p> <p>Doing it this way can be faster, more accurate, and more scalable.</p> <p>While outside the scope of this article, you could test a chat application using the following principles. Each one will incrementally introduce more collaboration:</p> <h3 id="1-Use-only-the-browser" class="article-heading">
1. Use only the browser:
</h3>
<pre class=" language-text" data-language="javascript">    ↓
← browser →
    ↑
</pre> <p>Avoid the server, invoke your JavaScript callbacks manually thereby simulating what happens when “notifications come in”, or “users leave the chat” purely in the browser.</p> <p>You can <a href="../../../api/commands/stub/">stub</a> everything and simulate every single scenario. Chat messages, offline messages, connections, reconnections, disconnections, group chat, etc. Everything that happens inside of the browser can be fully tested. Requests leaving the browser could also be stubbed and you could assert that the request bodies were correct.</p> <h3 id="2-Stub-the-other-connection" class="article-heading">
2. Stub the other connection:
</h3>
<pre class=" language-text" data-language="javascript">server → browser
            ↓
server ← browser
  ↓
(other connections stubbed)
  ↓
server → browser
</pre> <p>Use your server to receive messages from the browser, and simulate “the other participant” by sending messages as that participant. This is certainly application specific, but generally you could insert records into the database or do whatever it takes for your server to act as if a message of one client needs to be sent back to the browser.</p> <p>Typically this pattern enables you to avoid making a secondary WebSocket connection and yet still fulfills the bidirectional browser and server contract. This means you could also test edge cases (disconnections, etc) without actually handling real connections.</p> <h3 id="3-Introduce-another-connection" class="article-heading">
3: Introduce another connection:
</h3>
<pre class=" language-text" data-language="javascript">server → browser
            ↓
server ← browser
  ↓
server → other connection
            ↓
server ← other connection
  ↓
server → browser
</pre> <p>To do this - you would need a background process outside of the browser to make the underlying WebSocket connection that you can then communicate with and control.</p> <p>You can do this in many ways and here is a simple example of using an HTTP server to act as the client and exposing a REST interface that enables us to control it.</p> <pre class=" language-js" data-language="javascript">// Cypress tests

// tell the http server at 8081 to connect to 8080
cy.request('http://localhost:8081/connect?url=http://localhost:8080')

// tell the http server at 8081 to send a message
cy.request('http://localhost:8081/message?m=hello')

// tell the http server at 8081 to disconnect
cy.request('http://localhost:8081/disconnect')
</pre> <p>And the HTTP server code would look something like this…</p> <pre class=" language-js" data-language="javascript">const client = require('socket.io:client')
const express = require('express')

const app = express()

let socket

app.get('/connect', (req, res) =&gt; {
  const url = req.query.url

  socket = client(url)

  socket.on('connect', () =&gt; {
    res.sendStatus(200)
  })
})

app.get('/message', (req, res) =&gt; {
  const msg = req.query.m

  socket.send(msg, () =&gt; {
    res.sendStatus(200)
  })
})

app.get('/disconnect', (req, res) =&gt; {
  socket.on('disconnect', () =&gt; {
    res.sendStatus(200)
  })

  socket.disconnect()
})

app.listen(8081, () =&gt; {})
</pre> <p>This avoids ever needing a second open browser, but still gives you an end-to-end test that provides 100% confidence that the two clients can communicate with each other.</p> <h2 id="Same-origin" class="article-heading">
Same-origin
</h2>
<p>Each test is limited to only visiting a single superdomain.</p> <p>What is a superdomain? Given the urls below, all have the same superdomain of <code>cypress.io</code>.</p> <ul> <li><code>http://cypress.io</code></li> <li><code>https://cypress.io</code></li> <li><code>https://www.cypress.io</code></li> <li><code>https://docs.cypress.io</code></li> <li><code>https://example.cypress.io/commands/querying</code></li> </ul> <p>The rules are:</p> <ul> <li>
 You <strong>cannot</strong> <a href="../../../api/commands/visit/">visit</a> two different superdomains in the same test.</li> <li>
 You <strong>can</strong> <a href="../../../api/commands/visit/">visit</a> different subdomains in the same test.</li> <li>
 You <strong>can</strong> <a href="../../../api/commands/visit/">visit</a> different superdomains in <strong>different</strong> tests.</li> </ul> <pre class=" language-javascript" data-language="javascript">cy.visit('https://www.cypress.io')
cy.visit('https://docs.cypress.io') // yup all good
</pre> <pre class=" language-javascript" data-language="javascript">cy.visit('https://apple.com')
cy.visit('https://google.com')      // this will immediately error
</pre> <p>This limitation exists because Cypress switches to the domain under each specific test when it runs.</p> <p>The good news here is that it is extremely rare to need to visit two different superdomains in a single test. Why? Because the browser has a natural security barrier called <code>origin policy</code> that means that state like <code>localStorage</code>, <code>cookies</code>, <code>service workers</code> and many other APIs are not shared between them.</p> <p>Therefore what you do on one site could not possibly affect another.</p> <p>As a best practice, you should not visit or interact with a 3rd party service not under your control. However, there are exceptions! If your organization uses Single Sign On (SSO) or OAuth then you might involve a 3rd party service other than your superdomain.</p> <p>We’ve written several other guides specifically about handling this situation.</p> <ul> <li><a href="../best-practices/#Visiting-external-sites">Best Practices: Visiting external sites</a></li> <li><a href="../../guides/web-security/#Common-Workarounds">Web Security: Common Workarounds</a></li> <li>
<a href="https://docs.cypress.io/examples/examples/recipes.html#Logging-In" target="_blank">Recipes: Logging In - Single Sign On</a> </li> </ul> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2017 Cypress.io<br>Licensed under the MIT License.<br>
    <a href="https://docs.cypress.io/guides/references/trade-offs.html" class="_attribution-link" target="_blank">https://docs.cypress.io/guides/references/trade-offs.html</a>
  </p>
</div>

				
			</div>
			<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
</amp-auto-ads>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
