
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Image_downsize() - WordPress - W3cubDocs</title>
  
  <meta name="description" content=" Scale an image to fit a particular size (such as ‘thumb’ or ‘medium’). ">
  <meta name="keywords" content="image, downsize, int, &#36;id, array|string, &#36;size, &#39;medium&#39;, -, wordpress">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/wordpress/functions/image_downsize/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" integrity="sha256-6/DH7X+2hvUPElJfGsvzm+tgIpmM9zjbYxnpsr6gR1A=" crossorigin="anonymous" href="/assets/application-ebf0c7ed7fb686f50f12525f1acbf39beb6022998cf738db6319e9b2bea04750.css">
  <script type="text/javascript" src="/assets/application-db285287b40ed28fac520fcfd75d7d874692b647b5b5e05968c741dda5de4148.js" integrity="sha256-2yhSh7QO0o+sUg/P1119h0aStke1teBZaMdB3aXeQUg=" crossorigin="anonymous"></script>
  <script src="/json/wordpress.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2572770204602497",
            enable_page_level_ads: true
        });
  </script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/wordpress/" class="_nav-link" title="" style="margin-left:0;">WordPress</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _wordpress">
				
				
<h1>image_downsize( int $id, array|string $size = 'medium' )</h1>  <section class="summary"> <p>Scale an image to fit a particular size (such as ‘thumb’ or ‘medium’).</p> </section> <div class="content-toc">  <section class="description"> <h2 class="toc-heading" id="description" tabindex="-1">Description </h2> <p>Array with image url, width, height, and whether is intermediate size, in that order is returned on success is returned. $is_intermediate is true if $url is a resized image, false if it is the original.</p> <p>The URL might be the original image, or it might be a resized version. This function won’t create a new resized copy, it will just return an already resized one if it exists.</p> <p>A plugin may use the <a href="../../hooks/image_downsize/">‘image_downsize’</a> filter to hook into and offer image resizing services for images. The hook must return an array with the same elements that are returned in the function. The first element being the URL to the new image that was resized.</p> </section>  <section class="parameters"> <h3 class="toc-heading" id="parameters" tabindex="-1">Parameters </h3> <dl> <dt>$id</dt> <dd> <p class="desc"> <span class="type">(<span class="int">int</span>)</span> <span class="required">(Required)</span> <span class="description">Attachment ID for image.</span> </p> </dd> <dt>$size</dt> <dd> <p class="desc"> <span class="type">(<span class="array">array</span>|<span class="string">string</span>)</span> <span class="required">(Optional)</span> <span class="description"> Image size to scale to. Accepts any valid image size, or an array of width and height values in pixels (in that order). </span> </p> <p class="default">Default value: 'medium'</p> </dd> </dl> </section>  <section class="return"> <h3 class="toc-heading" id="return" tabindex="-1">Return </h3> <p><span class="return-type">(false|array)</span> Array containing the image URL, width, height, and boolean for whether the image is an intermediate size. False on failure.</p> </section>  <section class="source-content"> <h3 class="toc-heading" id="source" tabindex="-1">Source </h3> <p> File: <a href="https://developer.wordpress.org/reference/files/wp-includes/media.php/" target="_blank">wp-includes/media.php</a> </p> <pre class="source-code-container" data-language="php">function image_downsize( $id, $size = 'medium' ) {
	$is_image = wp_attachment_is_image( $id );

	/**
	 * Filters whether to preempt the output of image_downsize().
	 *
	 * Passing a truthy value to the filter will effectively short-circuit
	 * down-sizing the image, returning that value as output instead.
	 *
	 * @since 2.5.0
	 *
	 * @param bool         $downsize Whether to short-circuit the image downsize. Default false.
	 * @param int          $id       Attachment ID for image.
	 * @param array|string $size     Size of image. Image size or array of width and height values (in that order).
	 *                               Default 'medium'.
	 */
	if ( $out = apply_filters( 'image_downsize', false, $id, $size ) ) {
		return $out;
	}

	$img_url          = wp_get_attachment_url( $id );
	$meta             = wp_get_attachment_metadata( $id );
	$width            = $height = 0;
	$is_intermediate  = false;
	$img_url_basename = wp_basename( $img_url );

	// If the file isn't an image, attempt to replace its URL with a rendered image from its meta.
	// Otherwise, a non-image type could be returned.
	if ( ! $is_image ) {
		if ( ! empty( $meta['sizes'] ) ) {
			$img_url          = str_replace( $img_url_basename, $meta['sizes']['full']['file'], $img_url );
			$img_url_basename = $meta['sizes']['full']['file'];
			$width            = $meta['sizes']['full']['width'];
			$height           = $meta['sizes']['full']['height'];
		} else {
			return false;
		}
	}

	// try for a new style intermediate size
	if ( $intermediate = image_get_intermediate_size( $id, $size ) ) {
		$img_url         = str_replace( $img_url_basename, $intermediate['file'], $img_url );
		$width           = $intermediate['width'];
		$height          = $intermediate['height'];
		$is_intermediate = true;
	} elseif ( $size == 'thumbnail' ) {
		// fall back to the old thumbnail
		if ( ( $thumb_file = wp_get_attachment_thumb_file( $id ) ) &amp;&amp; $info = getimagesize( $thumb_file ) ) {
			$img_url         = str_replace( $img_url_basename, wp_basename( $thumb_file ), $img_url );
			$width           = $info[0];
			$height          = $info[1];
			$is_intermediate = true;
		}
	}
	if ( ! $width &amp;&amp; ! $height &amp;&amp; isset( $meta['width'], $meta['height'] ) ) {
		// any other type: use the real image
		$width  = $meta['width'];
		$height = $meta['height'];
	}

	if ( $img_url ) {
		// we have the actual image size, but might need to further constrain it if content_width is narrower
		list( $width, $height ) = image_constrain_size_for_editor( $width, $height, $size );

		return array( $img_url, $width, $height, $is_intermediate );
	}
	return false;

}</pre>  </section>  <section class="changelog"> <h3 class="toc-heading" id="changelog" tabindex="-1">Changelog </h3> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.5.0/" alt="WordPress 2.5.0" target="_blank">2.5.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section>  <section class="related"> <h2 class="toc-heading" id="related" tabindex="-1">Related </h2> <article class="uses"> <h3 class="toc-heading" id="uses" tabindex="-1">Uses </h3> <table id="uses-table">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/formatting.php:</span> <a href="../wp_basename/">wp_basename()</a> </td> <td class="related-desc"> <p>i18n friendly version of basename()</p> </td> </tr> <tr> <td> <span>wp-includes/plugin.php:</span> <a href="../apply_filters/">apply_filters()</a> </td> <td class="related-desc"> <p>Call the functions added to a filter hook.</p> </td> </tr> <tr> <td> <span>wp-includes/media.php:</span> <a href="../image_get_intermediate_size/">image_get_intermediate_size()</a> </td> <td class="related-desc"> <p>Retrieves the image’s intermediate size (resized) path, width, and height.</p> </td> </tr> <tr> <td> <span>wp-includes/media.php:</span> <a href="../image_constrain_size_for_editor/">image_constrain_size_for_editor()</a> </td> <td class="related-desc"> <p>Scale down the default size of an image.</p> </td> </tr> <tr> <td> <span>wp-includes/media.php:</span> <a href="../../hooks/image_downsize/">image_downsize</a> </td> <td class="related-desc"> <p>Filters whether to preempt the output of <a href="../image_downsize/">image_downsize()</a>.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../wp_attachment_is_image/">wp_attachment_is_image()</a> </td> <td class="related-desc"> <p>Determines whether an attachment is an image.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../wp_get_attachment_url/">wp_get_attachment_url()</a> </td> <td class="related-desc"> <p>Retrieve the URL for an attachment.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../wp_get_attachment_metadata/">wp_get_attachment_metadata()</a> </td> <td class="related-desc"> <p>Retrieve attachment meta field for attachment ID.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../wp_get_attachment_thumb_file/">wp_get_attachment_thumb_file()</a> </td> <td class="related-desc"> <p>Retrieve thumbnail for an attachment.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <h3 class="toc-heading" id="used-by" tabindex="-1">Used By </h3> <table id="used-by-table">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-admin/includes/media.php:</span> <a href="../image_size_input_fields/">image_size_input_fields()</a> </td> <td class="related-desc"> <p>Retrieve HTML for the size radio buttons with the specified one checked.</p> </td> </tr> <tr> <td> <span>wp-includes/media.php:</span> <a href="../get_image_tag/">get_image_tag()</a> </td> <td class="related-desc"> <p>Gets an img tag for an image attachment, scaling it down if requested.</p> </td> </tr> <tr> <td> <span>wp-includes/media.php:</span> <a href="../wp_get_attachment_image_src/">wp_get_attachment_image_src()</a> </td> <td class="related-desc"> <p>Retrieve an image to represent an attachment.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../wp_get_attachment_thumb_url/">wp_get_attachment_thumb_url()</a> </td> <td class="related-desc"> <p>Retrieve URL for an attachment thumbnail.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-xmlrpc-server.php:</span> <a href="../../classes/wp_xmlrpc_server/_prepare_media_item/">wp_xmlrpc_server::_prepare_media_item()</a> </td> <td class="related-desc"> <p>Prepares media item data for return in an XML-RPC object.</p> </td> </tr> </tbody>

</table> </article> </section>   </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2003–2019 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/functions/image_downsize" class="_attribution-link" target="_blank">https://developer.wordpress.org/reference/functions/image_downsize</a>
  </p>
</div>

				
			</div>
			<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
</amp-auto-ads>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
