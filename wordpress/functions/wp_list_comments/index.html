
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Wp_list_comments() - WordPress - W3cubDocs</title>
  
  <meta name="description" content=" List comments. ">
  <meta name="keywords" content="wp, list, comments, string|array, &#36;args, array, &#36;comments, null, -, wordpress">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/wordpress/functions/wp_list_comments/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" integrity="sha256-6/DH7X+2hvUPElJfGsvzm+tgIpmM9zjbYxnpsr6gR1A=" crossorigin="anonymous" href="/assets/application-ebf0c7ed7fb686f50f12525f1acbf39beb6022998cf738db6319e9b2bea04750.css">
  <script type="text/javascript" src="/assets/application-db285287b40ed28fac520fcfd75d7d874692b647b5b5e05968c741dda5de4148.js" integrity="sha256-2yhSh7QO0o+sUg/P1119h0aStke1teBZaMdB3aXeQUg=" crossorigin="anonymous"></script>
  <script src="/json/wordpress.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2572770204602497",
            enable_page_level_ads: true
        });
  </script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/wordpress/" class="_nav-link" title="" style="margin-left:0;">WordPress</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _wordpress">
				
				
<h1>wp_list_comments( string|array $args = array(), array $comments = null )</h1>  <section class="summary"> <p>List comments.</p> </section> <div class="content-toc">  <section class="description"> <h2 class="toc-heading" id="description" tabindex="-1">Description </h2> <p>Used in the comments.php template to list comments for a particular post.</p> <h3 class="toc-heading" id="see-also" tabindex="-1">See also </h3> <ul> <li>
<a href="../../classes/wp_query/">WP_Query</a>-&gt;comments</li> </ul> </section>  <section class="parameters"> <h3 class="toc-heading" id="parameters" tabindex="-1">Parameters </h3> <dl> <dt>$args</dt> <dd> <p class="desc"> <span class="type">(<span class="string">string</span>|<span class="array">array</span>)</span> <span class="required">(Optional)</span> <span class="description">Formatting options. <ul class="param-hash">
<li>
<b>'walker'</b><br><i><span class="type">(object)</span></i> Instance of a <a href="../../classes/walker/">Walker</a> class to list comments. Default null.</li> <li>
<b>'max_depth'</b><br><i><span class="type">(int)</span></i> The maximum comments depth. </li> <li>
<b>'style'</b><br><i><span class="type">(string)</span></i> The style of list ordering. Default 'ul'. Accepts 'ul', 'ol'.</li> <li>
<b>'callback'</b><br><i><span class="type">(string)</span></i> Callback function to use. Default null.</li> <li>
<b>'end-callback'</b><br><i><span class="type">(string)</span></i> Callback function to use at the end. Default null.</li> <li>
<b>'type'</b><br><i><span class="type">(string)</span></i> Type of comments to list. Default 'all'. Accepts 'all', 'comment', 'pingback', 'trackback', 'pings'.</li> <li>
<b>'page'</b><br><i><span class="type">(int)</span></i> Page ID to list comments for. </li> <li>
<b>'per_page'</b><br><i><span class="type">(int)</span></i> Number of comments to list per page. </li> <li>
<b>'avatar_size'</b><br><i><span class="type">(int)</span></i> Height and width dimensions of the avatar size. Default 32.</li> <li>
<b>'reverse_top_level'</b><br><i><span class="type">(bool)</span></i> Ordering of the listed comments. If true, will display newest comments first.</li> <li>
<b>'reverse_children'</b><br><i><span class="type">(bool)</span></i> Whether to reverse child comments in the list. Default null.</li> <li>
<b>'format'</b><br><i><span class="type">(string)</span></i> How to format the comments list. Default 'html5' if the theme supports it. Accepts 'html5', 'xhtml'.</li> <li>
<b>'short_ping'</b><br><i><span class="type">(bool)</span></i> Whether to output short pings. Default false.</li> <li>
<b>'echo'</b><br><i><span class="type">(bool)</span></i> Whether to echo the output or return it. Default true.</li> </ul> </span> </p> <p class="default">Default value: array()</p> </dd> <dt>$comments</dt> <dd> <p class="desc"> <span class="type">(<span class="array">array</span>)</span> <span class="required">(Optional)</span> <span class="description"> Array of <a href="../../classes/wp_comment/">WP_Comment</a> objects.</span> </p> <p class="default">Default value: null</p> </dd> </dl> </section>  <section class="source-content"> <h3 class="toc-heading" id="source" tabindex="-1">Source </h3> <p> File: <a href="https://developer.wordpress.org/reference/files/wp-includes/comment-template.php/" target="_blank">wp-includes/comment-template.php</a> </p> <pre class="source-code-container" data-language="php">function wp_list_comments( $args = array(), $comments = null ) {
	global $wp_query, $comment_alt, $comment_depth, $comment_thread_alt, $overridden_cpage, $in_comment_loop;

	$in_comment_loop = true;

	$comment_alt   = $comment_thread_alt = 0;
	$comment_depth = 1;

	$defaults = array(
		'walker'            =&gt; null,
		'max_depth'         =&gt; '',
		'style'             =&gt; 'ul',
		'callback'          =&gt; null,
		'end-callback'      =&gt; null,
		'type'              =&gt; 'all',
		'page'              =&gt; '',
		'per_page'          =&gt; '',
		'avatar_size'       =&gt; 32,
		'reverse_top_level' =&gt; null,
		'reverse_children'  =&gt; '',
		'format'            =&gt; current_theme_supports( 'html5', 'comment-list' ) ? 'html5' : 'xhtml',
		'short_ping'        =&gt; false,
		'echo'              =&gt; true,
	);

	$r = wp_parse_args( $args, $defaults );

	/**
	 * Filters the arguments used in retrieving the comment list.
	 *
	 * @since 4.0.0
	 *
	 * @see wp_list_comments()
	 *
	 * @param array $r An array of arguments for displaying comments.
	 */
	$r = apply_filters( 'wp_list_comments_args', $r );

	// Figure out what comments we'll be looping through ($_comments)
	if ( null !== $comments ) {
		$comments = (array) $comments;
		if ( empty( $comments ) ) {
			return;
		}
		if ( 'all' != $r['type'] ) {
			$comments_by_type = separate_comments( $comments );
			if ( empty( $comments_by_type[ $r['type'] ] ) ) {
				return;
			}
			$_comments = $comments_by_type[ $r['type'] ];
		} else {
			$_comments = $comments;
		}
	} else {
		/*
		 * If 'page' or 'per_page' has been passed, and does not match what's in $wp_query,
		 * perform a separate comment query and allow Walker_Comment to paginate.
		 */
		if ( $r['page'] || $r['per_page'] ) {
			$current_cpage = get_query_var( 'cpage' );
			if ( ! $current_cpage ) {
				$current_cpage = 'newest' === get_option( 'default_comments_page' ) ? 1 : $wp_query-&gt;max_num_comment_pages;
			}

			$current_per_page = get_query_var( 'comments_per_page' );
			if ( $r['page'] != $current_cpage || $r['per_page'] != $current_per_page ) {
				$comment_args = array(
					'post_id' =&gt; get_the_ID(),
					'orderby' =&gt; 'comment_date_gmt',
					'order'   =&gt; 'ASC',
					'status'  =&gt; 'approve',
				);

				if ( is_user_logged_in() ) {
					$comment_args['include_unapproved'] = get_current_user_id();
				} else {
					$unapproved_email = wp_get_unapproved_comment_author_email();

					if ( $unapproved_email ) {
						$comment_args['include_unapproved'] = array( $unapproved_email );
					}
				}

				$comments = get_comments( $comment_args );

				if ( 'all' != $r['type'] ) {
					$comments_by_type = separate_comments( $comments );
					if ( empty( $comments_by_type[ $r['type'] ] ) ) {
						return;
					}

					$_comments = $comments_by_type[ $r['type'] ];
				} else {
					$_comments = $comments;
				}
			}

			// Otherwise, fall back on the comments from `$wp_query-&gt;comments`.
		} else {
			if ( empty( $wp_query-&gt;comments ) ) {
				return;
			}
			if ( 'all' != $r['type'] ) {
				if ( empty( $wp_query-&gt;comments_by_type ) ) {
					$wp_query-&gt;comments_by_type = separate_comments( $wp_query-&gt;comments );
				}
				if ( empty( $wp_query-&gt;comments_by_type[ $r['type'] ] ) ) {
					return;
				}
				$_comments = $wp_query-&gt;comments_by_type[ $r['type'] ];
			} else {
				$_comments = $wp_query-&gt;comments;
			}

			if ( $wp_query-&gt;max_num_comment_pages ) {
				$default_comments_page = get_option( 'default_comments_page' );
				$cpage                 = get_query_var( 'cpage' );
				if ( 'newest' === $default_comments_page ) {
					$r['cpage'] = $cpage;

					/*
					* When first page shows oldest comments, post permalink is the same as
					* the comment permalink.
					*/
				} elseif ( $cpage == 1 ) {
					$r['cpage'] = '';
				} else {
					$r['cpage'] = $cpage;
				}

				$r['page']     = 0;
				$r['per_page'] = 0;
			}
		}
	}

	if ( '' === $r['per_page'] &amp;&amp; get_option( 'page_comments' ) ) {
		$r['per_page'] = get_query_var( 'comments_per_page' );
	}

	if ( empty( $r['per_page'] ) ) {
		$r['per_page'] = 0;
		$r['page']     = 0;
	}

	if ( '' === $r['max_depth'] ) {
		if ( get_option( 'thread_comments' ) ) {
			$r['max_depth'] = get_option( 'thread_comments_depth' );
		} else {
			$r['max_depth'] = -1;
		}
	}

	if ( '' === $r['page'] ) {
		if ( empty( $overridden_cpage ) ) {
			$r['page'] = get_query_var( 'cpage' );
		} else {
			$threaded  = ( -1 != $r['max_depth'] );
			$r['page'] = ( 'newest' == get_option( 'default_comments_page' ) ) ? get_comment_pages_count( $_comments, $r['per_page'], $threaded ) : 1;
			set_query_var( 'cpage', $r['page'] );
		}
	}
	// Validation check
	$r['page'] = intval( $r['page'] );
	if ( 0 == $r['page'] &amp;&amp; 0 != $r['per_page'] ) {
		$r['page'] = 1;
	}

	if ( null === $r['reverse_top_level'] ) {
		$r['reverse_top_level'] = ( 'desc' == get_option( 'comment_order' ) );
	}

	wp_queue_comments_for_comment_meta_lazyload( $_comments );

	if ( empty( $r['walker'] ) ) {
		$walker = new Walker_Comment;
	} else {
		$walker = $r['walker'];
	}

	$output = $walker-&gt;paged_walk( $_comments, $r['max_depth'], $r['page'], $r['per_page'], $r );

	$in_comment_loop = false;

	if ( $r['echo'] ) {
		echo $output;
	} else {
		return $output;
	}
}</pre>  </section>  <section class="changelog"> <h3 class="toc-heading" id="changelog" tabindex="-1">Changelog </h3> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.7.0/" alt="WordPress 2.7.0" target="_blank">2.7.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section>  <section class="related"> <h2 class="toc-heading" id="related" tabindex="-1">Related </h2> <article class="uses"> <h3 class="toc-heading" id="uses" tabindex="-1">Uses </h3> <table id="uses-table">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/comment.php:</span> <a href="../wp_get_unapproved_comment_author_email/">wp_get_unapproved_comment_author_email()</a> </td> <td class="related-desc"> <p>Get unapproved comment author’s email.</p> </td> </tr> <tr> <td> <span>wp-includes/comment.php:</span> <a href="../wp_queue_comments_for_comment_meta_lazyload/">wp_queue_comments_for_comment_meta_lazyload()</a> </td> <td class="related-desc"> <p>Queues comments for metadata lazy-loading.</p> </td> </tr> <tr> <td> <span>wp-includes/comment-template.php:</span> <a href="../../hooks/wp_list_comments_args/">wp_list_comments_args</a> </td> <td class="related-desc"> <p>Filters the arguments used in retrieving the comment list.</p> </td> </tr> <tr> <td> <span>wp-includes/theme.php:</span> <a href="../current_theme_supports/">current_theme_supports()</a> </td> <td class="related-desc"> <p>Checks a theme’s support for a given feature.</p> </td> </tr> <tr> <td> <span>wp-includes/pluggable.php:</span> <a href="../is_user_logged_in/">is_user_logged_in()</a> </td> <td class="related-desc"> <p>Determines whether the current visitor is a logged in user.</p> </td> </tr> <tr> <td> <span>wp-includes/query.php:</span> <a href="../get_query_var/">get_query_var()</a> </td> <td class="related-desc"> <p>Retrieve variable in the <a href="../../classes/wp_query/">WP_Query</a> class.</p> </td> </tr> <tr> <td> <span>wp-includes/query.php:</span> <a href="../set_query_var/">set_query_var()</a> </td> <td class="related-desc"> <p>Set query variable.</p> </td> </tr> <tr> <td> <span>wp-includes/functions.php:</span> <a href="../wp_parse_args/">wp_parse_args()</a> </td> <td class="related-desc"> <p>Merge user defined arguments into defaults array.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-walker.php:</span> <a href="../../classes/walker/paged_walk/">Walker::paged_walk()</a> </td> <td class="related-desc"> <p>paged_walk() – produce a page of nested elements</p> </td> </tr> <tr> <td> <span>wp-includes/plugin.php:</span> <a href="../apply_filters/">apply_filters()</a> </td> <td class="related-desc"> <p>Call the functions added to a filter hook.</p> </td> </tr> <tr> <td> <span>wp-includes/option.php:</span> <a href="../get_option/">get_option()</a> </td> <td class="related-desc"> <p>Retrieves an option value based on an option name.</p> </td> </tr> <tr> <td> <span>wp-includes/user.php:</span> <a href="../get_current_user_id/">get_current_user_id()</a> </td> <td class="related-desc"> <p>Get the current user’s ID</p> </td> </tr> <tr> <td> <span>wp-includes/post-template.php:</span> <a href="../get_the_id/">get_the_ID()</a> </td> <td class="related-desc"> <p>Retrieve the ID of the current item in the WordPress Loop.</p> </td> </tr> <tr> <td> <span>wp-includes/comment.php:</span> <a href="../separate_comments/">separate_comments()</a> </td> <td class="related-desc"> <p>Separates an array of comments into an array keyed by comment_type.</p> </td> </tr> <tr> <td> <span>wp-includes/comment.php:</span> <a href="../get_comment_pages_count/">get_comment_pages_count()</a> </td> <td class="related-desc"> <p>Calculate the total number of comment pages.</p> </td> </tr> <tr> <td> <span>wp-includes/comment.php:</span> <a href="../get_comments/">get_comments()</a> </td> <td class="related-desc"> <p>Retrieve a list of comments.</p> </td> </tr> </tbody>

</table>   </article> </section>   </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2003–2019 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/functions/wp_list_comments" class="_attribution-link" target="_blank">https://developer.wordpress.org/reference/functions/wp_list_comments</a>
  </p>
</div>

				
			</div>
			<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
</amp-auto-ads>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
