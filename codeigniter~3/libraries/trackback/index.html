
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Trackback Class - CodeIgniter 3 - W3cubDocs</title>
  
  <meta name="description" content=" The Trackback Class provides functions that enable you to send and receive Trackback data. ">
  <meta name="keywords" content="trackback, class, -, codeigniter, codeigniter~3">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/codeigniter~3/libraries/trackback/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" integrity="sha256-6/DH7X+2hvUPElJfGsvzm+tgIpmM9zjbYxnpsr6gR1A=" crossorigin="anonymous" href="/assets/application-ebf0c7ed7fb686f50f12525f1acbf39beb6022998cf738db6319e9b2bea04750.css">
  <script type="text/javascript" src="/assets/application-db285287b40ed28fac520fcfd75d7d874692b647b5b5e05968c741dda5de4148.js" integrity="sha256-2yhSh7QO0o+sUg/P1119h0aStke1teBZaMdB3aXeQUg=" crossorigin="anonymous"></script>
  <script src="/json/codeigniter~3.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2572770204602497",
            enable_page_level_ads: true
        });
  </script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/codeigniter~3/" class="_nav-link" title="" style="margin-left:0;">CodeIgniter 3</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx">
				
				
<h1 id="trackback-class">Trackback Class</h1> <p>The Trackback Class provides functions that enable you to send and receive Trackback data.</p> <p>If you are not familiar with Trackbacks you’ll find more information <a class="reference external" href="http://en.wikipedia.org/wiki/Trackback" target="_blank">here</a>.</p>  <ul class="simple"> <li>
<a class="reference internal" href="#using-the-trackback-class" id="id1">Using the Trackback Class</a><ul> <li><a class="reference internal" href="#initializing-the-class" id="id2">Initializing the Class</a></li> <li><a class="reference internal" href="#sending-trackbacks" id="id3">Sending Trackbacks</a></li> <li><a class="reference internal" href="#receiving-trackbacks" id="id4">Receiving Trackbacks</a></li> <li><a class="reference internal" href="#your-ping-url" id="id5">Your Ping URL</a></li> <li><a class="reference internal" href="#creating-a-trackback-table" id="id6">Creating a Trackback Table</a></li> <li>
<a class="reference internal" href="#processing-a-trackback" id="id7">Processing a Trackback</a><ul> <li><a class="reference internal" href="#notes" id="id8">Notes:</a></li> </ul> </li> </ul> </li> <li><a class="reference internal" href="#class-reference" id="id9">Class Reference</a></li> </ul>   <h2 id="using-the-trackback-class">Using the Trackback Class</h2>  <h3 id="initializing-the-class">Initializing the Class</h3> <p>Like most other classes in CodeIgniter, the Trackback class is initialized in your controller using the <code>$this-&gt;load-&gt;library()</code> method:</p> <pre data-language="php">$this-&gt;load-&gt;library('trackback');
</pre> <p>Once loaded, the Trackback library object will be available using:</p> <pre data-language="php">$this-&gt;trackback
</pre>   <h3 id="sending-trackbacks">Sending Trackbacks</h3> <p>A Trackback can be sent from any of your controller functions using code similar to this example:</p> <pre data-language="php">$this-&gt;load-&gt;library('trackback');

$tb_data = array(
        'ping_url'  =&gt; 'http://example.com/trackback/456',
        'url'       =&gt; 'http://www.my-example.com/blog/entry/123',
        'title'     =&gt; 'The Title of My Entry',
        'excerpt'   =&gt; 'The entry content.',
        'blog_name' =&gt; 'My Blog Name',
        'charset'   =&gt; 'utf-8'
);

if ( ! $this-&gt;trackback-&gt;send($tb_data))
{
        echo $this-&gt;trackback-&gt;display_errors();
}
else
{
        echo 'Trackback was sent!';
}
</pre> <p>Description of array data:</p> <ul class="simple"> <li>
<strong>ping_url</strong> - The URL of the site you are sending the Trackback to. You can send Trackbacks to multiple URLs by separating each URL with a comma.</li> <li>
<strong>url</strong> - The URL to YOUR site where the weblog entry can be seen.</li> <li>
<strong>title</strong> - The title of your weblog entry.</li> <li>
<strong>excerpt</strong> - The content of your weblog entry.</li> <li>
<strong>blog_name</strong> - The name of your weblog.</li> <li>
<strong>charset</strong> - The character encoding your weblog is written in. If omitted, UTF-8 will be used.</li> </ul> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">The Trackback class will automatically send only the first 500 characters of your entry. It will also strip all HTML.</p> </div> <p>The Trackback sending method returns TRUE/FALSE (boolean) on success or failure. If it fails, you can retrieve the error message using:</p> <pre data-language="php">$this-&gt;trackback-&gt;display_errors();
</pre>   <h3 id="receiving-trackbacks">Receiving Trackbacks</h3> <p>Before you can receive Trackbacks you must create a weblog. If you don’t have a blog yet there’s no point in continuing.</p> <p>Receiving Trackbacks is a little more complex than sending them, only because you will need a database table in which to store them, and you will need to validate the incoming trackback data. You are encouraged to implement a thorough validation process to guard against spam and duplicate data. You may also want to limit the number of Trackbacks you allow from a particular IP within a given span of time to further curtail spam. The process of receiving a Trackback is quite simple; the validation is what takes most of the effort.</p>   <h3 id="your-ping-url">Your Ping URL</h3> <p>In order to accept Trackbacks you must display a Trackback URL next to each one of your weblog entries. This will be the URL that people will use to send you Trackbacks (we will refer to this as your “Ping URL”).</p> <p>Your Ping URL must point to a controller function where your Trackback receiving code is located, and the URL must contain the ID number for each particular entry, so that when the Trackback is received you’ll be able to associate it with a particular entry.</p> <p>For example, if your controller class is called Trackback, and the receiving function is called receive, your Ping URLs will look something like this:</p> <pre data-language="php">http://example.com/index.php/trackback/receive/entry_id
</pre> <p>Where entry_id represents the individual ID number for each of your entries.</p>   <h3 id="creating-a-trackback-table">Creating a Trackback Table</h3> <p>Before you can receive Trackbacks you must create a table in which to store them. Here is a basic prototype for such a table:</p> <pre data-language="php">CREATE TABLE trackbacks (
        tb_id int(10) unsigned NOT NULL auto_increment,
        entry_id int(10) unsigned NOT NULL default 0,
        url varchar(200) NOT NULL,
        title varchar(100) NOT NULL,
        excerpt text NOT NULL,
        blog_name varchar(100) NOT NULL,
        tb_date int(10) NOT NULL,
        ip_address varchar(45) NOT NULL,
        PRIMARY KEY `tb_id` (`tb_id`),
        KEY `entry_id` (`entry_id`)
);
</pre> <p>The Trackback specification only requires four pieces of information to be sent in a Trackback (url, title, excerpt, blog_name), but to make the data more useful we’ve added a few more fields in the above table schema (date, IP address, etc.).</p>   <h3 id="processing-a-trackback">Processing a Trackback</h3> <p>Here is an example showing how you will receive and process a Trackback. The following code is intended for use within the controller function where you expect to receive Trackbacks.:</p> <pre data-language="php">$this-&gt;load-&gt;library('trackback');
$this-&gt;load-&gt;database();

if ($this-&gt;uri-&gt;segment(3) == FALSE)
{
        $this-&gt;trackback-&gt;send_error('Unable to determine the entry ID');
}

if ( ! $this-&gt;trackback-&gt;receive())
{
        $this-&gt;trackback-&gt;send_error('The Trackback did not contain valid data');
}

$data = array(
        'tb_id'      =&gt; '',
        'entry_id'   =&gt; $this-&gt;uri-&gt;segment(3),
        'url'        =&gt; $this-&gt;trackback-&gt;data('url'),
        'title'      =&gt; $this-&gt;trackback-&gt;data('title'),
        'excerpt'    =&gt; $this-&gt;trackback-&gt;data('excerpt'),
        'blog_name'  =&gt; $this-&gt;trackback-&gt;data('blog_name'),
        'tb_date'    =&gt; time(),
        'ip_address' =&gt; $this-&gt;input-&gt;ip_address()
);

$sql = $this-&gt;db-&gt;insert_string('trackbacks', $data);
$this-&gt;db-&gt;query($sql);

$this-&gt;trackback-&gt;send_success();
</pre>  <h4 id="notes">Notes:</h4> <p>The entry ID number is expected in the third segment of your URL. This is based on the URI example we gave earlier:</p> <pre data-language="php">http://example.com/index.php/trackback/receive/entry_id
</pre> <p>Notice the entry_id is in the third URI segment, which you can retrieve using:</p> <pre data-language="php">$this-&gt;uri-&gt;segment(3);
</pre> <p>In our Trackback receiving code above, if the third segment is missing, we will issue an error. Without a valid entry ID, there’s no reason to continue.</p> <p>The $this-&gt;trackback-&gt;receive() function is simply a validation function that looks at the incoming data and makes sure it contains the four pieces of data that are required (url, title, excerpt, blog_name). It returns TRUE on success and FALSE on failure. If it fails you will issue an error message.</p> <p>The incoming Trackback data can be retrieved using this function:</p> <pre data-language="php">$this-&gt;trackback-&gt;data('item')
</pre> <p>Where item represents one of these four pieces of info: url, title, excerpt, or blog_name</p> <p>If the Trackback data is successfully received, you will issue a success message using:</p> <pre data-language="php">$this-&gt;trackback-&gt;send_success();
</pre> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">The above code contains no data validation, which you are encouraged to add.</p> </div>     <h2 id="class-reference">Class Reference</h2> <dl class="class"> <dt id="CI_Trackback">
<code>class CI_Trackback</code> </dt> <dd>
<dl class="attribute"> <dt>
<code>$data = array('url' =&gt; '', 'title' =&gt; '', 'excerpt' =&gt; '', 'blog_name' =&gt; '', 'charset' =&gt; '')</code> </dt> <dd>
<p>Trackback data array.</p> </dd>
</dl> <dl class="attribute"> <dt>
<code>$convert_ascii = TRUE</code> </dt> <dd>
<p>Whether to convert high ASCII and MS Word characters to HTML entities.</p> </dd>
</dl> <dl class="method"> <dt id="CI_Trackback::send">
<code>send($tb_data)</code> </dt> <dd>
<table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>$tb_data</strong> (<em>array</em>) – Trackback data</li> </ul> </td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first">TRUE on success, FALSE on failure</p> </td> </tr> <tr>
<th class="field-name">Return type:</th>
<td class="field-body">
<p class="first last">bool</p> </td> </tr>  </table> <p>Send trackback.</p> </dd>
</dl> <dl class="method"> <dt id="CI_Trackback::receive">
<code>receive()</code> </dt> <dd>
<table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Returns:</th>
<td class="field-body">TRUE on success, FALSE on failure</td> </tr> <tr>
<th class="field-name">Return type:</th>
<td class="field-body">bool</td> </tr>  </table> <p>This method simply validates the incoming TB data, returning TRUE on success and FALSE on failure. If the data is valid it is set to the <code>$this-&gt;data</code> array so that it can be inserted into a database.</p> </dd>
</dl> <dl class="method"> <dt id="CI_Trackback::send_error">
<code>send_error([$message = 'Incomplete information'])</code> </dt> <dd>
<table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>$message</strong> (<em>string</em>) – Error message</li> </ul> </td> </tr> <tr>
<th class="field-name">Return type:</th>
<td class="field-body">
<p class="first last">void</p> </td> </tr>  </table> <p>Responses to a trackback request with an error message.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">This method will terminate script execution.</p> </div> </dd>
</dl> <dl class="method"> <dt id="CI_Trackback::send_success">
<code>send_success()</code> </dt> <dd>
<table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Return type:</th>
<td class="field-body">void</td> </tr>  </table> <p>Responses to a trackback request with a success message.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">This method will terminate script execution.</p> </div> </dd>
</dl> <dl class="method"> <dt id="CI_Trackback::data">
<code>data($item)</code> </dt> <dd>
<table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>$item</strong> (<em>string</em>) – Data key</li> </ul> </td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first">Data value or empty string if not found</p> </td> </tr> <tr>
<th class="field-name">Return type:</th>
<td class="field-body">
<p class="first last">string</p> </td> </tr>  </table> <p>Returns a single item from the response data array.</p> </dd>
</dl> <dl class="method"> <dt id="CI_Trackback::process">
<code>process($url, $data)</code> </dt> <dd>
<table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>$url</strong> (<em>string</em>) – Target url</li> <li>
<strong>$data</strong> (<em>string</em>) – Raw POST data</li> </ul> </td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first">TRUE on success, FALSE on failure</p> </td> </tr> <tr>
<th class="field-name">Return type:</th>
<td class="field-body">
<p class="first last">bool</p> </td> </tr>  </table> <p>Opens a socket connection and passes the data to the server, returning TRUE on success and FALSE on failure.</p> </dd>
</dl> <dl class="method"> <dt id="CI_Trackback::extract_urls">
<code>extract_urls($urls)</code> </dt> <dd>
<table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>$urls</strong> (<em>string</em>) – Comma-separated URL list</li> </ul> </td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first">Array of URLs</p> </td> </tr> <tr>
<th class="field-name">Return type:</th>
<td class="field-body">
<p class="first last">array</p> </td> </tr>  </table> <p>This method lets multiple trackbacks to be sent. It takes a string of URLs (separated by comma or space) and puts each URL into an array.</p> </dd>
</dl> <dl class="method"> <dt id="CI_Trackback::validate_url">
<code>validate_url(&amp;$url)</code> </dt> <dd>
<table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>$url</strong> (<em>string</em>) – Trackback URL</li> </ul> </td> </tr> <tr>
<th class="field-name">Return type:</th>
<td class="field-body">
<p class="first last">void</p> </td> </tr>  </table> <p>Simply adds the <em>http://</em> prefix it it’s not already present in the URL.</p> </dd>
</dl> <dl class="method"> <dt id="CI_Trackback::get_id">
<code>get_id($url)</code> </dt> <dd>
<table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>$url</strong> (<em>string</em>) – Trackback URL</li> </ul> </td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first">URL ID or FALSE on failure</p> </td> </tr> <tr>
<th class="field-name">Return type:</th>
<td class="field-body">
<p class="first last">string</p> </td> </tr>  </table> <p>Find and return a trackback URL’s ID or FALSE on failure.</p> </dd>
</dl> <dl class="method"> <dt id="CI_Trackback::convert_xml">
<code>convert_xml($str)</code> </dt> <dd>
<table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>$str</strong> (<em>string</em>) – Input string</li> </ul> </td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first">Converted string</p> </td> </tr> <tr>
<th class="field-name">Return type:</th>
<td class="field-body">
<p class="first last">string</p> </td> </tr>  </table> <p>Converts reserved XML characters to entities.</p> </dd>
</dl> <dl class="method"> <dt id="CI_Trackback::limit_characters">
<code>limit_characters($str[, $n = 500[, $end_char = '&amp;#8230;']])</code> </dt> <dd>
<table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>$str</strong> (<em>string</em>) – Input string</li> <li>
<strong>$n</strong> (<em>int</em>) – Max characters number</li> <li>
<strong>$end_char</strong> (<em>string</em>) – Character to put at end of string</li> </ul> </td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first">Shortened string</p> </td> </tr> <tr>
<th class="field-name">Return type:</th>
<td class="field-body">
<p class="first last">string</p> </td> </tr>  </table> <p>Limits the string based on the character count. Will preserve complete words.</p> </dd>
</dl> <dl class="method"> <dt id="CI_Trackback::convert_ascii">
<code>convert_ascii($str)</code> </dt> <dd>
<table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>$str</strong> (<em>string</em>) – Input string</li> </ul> </td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first">Converted string</p> </td> </tr> <tr>
<th class="field-name">Return type:</th>
<td class="field-body">
<p class="first last">string</p> </td> </tr>  </table> <p>Converts high ASCII text and MS Word special characterss to HTML entities.</p> </dd>
</dl> <dl class="method"> <dt id="CI_Trackback::set_error">
<code>set_error($msg)</code> </dt> <dd>
<table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>$msg</strong> (<em>string</em>) – Error message</li> </ul> </td> </tr> <tr>
<th class="field-name">Return type:</th>
<td class="field-body">
<p class="first last">void</p> </td> </tr>  </table> <p>Set an log an error message.</p> </dd>
</dl> <dl class="method"> <dt id="CI_Trackback::display_errors">
<code>display_errors([$open = '&lt;p&gt;'[, $close = '&lt;/p&gt;']])</code> </dt> <dd>
<table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>$open</strong> (<em>string</em>) – Open tag</li> <li>
<strong>$close</strong> (<em>string</em>) – Close tag</li> </ul> </td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first">HTML formatted error messages</p> </td> </tr> <tr>
<th class="field-name">Return type:</th>
<td class="field-body">
<p class="first last">string</p> </td> </tr>  </table> <p>Returns error messages formatted in HTML or an empty string if there are no errors.</p> </dd>
</dl> </dd>
</dl>
<div class="_attribution">
  <p class="_attribution-p">
    © 2014–2018 British Columbia Institute of Technology<br>Licensed under the MIT License.<br>
    <a href="https://www.codeigniter.com/user_guide/libraries/trackback.html" class="_attribution-link" target="_blank">https://www.codeigniter.com/user_guide/libraries/trackback.html</a>
  </p>
</div>

				
			</div>
			<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
</amp-auto-ads>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
