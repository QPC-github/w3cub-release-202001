
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Encrypt Class - CodeIgniter 3 - W3cubDocs</title>
  
  <meta name="description" content=" The Encrypt Class provides two-way data encryption. It encrypted using the Mcrypt PHP extension, which is required for the Encrypt Class to run. ">
  <meta name="keywords" content="encrypt, class, -, codeigniter, codeigniter~3">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/codeigniter~3/libraries/encrypt/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" integrity="sha256-6/DH7X+2hvUPElJfGsvzm+tgIpmM9zjbYxnpsr6gR1A=" crossorigin="anonymous" href="/assets/application-ebf0c7ed7fb686f50f12525f1acbf39beb6022998cf738db6319e9b2bea04750.css">
  <script type="text/javascript" src="/assets/application-db285287b40ed28fac520fcfd75d7d874692b647b5b5e05968c741dda5de4148.js" integrity="sha256-2yhSh7QO0o+sUg/P1119h0aStke1teBZaMdB3aXeQUg=" crossorigin="anonymous"></script>
  <script src="/json/codeigniter~3.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2572770204602497",
            enable_page_level_ads: true
        });
  </script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/codeigniter~3/" class="_nav-link" title="" style="margin-left:0;">CodeIgniter 3</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx">
				
				
<h1 id="encrypt-class">Encrypt Class</h1> <p>The Encrypt Class provides two-way data encryption. It encrypted using the Mcrypt PHP extension, which is required for the Encrypt Class to run.</p> <div class="admonition important"> <p class="first admonition-title">Important</p> <p class="last">This library has been DEPRECATED and is only kept for backwards compatibility. Please use the new <a class="reference internal" href="../encryption/"><span class="doc">Encryption Library</span></a>.</p> </div>  <ul class="simple"> <li>
<a class="reference internal" href="#using-the-encrypt-library" id="id1">Using the Encrypt Library</a><ul> <li><a class="reference internal" href="#setting-your-key" id="id2">Setting your Key</a></li> <li><a class="reference internal" href="#message-length" id="id3">Message Length</a></li> <li><a class="reference internal" href="#initializing-the-class" id="id4">Initializing the Class</a></li> </ul> </li> <li><a class="reference internal" href="#class-reference" id="id5">Class Reference</a></li> </ul>   <h2 id="using-the-encrypt-library">Using the Encrypt Library</h2>  <h3 id="setting-your-key">Setting your Key</h3> <p>A <em>key</em> is a piece of information that controls the cryptographic process and permits an encrypted string to be decoded. In fact, the key you chose will provide the <strong>only</strong> means to decode data that was encrypted with that key, so not only must you choose the key carefully, you must never change it if you intend use it for persistent data.</p> <p>It goes without saying that you should guard your key carefully. Should someone gain access to your key, the data will be easily decoded. If your server is not totally under your control it’s impossible to ensure key security so you may want to think carefully before using it for anything that requires high security, like storing credit card numbers.</p> <p>To take maximum advantage of the encryption algorithm, your key should be 32 characters in length (256 bits). The key should be as random a string as you can concoct, with numbers and uppercase and lowercase letters. Your key should <strong>not</strong> be a simple text string. In order to be cryptographically secure it needs to be as random as possible.</p> <p>Your key can be either stored in your <strong>application/config/config.php</strong>, or you can design your own storage mechanism and pass the key dynamically when encoding/decoding.</p> <p>To save your key to your <strong>application/config/config.php</strong>, open the file and set:</p> <pre data-language="php">$config['encryption_key'] = "YOUR KEY";
</pre>   <h3 id="message-length">Message Length</h3> <p>It’s important for you to know that the encoded messages the encryption function generates will be approximately 2.6 times longer than the original message. For example, if you encrypt the string “my super secret data”, which is 21 characters in length, you’ll end up with an encoded string that is roughly 55 characters (we say “roughly” because the encoded string length increments in 64 bit clusters, so it’s not exactly linear). Keep this information in mind when selecting your data storage mechanism. Cookies, for example, can only hold 4K of information.</p>   <h3 id="initializing-the-class">Initializing the Class</h3> <p>Like most other classes in CodeIgniter, the Encrypt class is initialized in your controller using the <code>$this-&gt;load-&gt;library()</code> method:</p> <pre data-language="php">$this-&gt;load-&gt;library('encrypt');
</pre> <p>Once loaded, the Encrypt library object will be available using:</p> <pre data-language="php">$this-&gt;encrypt
</pre>    <h2 id="class-reference">Class Reference</h2> <dl class="class"> <dt id="CI_Encrypt">
<code>class CI_Encrypt</code> </dt> <dd>
<dl class="method"> <dt id="CI_Encrypt::encode">
<code>encode($string[, $key = ''])</code> </dt> <dd>
<table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>$string</strong> (<em>string</em>) – Data to encrypt</li> <li>
<strong>$key</strong> (<em>string</em>) – Encryption key</li> </ul> </td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first">Encrypted string</p> </td> </tr> <tr>
<th class="field-name">Return type:</th>
<td class="field-body">
<p class="first last">string</p> </td> </tr>  </table> <p>Performs the data encryption and returns it as a string. Example:</p> <pre data-language="php">$msg = 'My secret message';

$encrypted_string = $this-&gt;encrypt-&gt;encode($msg);
</pre> <p>You can optionally pass your encryption key via the second parameter if you don’t want to use the one in your config file:</p> <pre data-language="php">$msg = 'My secret message';
$key = 'super-secret-key';

$encrypted_string = $this-&gt;encrypt-&gt;encode($msg, $key);
</pre> </dd>
</dl> <dl class="method"> <dt id="CI_Encrypt::decode">
<code>decode($string[, $key = ''])</code> </dt> <dd>
<table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>$string</strong> (<em>string</em>) – String to decrypt</li> <li>
<strong>$key</strong> (<em>string</em>) – Encryption key</li> </ul> </td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first">Plain-text string</p> </td> </tr> <tr>
<th class="field-name">Return type:</th>
<td class="field-body">
<p class="first last">string</p> </td> </tr>  </table> <p>Decrypts an encoded string. Example:</p> <pre data-language="php">$encrypted_string = 'APANtByIGI1BpVXZTJgcsAG8GZl8pdwwa84';

$plaintext_string = $this-&gt;encrypt-&gt;decode($encrypted_string);
</pre> <p>You can optionally pass your encryption key via the second parameter if you don’t want to use the one in your config file:</p> <pre data-language="php">$msg = 'My secret message';
$key = 'super-secret-key';

$encrypted_string = $this-&gt;encrypt-&gt;decode($msg, $key);
</pre> </dd>
</dl> <dl class="method"> <dt id="CI_Encrypt::set_cipher">
<code>set_cipher($cipher)</code> </dt> <dd>
<table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>$cipher</strong> (<em>int</em>) – Valid PHP MCrypt cypher constant</li> </ul> </td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first">CI_Encrypt instance (method chaining)</p> </td> </tr> <tr>
<th class="field-name">Return type:</th>
<td class="field-body">
<p class="first last">CI_Encrypt</p> </td> </tr>  </table> <p>Permits you to set an Mcrypt cipher. By default it uses <code>MCRYPT_RIJNDAEL_256</code>. Example:</p> <pre data-language="php">$this-&gt;encrypt-&gt;set_cipher(MCRYPT_BLOWFISH);
</pre> <p>Please visit php.net for a list of <a class="reference external" href="http://php.net/mcrypt" target="_blank">available ciphers</a>.</p> <p>If you’d like to manually test whether your server supports MCrypt you can use:</p> <pre data-language="php">echo extension_loaded('mcrypt') ? 'Yup' : 'Nope';
</pre> </dd>
</dl> <dl class="method"> <dt id="CI_Encrypt::set_mode">
<code>set_mode($mode)</code> </dt> <dd>
<table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>$mode</strong> (<em>int</em>) – Valid PHP MCrypt mode constant</li> </ul> </td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first">CI_Encrypt instance (method chaining)</p> </td> </tr> <tr>
<th class="field-name">Return type:</th>
<td class="field-body">
<p class="first last">CI_Encrypt</p> </td> </tr>  </table> <p>Permits you to set an Mcrypt mode. By default it uses <strong>MCRYPT_MODE_CBC</strong>. Example:</p> <pre data-language="php">$this-&gt;encrypt-&gt;set_mode(MCRYPT_MODE_CFB);
</pre> <p>Please visit php.net for a list of <a class="reference external" href="http://php.net/mcrypt" target="_blank">available modes</a>.</p> </dd>
</dl> <dl class="method"> <dt id="CI_Encrypt::encode_from_legacy">
<code>encode_from_legacy($string[, $legacy_mode = MCRYPT_MODE_ECB[, $key = '']])</code> </dt> <dd>
<table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>$string</strong> (<em>string</em>) – String to encrypt</li> <li>
<strong>$legacy_mode</strong> (<em>int</em>) – Valid PHP MCrypt cipher constant</li> <li>
<strong>$key</strong> (<em>string</em>) – Encryption key</li> </ul> </td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first">Newly encrypted string</p> </td> </tr> <tr>
<th class="field-name">Return type:</th>
<td class="field-body">
<p class="first last">string</p> </td> </tr>  </table> <p>Enables you to re-encode data that was originally encrypted with CodeIgniter 1.x to be compatible with the Encrypt library in CodeIgniter 2.x. It is only necessary to use this method if you have encrypted data stored permanently such as in a file or database and are on a server that supports Mcrypt. “Light” use encryption such as encrypted session data or transitory encrypted flashdata require no intervention on your part. However, existing encrypted Sessions will be destroyed since data encrypted prior to 2.x will not be decoded.</p> <div class="admonition important"> <p class="first admonition-title">Important</p> <p class="last"><strong>Why only a method to re-encode the data instead of maintaining legacy methods for both encoding and decoding?</strong> The algorithms in the Encrypt library have improved in CodeIgniter 2.x both for performance and security, and we do not wish to encourage continued use of the older methods. You can of course extend the Encryption library if you wish and replace the new methods with the old and retain seamless compatibility with CodeIgniter 1.x encrypted data, but this a decision that a developer should make cautiously and deliberately, if at all.</p> </div> <pre data-language="php">$new_data = $this-&gt;encrypt-&gt;encode_from_legacy($old_encrypted_string);
</pre> <table class="docutils">  <thead valign="bottom"> <tr>
<th class="head">Parameter</th> <th class="head">Default</th> <th class="head">Description</th> </tr> </thead>  <tr>
<td><strong>$orig_data</strong></td> <td>n/a</td> <td>The original encrypted data from CodeIgniter 1.x’s Encryption library</td> </tr> <tr>
<td><strong>$legacy_mode</strong></td> <td>MCRYPT_MODE_ECB</td> <td>The Mcrypt mode that was used to generate the original encrypted data. CodeIgniter 1.x’s default was MCRYPT_MODE_ECB, and it will assume that to be the case unless overridden by this parameter.</td> </tr> <tr>
<td><strong>$key</strong></td> <td>n/a</td> <td>The encryption key. This it typically specified in your config file as outlined above.</td> </tr>  </table> </dd>
</dl> </dd>
</dl>
<div class="_attribution">
  <p class="_attribution-p">
    © 2014–2018 British Columbia Institute of Technology<br>Licensed under the MIT License.<br>
    <a href="https://www.codeigniter.com/user_guide/libraries/encrypt.html" class="_attribution-link" target="_blank">https://www.codeigniter.com/user_guide/libraries/encrypt.html</a>
  </p>
</div>

				
			</div>
			<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
</amp-auto-ads>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
