
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>RulesChecker (Class) - CakePHP 3.8 - W3cubDocs</title>
  
  <meta name="description" content=" ORM flavoured rules checker. ">
  <meta name="keywords" content="class, ruleschecker, -, cakephp, cakephp~3.8">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/cakephp~3.8/class-cake.orm.ruleschecker/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" integrity="sha256-6/DH7X+2hvUPElJfGsvzm+tgIpmM9zjbYxnpsr6gR1A=" crossorigin="anonymous" href="/assets/application-ebf0c7ed7fb686f50f12525f1acbf39beb6022998cf738db6319e9b2bea04750.css">
  <script type="text/javascript" src="/assets/application-db285287b40ed28fac520fcfd75d7d874692b647b5b5e05968c741dda5de4148.js" integrity="sha256-2yhSh7QO0o+sUg/P1119h0aStke1teBZaMdB3aXeQUg=" crossorigin="anonymous"></script>
  <script src="/json/cakephp~3.8.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2572770204602497",
            enable_page_level_ads: true
        });
  </script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cakephp~3.8/" class="_nav-link" title="" style="margin-left:0;">CakePHP 3.8</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _cakephp">
				
				
<h1>Class RulesChecker</h1>  <p>ORM flavoured rules checker.</p> <p>Adds ORM related features to the RulesChecker class.</p>  <dl class="tree"> <dd style="padding-left:0px"> <a href="../class-cake.datasource.ruleschecker/"><span>Cake\Datasource\RulesChecker</span></a> </dd> <dd style="padding-left:30px"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAOAQMAAADKRNSsAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFR3BMAAAAnyqEUQAAAAF0Uk5TAEDm2GYAAAATSURBVAjXY2BgYHDAi+o/MIABAEfyA/AA/BSgAAAAAElFTkSuQmCC" alt="Extended by"> <b><span>Cake\ORM\RulesChecker</span></b> </dd> </dl> <div class="info"> <b>Namespace:</b> <a href="../namespace-cake/">Cake</a>\<a href="../namespace-cake.orm/">ORM</a><br> <b>See:</b> <code><a href="../class-cake.datasource.ruleschecker/">Cake\Datasource\RulesChecker</a></code><br> <b>Location:</b> <a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.RulesChecker.html#22-142" title="Go to source code" target="_blank">ORM/RulesChecker.php</a><br> </div>  <h2>Inherited Constants</h2> <ul class="member-summary inherited"> <li> <code><a href="../class-cake.datasource.ruleschecker/#CREATE">CREATE</a></code>, <code><a href="../class-cake.datasource.ruleschecker/#DELETE">DELETE</a></code>, <code><a href="../class-cake.datasource.ruleschecker/#UPDATE">UPDATE</a></code> </li> </ul>   <h2>Inherited Properties</h2> <ul class="member-summary used"> <li> <code><a href="../class-cake.datasource.ruleschecker/#%24_createRules">_createRules</a></code>, <code><a href="../class-cake.datasource.ruleschecker/#%24_deleteRules">_deleteRules</a></code>, <code><a href="../class-cake.datasource.ruleschecker/#%24_options">_options</a></code>, <code><a href="../class-cake.datasource.ruleschecker/#%24_rules">_rules</a></code>, <code><a href="../class-cake.datasource.ruleschecker/#%24_updateRules">_updateRules</a></code>, <code><a href="../class-cake.datasource.ruleschecker/#%24_useI18n">_useI18n</a></code> </li> </ul>   <h2>Method Summary</h2> <ul class="member-summary"> <li class="clearfix"> <div> <a href="../class-cake.orm.ruleschecker/#_existsIn">existsIn()</a> <span class="label">public</span> </div>  <p>Returns a callable that can be used as a rule for checking that the values extracted from the entity to check exist as the primary key in another table.</p>  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.ruleschecker/#_isUnique">isUnique()</a> <span class="label">public</span> </div>  <p>Returns a callable that can be used as a rule for checking the uniqueness of a value in the table.</p>  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.ruleschecker/#_validCount">validCount()</a> <span class="label">public</span> </div>  Validates the count of associated records.  </li> </ul>   <h2>Method Detail</h2> <div class="method-detail">   <h3 class="method-name" id="_existsIn"> <span class="name">existsIn()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.RulesChecker.html#68-113" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">existsIn( string|array $field , object|string $table , string|array|null $message = null )</pre>  <p>Returns a callable that can be used as a rule for checking that the values extracted from the entity to check exist as the primary key in another table.</p> <p>This is useful for enforcing foreign key integrity checks.</p> <h3>Example:</h3> <pre data-language="php">$rules-&gt;add($rules-&gt;existsIn('author_id', 'Authors', 'Invalid Author'));

$rules-&gt;add($rules-&gt;existsIn('site_id', new SitesTable(), 'Invalid Site'));</pre> <p>Available $options are error 'message' and 'allowNullableNulls' flag. 'message' sets a custom error message. Set 'allowNullableNulls' to true to accept composite foreign keys where one or more nullable columns are null.</p> <h4>Parameters</h4>  <dl> <dt> string|array <code>$field</code> </dt> <dd><p>The field or list of fields to check for existence by primary key lookup in the other table.</p></dd> <dt> object|string <code>$table</code> </dt> <dd>The table name where the fields existence will be checked.</dd> <dt> string|array|null <code>$message</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd><p>The error message to show in case the rule does not pass. Can also be an array of options. When an array, the 'message' key can be used to provide a message.</p></dd> </dl>  <h4>Returns</h4>  callable<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_isUnique"> <span class="name">isUnique()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.RulesChecker.html#32-66" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">isUnique( array $fields , string|array|null $message = null )</pre>  <p>Returns a callable that can be used as a rule for checking the uniqueness of a value in the table.</p> <h3>Example:</h3> <pre data-language="php">$rules-&gt;add($rules-&gt;isUnique(['email'], 'The email should be unique'));</pre> <h4>Parameters</h4>  <dl> <dt> array <code>$fields</code> </dt> <dd>The list of fields to check for uniqueness.</dd> <dt> string|array|null <code>$message</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd><p>The error message to show in case the rule does not pass. Can also be an array of options. When an array, the 'message' key can be used to provide a message.</p></dd> </dl>  <h4>Returns</h4>  callable<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_validCount"> <span class="name">validCount()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.RulesChecker.html#115-141" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">validCount( string $field , integer $count = 0 , string $operator = '&gt;' , string|null $message = null )</pre>  <p>Validates the count of associated records.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$field</code> </dt> <dd>The field to check the count on.</dd> <dt> integer <code>$count</code> <span class="label">optional</span> <span class="php-num">0</span> </dt> <dd>The expected count.</dd> <dt> string <code>$operator</code> <span class="label">optional</span> <span class="php-quote">'&gt;'</span> </dt> <dd>The operator for the count comparison.</dd> <dt> string|null <code>$message</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>The error message to show in case the rule does not pass.</dd> </dl>  <h4>Returns</h4>  callable<br>   </div>   <h2>Methods inherited from <a href="../class-cake.datasource.ruleschecker/#methods">Cake\Datasource\RulesChecker</a>
</h2> <div class="method-detail">   <h3 class="method-name" id="___construct"> <span class="name">__construct()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.RulesChecker.html#105-114" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">__construct( array $options = [] )</pre>  <p>Constructor. Takes the options to be passed to all rules.</p> <h4>Parameters</h4>  <dl> <dt> array <code>$options</code> <span class="label">optional</span> [] </dt> <dd>The options to pass to every rule</dd> </dl>   </div> <div class="method-detail">   <h3 class="method-name" id="__addError"> <span class="name">_addError()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.RulesChecker.html#304-327" title="Go to source code" class="source" target="_blank">source</a> <span class="label">protected</span>  </h3> <pre class="method-signature" data-language="php">_addError( callable $rule , string $name , array $options )</pre>  <p>Utility method for decorating any callable so that if it returns false, the correct property in the entity is marked as invalid.</p> <h4>Parameters</h4>  <dl> <dt> callable <code>$rule</code> </dt> <dd>The rule to decorate</dd> <dt> string <code>$name</code> </dt> <dd>The alias for a rule.</dd> <dt> array <code>$options</code> </dt> <dd>The options containing the error message and field.</dd> </dl>  <h4>Returns</h4>  callable<br>   </div> <div class="method-detail">   <h3 class="method-name" id="__checkRules"> <span class="name">_checkRules()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.RulesChecker.html#284-302" title="Go to source code" class="source" target="_blank">source</a> <span class="label">protected</span>  </h3> <pre class="method-signature" data-language="php">_checkRules( Cake\Datasource\EntityInterface $entity , array $options = [] , array $rules = [] )</pre>  <p>Used by top level functions checkDelete, checkCreate and checkUpdate, this function iterates an array containing the rules to be checked and checks them all.</p> <h4>Parameters</h4>  <dl> <dt> <code><a href="../class-cake.datasource.entityinterface/">Cake\Datasource\EntityInterface</a></code> <code>$entity</code> </dt> <dd>The entity to check for validity.</dd> <dt> array <code>$options</code> <span class="label">optional</span> [] </dt> <dd>Extra options to pass to checker functions.</dd> <dt> array <code>$rules</code> <span class="label">optional</span> [] </dt> <dd>The list of rules that must be checked.</dd> </dl>  <h4>Returns</h4>  boolean<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_add"> <span class="name">add()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.RulesChecker.html#116-140" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">add( callable $rule , string|null $name = null , array $options = [] )</pre>  <p>Adds a rule that will be applied to the entity both on create and update operations.</p> <h3>Options</h3> <p>The options array accept the following special keys:</p> <ul> <li>
<code>errorField</code>: The name of the entity field that will be marked as invalid if the rule does not pass.</li> <li>
<code>message</code>: The error message to set to <code>errorField</code> if the rule does not pass.</li> </ul> <h4>Parameters</h4>  <dl> <dt> callable <code>$rule</code> </dt> <dd><p>A callable function or object that will return whether the entity is valid or not.</p></dd> <dt> string|null <code>$name</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>The alias for a rule.</dd> <dt> array <code>$options</code> <span class="label">optional</span> [] </dt> <dd><p>List of extra options to pass to the rule callable as second argument.</p></dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_addCreate"> <span class="name">addCreate()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.RulesChecker.html#142-165" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">addCreate( callable $rule , string|null $name = null , array $options = [] )</pre>  <p>Adds a rule that will be applied to the entity on create operations.</p> <h3>Options</h3> <p>The options array accept the following special keys:</p> <ul> <li>
<code>errorField</code>: The name of the entity field that will be marked as invalid if the rule does not pass.</li> <li>
<code>message</code>: The error message to set to <code>errorField</code> if the rule does not pass.</li> </ul> <h4>Parameters</h4>  <dl> <dt> callable <code>$rule</code> </dt> <dd><p>A callable function or object that will return whether the entity is valid or not.</p></dd> <dt> string|null <code>$name</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>The alias for a rule.</dd> <dt> array <code>$options</code> <span class="label">optional</span> [] </dt> <dd><p>List of extra options to pass to the rule callable as second argument.</p></dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_addDelete"> <span class="name">addDelete()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.RulesChecker.html#192-215" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">addDelete( callable $rule , string|null $name = null , array $options = [] )</pre>  <p>Adds a rule that will be applied to the entity on delete operations.</p> <h3>Options</h3> <p>The options array accept the following special keys:</p> <ul> <li>
<code>errorField</code>: The name of the entity field that will be marked as invalid if the rule does not pass.</li> <li>
<code>message</code>: The error message to set to <code>errorField</code> if the rule does not pass.</li> </ul> <h4>Parameters</h4>  <dl> <dt> callable <code>$rule</code> </dt> <dd><p>A callable function or object that will return whether the entity is valid or not.</p></dd> <dt> string|null <code>$name</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>The alias for a rule.</dd> <dt> array <code>$options</code> <span class="label">optional</span> [] </dt> <dd><p>List of extra options to pass to the rule callable as second argument.</p></dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_addUpdate"> <span class="name">addUpdate()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.RulesChecker.html#167-190" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">addUpdate( callable $rule , string|null $name = null , array $options = [] )</pre>  <p>Adds a rule that will be applied to the entity on update operations.</p> <h3>Options</h3> <p>The options array accept the following special keys:</p> <ul> <li>
<code>errorField</code>: The name of the entity field that will be marked as invalid if the rule does not pass.</li> <li>
<code>message</code>: The error message to set to <code>errorField</code> if the rule does not pass.</li> </ul> <h4>Parameters</h4>  <dl> <dt> callable <code>$rule</code> </dt> <dd><p>A callable function or object that will return whether the entity is valid or not.</p></dd> <dt> string|null <code>$name</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>The alias for a rule.</dd> <dt> array <code>$options</code> <span class="label">optional</span> [] </dt> <dd><p>List of extra options to pass to the rule callable as second argument.</p></dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_check"> <span class="name">check()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.RulesChecker.html#217-243" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">check( Cake\Datasource\EntityInterface $entity , string $mode , array $options = [] )</pre>  <p>Runs each of the rules by passing the provided entity and returns true if all of them pass. The rules to be applied are depended on the $mode parameter which can only be RulesChecker::CREATE, RulesChecker::UPDATE or RulesChecker::DELETE</p> <h4>Parameters</h4>  <dl> <dt> <code><a href="../class-cake.datasource.entityinterface/">Cake\Datasource\EntityInterface</a></code> <code>$entity</code> </dt> <dd>The entity to check for validity.</dd> <dt> string <code>$mode</code> </dt> <dd>Either 'create, 'update' or 'delete'.</dd> <dt> array <code>$options</code> <span class="label">optional</span> [] </dt> <dd>Extra options to pass to checker functions.</dd> </dl>  <h4>Returns</h4>  boolean<br>  <h4>Throws</h4>  InvalidArgumentException<br>if an invalid mode is passed.<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_checkCreate"> <span class="name">checkCreate()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.RulesChecker.html#245-256" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">checkCreate( Cake\Datasource\EntityInterface $entity , array $options = [] )</pre>  <p>Runs each of the rules by passing the provided entity and returns true if all of them pass. The rules selected will be only those specified to be run on 'create'</p> <h4>Parameters</h4>  <dl> <dt> <code><a href="../class-cake.datasource.entityinterface/">Cake\Datasource\EntityInterface</a></code> <code>$entity</code> </dt> <dd>The entity to check for validity.</dd> <dt> array <code>$options</code> <span class="label">optional</span> [] </dt> <dd>Extra options to pass to checker functions.</dd> </dl>  <h4>Returns</h4>  boolean<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_checkDelete"> <span class="name">checkDelete()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.RulesChecker.html#271-282" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">checkDelete( Cake\Datasource\EntityInterface $entity , array $options = [] )</pre>  <p>Runs each of the rules by passing the provided entity and returns true if all of them pass. The rules selected will be only those specified to be run on 'delete'</p> <h4>Parameters</h4>  <dl> <dt> <code><a href="../class-cake.datasource.entityinterface/">Cake\Datasource\EntityInterface</a></code> <code>$entity</code> </dt> <dd>The entity to check for validity.</dd> <dt> array <code>$options</code> <span class="label">optional</span> [] </dt> <dd>Extra options to pass to checker functions.</dd> </dl>  <h4>Returns</h4>  boolean<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_checkUpdate"> <span class="name">checkUpdate()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.RulesChecker.html#258-269" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">checkUpdate( Cake\Datasource\EntityInterface $entity , array $options = [] )</pre>  <p>Runs each of the rules by passing the provided entity and returns true if all of them pass. The rules selected will be only those specified to be run on 'update'</p> <h4>Parameters</h4>  <dl> <dt> <code><a href="../class-cake.datasource.entityinterface/">Cake\Datasource\EntityInterface</a></code> <code>$entity</code> </dt> <dd>The entity to check for validity.</dd> <dt> array <code>$options</code> <span class="label">optional</span> [] </dt> <dd>Extra options to pass to checker functions.</dd> </dl>  <h4>Returns</h4>  boolean<br>   </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–present The Cake Software Foundation, Inc.<br>Licensed under the MIT License.<br>CakePHP is a registered trademark of Cake Software Foundation, Inc.<br>We are not endorsed by or affiliated with CakePHP.<br>
    <a href="https://api.cakephp.org/3.8/class-Cake.ORM.RulesChecker.html" class="_attribution-link" target="_blank">https://api.cakephp.org/3.8/class-Cake.ORM.RulesChecker.html</a>
  </p>
</div>

				
			</div>
			<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
</amp-auto-ads>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
