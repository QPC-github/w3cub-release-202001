
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Fish 3.0 Documentation - W3cubDocs</title>
  
  <meta name="description" content=" Fish 3.0 documentation ">
  <meta name="keywords" content="documentation, fish, fish~3.0">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/fish~3.0/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" integrity="sha256-6/DH7X+2hvUPElJfGsvzm+tgIpmM9zjbYxnpsr6gR1A=" crossorigin="anonymous" href="/assets/application-ebf0c7ed7fb686f50f12525f1acbf39beb6022998cf738db6319e9b2bea04750.css">
  <script type="text/javascript" src="/assets/application-db285287b40ed28fac520fcfd75d7d874692b647b5b5e05968c741dda5de4148.js" integrity="sha256-2yhSh7QO0o+sUg/P1119h0aStke1teBZaMdB3aXeQUg=" crossorigin="anonymous"></script>
  <script src="/json/fish~3.0.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2572770204602497",
            enable_page_level_ads: true
        });
  </script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/fish~3.0/" class="_nav-link" title="" style="margin-left:0;">Fish 3.0</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1 class="interior_title">Documentation</h1> <h2 id="introduction">
 Introduction</h2> <p>This is the documentation for <code>fish</code>, the friendly interactive shell. <code>fish</code> is a user friendly commandline shell intended mostly for interactive use. A shell is a program used to execute other programs. For the latest information on <code>fish</code>, please visit the <a href="https://fishshell.com/" target="_blank"><code>fish</code> homepage</a>.</p> <h2 id="syntax">
 Syntax overview</h2> <p>Shells like fish are used by giving them commands. Every <code>fish</code> command follows the same simple syntax.</p> <p>A command is executed by writing the name of the command followed by any arguments.</p> <p>Example:</p> <pre class="fish" data-language="fish">
echo hello world
</pre>
<p>This calls the <code>echo</code> command. <code>echo</code> is a command which will write its arguments to the screen. In the example above, the output will be 'hello world'. Everything in fish is done with commands. There are commands for performing a set of commands multiple times, commands for assigning variables, commands for treating a group of commands as a single command, etc.. And every single command follows the same simple syntax.</p> <p>If you want to find out more about the echo command used above, read the manual page for the echo command by writing: <code>man echo</code></p> <p><code>man</code> is a command for displaying a manual page on a given topic. The man command takes the name of the manual page to display as an argument. There are manual pages for almost every command on most computers. There are also manual pages for many other things, such as system libraries and important files.</p> <p>Every program on your computer can be used as a command in <code>fish</code>. If the program file is located in one of the directories in the <a href="#variables-special"><code>PATH</code></a>, it is sufficient to type the name of the program to use it. Otherwise the whole filename, including the directory (like <code>/home/me/code/checkers/checkers</code> or <code>../checkers</code>) has to be used.</p> <p>Here is a list of some useful commands:</p> <ul> <li>
<code>cd</code>, change the current directory</li> <li>
<code>ls</code>, list files and directories</li> <li>
<code>man</code>, display a manual page on the screen</li> <li>
<code>mv</code>, move (rename) files</li> <li>
<code>cp</code>, copy files</li> <li>
<code>open</code>, open files with the default application associated with each filetype</li> <li>
<code>less</code>, list the contents of files</li> </ul> <p>Commands and parameters are separated by the space character ' '. Every command ends with either a newline (i.e. by pressing the return key) or a semicolon '<code>;</code>'. More than one command can be written on the same line by separating them with semicolons.</p> <p>A switch is a very common special type of argument. Switches almost always start with one or more hyphens '<code>-</code>' and alter the way a command operates. For example, the '<code>ls</code>' command usually lists all the files and directories in the current working directory, but by using the '<code>-l</code>' switch, the behavior of '<code>ls</code>' is changed to not only display the filename, but also the size, permissions, owner and modification time of each file.</p> <p>Switches differ between commands and are documented in the manual page for each command. Some switches are common to most command though, for example '<code>--help</code>' will usually display a help text, '<code>-i</code>' will often turn on interactive prompting before taking action, while '<code>-f</code>' will turn it off.</p> <h3 id="quotes">
 Quotes</h3> <p>Sometimes features such as <a href="#expand">parameter expansion</a> and <a href="#escapes">character escapes</a> get in the way. When that happens, the user can write a parameter within quotes, either ‘’<code>(single quote) or</code>"<code>(double quote). There is one important difference between single quoted and double quoted strings: When using double quoted string, &lt;a href="#expand-variable"&gt;variable expansion&lt;/a&gt; still takes place. Other than that, no other kind of expansion (including &lt;a href="#expand-brace"&gt;brace expansion&lt;/a&gt; and parameter expansion) will take place, the parameter may contain spaces, and escape sequences are ignored. The only backslash escape accepted within single quotes is</code>\'<code>, which escapes a single quote and</code>\`, which escapes the backslash symbol. The only backslash escapes accepted within double quotes are <code>\"</code>, which escapes a double quote, <code>\$</code>, which escapes a dollar character, <code>\</code> followed by a newline, which deletes the backslash and the newline, and lastly <code>\\</code>, which escapes the backslash symbol. Single quotes have no special meaning within double quotes and vice versa.</p> <p>Example:</p> <pre class="fish" data-language="fish">
rm "cumbersome filename.txt"
</pre>
<p>Will remove the file 'cumbersome filename.txt', while</p> <pre class="fish" data-language="fish">
rm cumbersome filename.txt
</pre>
<p>would remove the two files 'cumbersome' and 'filename.txt'.</p> <h3 id="escapes">
 Escaping characters</h3> <p>Some characters can not be written directly on the command line. For these characters, so called escape sequences are provided. These are:</p> <ul> <li>'<code>\a</code>' represents the alert character</li> <li>'<code>\b</code>' represents the backspace character</li> <li>'<code>\e</code>' represents the escape character</li> <li>'<code>\f</code>' represents the form feed character</li> <li>'<code>\n</code>' represents a newline character</li> <li>'<code>\r</code>' represents the carriage return character</li> <li>'<code>\t</code>' represents the tab character</li> <li>'<code>\v</code>' represents the vertical tab character</li> <li>'<code>\ </code>' escapes the space character</li> <li>'<code>\$</code>' escapes the dollar character</li> <li>'<code>\\</code>' escapes the backslash character</li> <li>'<code>\*</code>' escapes the star character</li> <li>'<code>\?</code>' escapes the question mark character</li> <li>'<code>\~</code>' escapes the tilde character</li> <li>'<code>\#</code>' escapes the hash character</li> <li>'<code>\(</code>' escapes the left parenthesis character</li> <li>'<code>\)</code>' escapes the right parenthesis character</li> <li>'<code>\{</code>' escapes the left curly bracket character</li> <li>'<code>\}</code>' escapes the right curly bracket character</li> <li>'<code>\[</code>' escapes the left bracket character</li> <li>'<code>\]</code>' escapes the right bracket character</li> <li>'<code>\&lt;</code>' escapes the less than character</li> <li>'<code>\&gt;</code>' escapes the more than character</li> <li>'<code>\^</code>' escapes the circumflex character</li> <li>'<code>\&amp;</code>' escapes the ampersand character</li> <li>'<code>\|</code>' escapes the vertical bar character</li> <li>'<code>\;</code>' escapes the semicolon character</li> <li>'<code>\"</code>' escapes the quote character</li> <li>'<code>\'</code>' escapes the apostrophe character</li> <li>'<code>\x<em>xx</em></code>', where <code><em>xx</em></code> is a hexadecimal number, represents the ascii character with the specified value. For example, <code>\x9</code> is the tab character.</li> <li>'<code>\X<em>xx</em></code>', where <code><em>xx</em></code> is a hexadecimal number, represents a byte of data with the specified value. If you are using a multibyte encoding, this can be used to enter invalid strings. Only use this if you know what you are doing.</li> <li>'<code>\<em>ooo</em></code>', where <code><em>ooo</em></code> is an octal number, represents the ascii character with the specified value. For example, <code>\011</code> is the tab character.</li> <li>'<code>\u<em>xxxx</em></code>', where <code><em>xxxx</em></code> is a hexadecimal number, represents the 16-bit Unicode character with the specified value. For example, <code>\u9</code> is the tab character.</li> <li>'<code>\U<em>xxxxxxxx</em></code>', where <code><em>xxxxxxxx</em></code> is a hexadecimal number, represents the 32-bit Unicode character with the specified value. For example, <code>\U9</code> is the tab character.</li> <li>'<code>\c<em>x</em></code>', where <code><em>x</em></code> is a letter of the alphabet, represents the control sequence generated by pressing the control key and the specified letter. For example, <code>\ci</code> is the tab character</li> </ul> <h3 id="redirects">
 Input/Output (IO) redirection</h3> <p>Most programs use three input/output (IO) streams, each represented by a number called a file descriptor (FD). These are:</p> <ul> <li>Standard input, FD 0, for reading, defaults to reading from the keyboard.</li> <li>Standard output, FD 1, for writing, defaults to writing to the screen.</li> <li>Standard error, FD 2, for writing errors and warnings, defaults to writing to the screen.</li> </ul> <p>The reason for providing for two output file descriptors is to allow separation of errors and warnings from regular program output.</p> <p>Any file descriptor can be directed to a different output than its default through a simple mechanism called a redirection.</p> <p>An example of a file redirection is <code>echo hello &gt; output.txt</code>, which directs the output of the echo command to the file output.txt.</p> <ul> <li>To read standard input from a file, write <code>&lt;SOURCE_FILE</code>
</li> <li>To write standard output to a file, write <code>&gt;DESTINATION</code>
</li> <li>To write standard error to a file, write <code>2&gt;DESTINATION</code>
</li> <li>To append standard output to a file, write <code>&gt;&gt;DESTINATION_FILE</code>
</li> <li>To append standard error to a file, write <code>2&gt;&gt;DESTINATION_FILE</code>
</li> <li>To not overwrite ("clobber") an existing file, write '&gt;?DESTINATION' or '2&gt;?DESTINATION'</li> </ul> <p><code>DESTINATION</code> can be one of the following:</p> <ul> <li>A filename. The output will be written to the specified file.</li> <li>An ampersand (<code>&amp;</code>) followed by the number of another file descriptor. The output will be written to that file descriptor instead.</li> <li>An ampersand followed by a minus sign (<code>&amp;-</code>). The file descriptor will be closed.</li> </ul> <p>Example:</p> <p>To redirect both standard output and standard error to the file 'all_output.txt', you can write <code>echo Hello &gt; all_output.txt 2&gt;&amp;1</code>.</p> <p>Any file descriptor can be redirected in an arbitrary way by prefixing the redirection with the file descriptor.</p> <ul> <li>To redirect input of FD N, write <code>N&lt;DESTINATION</code>
</li> <li>To redirect output of FD N, write <code>N&gt;DESTINATION</code>
</li> <li>To append the output of FD N to a file, write <code>N&gt;&gt;DESTINATION_FILE</code>
</li> </ul> <p>Example: <code>echo Hello 2&gt;output.stderr</code> writes the standard error (file descriptor 2) of the target program to <code>output.stderr</code>.</p> <h3 id="piping">
 Piping</h3> <p>The user can string together multiple commands into a so called pipeline. This means that the standard output of one command will be read in as standard input into the next command. This is done by separating the commands by the pipe character '<code>|</code>'. For example</p> <pre class="fish" data-language="fish">
cat foo.txt | head
</pre>
<p>will call the <code>cat</code> program with the parameter 'foo.txt', which will print the contents of the file 'foo.txt'. The contents of foo.txt will then be filtered through the program 'head', which will pass on the first ten lines of the file to the screen. For more information on how to combine commands through pipes, read the manual pages of the commands you want to use using the <code>man</code> command. If you want to find out more about the <code>cat</code> program, type <code>man cat</code>.</p> <p>Pipes usually connect file descriptor 1 (standard output) of the first process to file descriptor 0 (standard input) of the second process. It is possible to use a different output file descriptor by prepending the desired FD number and then output redirect symbol to the pipe. For example:</p> <pre class="fish" data-language="fish">
make fish 2&gt;| less
</pre>
<p>will attempt to build the fish program, and any errors will be shown using the less pager.</p> <h3 id="syntax-background">
 Background jobs</h3> <p>When you start a job in <code>fish</code>, <code>fish</code> itself will pause, and give control of the terminal to the program just started. Sometimes, you want to continue using the commandline, and have the job run in the background. To create a background job, append an &amp; (ampersand) to your command. This will tell fish to run the job in the background. Background jobs are very useful when running programs that have a graphical user interface.</p> <p>Example:</p> <pre class="fish" data-language="fish">
emacs &amp;
</pre>
<p>will start the emacs text editor in the background.</p> <h3 id="syntax-job-control">
 Job control</h3> <p>Most programs allow you to suspend the program's execution and return control to <code>fish</code> by pressing <span class="key"><em>Control</em><span>-</span><b>Z</b></span> (also referred to as <code>^Z</code>). Once back at the <code>fish</code> commandline, you can start other programs and do anything you want. If you then want you can go back to the suspended command by using the <a href="commands/#fg"><code>fg</code></a> (foreground) command.</p> <p>If you instead want to put a suspended job into the background, use the <a href="commands/#bg"><code>bg</code></a> command.</p> <p>To get a listing of all currently started jobs, use the <a href="commands/#jobs"><code>jobs</code></a> command.</p> <h3 id="syntax-function">
 Functions</h3> <p>Functions are programs written in the fish syntax. They group together one or more commands and their arguments using a single name. It can also be used to start a specific command with additional arguments.</p> <p>For example, the following is a function definition that calls the command <code>ls</code> with the argument '<code>-l</code>' to print a detailed listing of the contents of the current directory:</p> <pre class="fish" data-language="fish">
function ll
    ls -l $argv
end
</pre>
<p>The first line tells fish that a function by the name of <code>ll</code> is to be defined. To use it, simply write <code>ll</code> on the commandline. The second line tells fish that the command <code>ls -l $argv</code> should be called when <code>ll</code> is invoked. '<code>$argv</code>' is an array variable, which always contains all arguments sent to the function. In the example above, these are simply passed on to the <code>ls</code> command. For more information on functions, see the documentation for the <a href="commands/#function">function</a> builtin.</p> <h3 id="syntax-function-wrappers">
 Defining aliases</h3> <p>One of the most common uses for functions is to slightly alter the behavior of an already existing command. For example, one might want to redefine the <code>ls</code> command to display colors. The switch for turning on colors on GNU systems is '<code>--color=auto</code>'. An alias, or wrapper, around <code>ls</code> might look like this:</p> <pre class="fish" data-language="fish">
function ls
    command ls --color=auto $argv
end
</pre>
<p>There are a few important things that need to be noted about aliases:</p> <ul> <li>Always take care to add the <code>$argv</code> variable to the list of parameters to the wrapped command. This makes sure that if the user specifies any additional parameters to the function, they are passed on to the underlying command.</li> <li>If the alias has the same name as the aliased command, it is necessary to prefix the call to the program with <code>command</code> in order to tell fish that the function should not call itself, but rather a command with the same name. Failing to do so will cause infinite recursion bugs.</li> <li>Autoloading isn't applicable to aliases. Since, by definition, the function is created at the time the alias command is executed. You cannot autoload aliases.</li> </ul> <p>To easily create a function of this form, you can use the <a href="commands/#alias">alias</a> command.</p> <h3 id="syntax-function-autoloading">
 Autoloading functions</h3> <p>Functions can be defined on the commandline or in a configuration file, but they can also be automatically loaded. This method of defining functions has several advantages. An autoloaded function becomes available automatically to all running shells. If the function definition is changed, all running shells will automatically reload the altered version. Startup time and memory usage is improved, etc.</p> <p>Fish automatically searches through any directories in the array variable <code>$fish_function_path</code>, and any functions defined are automatically loaded when needed. A function definition file must have a filename consisting of the name of the function plus the suffix '<code>.fish</code>'.</p> <p>By default, Fish searches the following for functions, using the first available file that it finds:</p>
<ul> <li>A directory for end-users to keep their own functions, usually <code>~/.config/fish/functions</code> (controlled by the <code>XDG_CONFIG_HOME</code> environment variable).</li> <li>A directory for systems administrators to install functions for all users on the system, usually <code>/etc/fish/functions</code>.</li> <li>A directory for third-party software vendors to ship their own functions for their software, usually <code>/usr/share/fish/vendor_functions.d</code>.</li> <li>The functions shipped with fish, usually installed in <code>/usr/share/fish/functions</code>.</li> </ul> <p>These paths are controlled by parameters set at build, install, or run time, and may vary from the defaults listed above.</p> <p>This wide search may be confusing. If you are unsure, your functions probably belong in <code>~/.config/fish/functions</code>.</p> <p>It is very important that function definition files only contain the definition for the specified function and nothing else. Otherwise, it is possible that autoloading a function files requires that the function already be loaded, which creates a circular dependency.</p> <p>Autoloading also won't work for <a href="#event">event handlers</a>, since fish cannot know that a function is supposed to be executed when an event occurs when it hasn't yet loaded the function. See the <a href="#event">event handlers</a> section for more information.</p> <p>Autoloading is not applicable to functions created by the <code>alias</code> command. For functions simple enough that you prefer to use the <code>alias</code> command to define them you'll need to put those commands in your <code>~/.config/fish/config.fish</code> script or some other script run when the shell starts.</p> <p>If you are developing another program, you may wish to install functions which are available for all users of the fish shell on a system. They can be installed to the "vendor" functions directory. As this path may vary from system to system, the <code>pkgconfig</code> framework should be used to discover this path with the output of <code>pkg-config --variable functionsdir fish</code>.</p> <h3 id="syntax-conditional">
 Conditional execution of code and flow control</h3> <p>There are four fish builtins that let you execute commands only if a specific criterion is met. These builtins are <a href="commands/#if"><code>if</code></a>, <a href="commands/#switch"><code>switch</code></a>, <a href="commands/#and"><code>and</code></a> and <a href="commands/#or"><code>or</code></a>.</p> <p>The <code>switch</code> command is used to execute one of possibly many blocks of commands depending on the value of a string. See the documentation for <a href="commands/#switch">switch</a> for more information.</p> <p>The other conditionals use the <a href="#variables-status">exit status</a> of a command to decide if a command or a block of commands should be executed. See the documentation for <a href="commands/#if"><code>if</code></a>, <a href="commands/#and"><code>and</code></a> and <a href="commands/#or"><code>or</code></a> for more information.</p> <h3 id="syntax-words">
 Some common words</h3> <p>This is a short explanation of some of the commonly used words in fish.</p> <ul> <li>
<b>argument</b> a parameter given to a command</li> <li>
<b>builtin</b> a command that is implemented in the shell. Builtins are commands that are so closely tied to the shell that it is impossible to implement them as external commands.</li> <li>
<b>command</b> a program that the shell can run.</li> <li>
<b>function</b> a block of commands that can be called as if they were a single command. By using functions, it is possible to string together multiple smaller commands into one more advanced command.</li> <li>
<b>job</b> a running pipeline or command</li> <li>
<b>pipeline</b> a set of commands stringed together so that the output of one command is the input of the next command</li> <li>
<b>redirection</b> an operation that changes one of the input/output streams associated with a job</li> <li>
<b>switch</b> a special flag sent as an argument to a command that will alter the behavior of the command. A switch almost always begins with one or two hyphens.</li> </ul> <h2 id="docs">
 Help</h2> <p><code>fish</code> has an extensive help system. Use the <a href="commands/#help"><code>help</code></a> command to obtain help on a specific subject or command. For instance, writing <code>help syntax</code> displays the <a href="#syntax">syntax section</a> of this documentation.</p> <p><code>fish</code> also has man pages for its commands. For example, <code>man set</code> will show the documentation for <code>set</code> as a man page.</p> <p>Help on a specific builtin can also be obtained with the <code>-h</code> parameter. For instance, to obtain help on the <code>fg</code> builtin, either type <code>fg -h</code> or <code>help fg</code>.</p> <h2 id="autosuggestions">
 Autosuggestions</h2> <p>fish suggests commands as you type, based on command history, completions, and valid file paths. As you type commands, you will see a suggestion offered after the cursor, in a muted gray color (which can be changed with the <code>fish_color_autosuggestion</code> variable).</p> <p>To accept the autosuggestion (replacing the command line contents), press right arrow or <span class="key"><em>Control</em><span>-</span><b>F</b></span>. To accept the first suggested word, press <span class="key"><em>Alt</em><span>-</span><b>→</b></span> or <span class="key"><em>Alt</em><span>-</span><b>F</b></span>. If the autosuggestion is not what you want, just ignore it: it won't execute unless you accept it.</p> <p>Autosuggestions are a powerful way to quickly summon frequently entered commands, by typing the first few characters. They are also an efficient technique for navigating through directory hierarchies.</p> <h2 id="completion">
 Tab completion</h2> <p>Tab completion is one of the most time saving features of any modern shell. By tapping the tab key, the user asks <code>fish</code> to guess the rest of the command or parameter that the user is currently typing. If <code>fish</code> can only find one possible completion, <code>fish</code> will write it out. If there is more than one completion, <code>fish</code> will write out the longest prefix that all completions have in common. If the completions differ on the first character, a list of all possible completions is printed. The list features descriptions of the completions and if the list doesn't fit the screen, it is scrollable by using the arrow keys, the page up/page down keys, the tab key or the space bar.</p> <p>If the list is visible, pressing control-S (or the <code>pager-toggle-search</code> binding) will allow filtering the list. Shift-tab (or the <code>complete-and-search</code> binding) will trigger completion with the search field immediately visible.</p> <p>These are the general purpose tab completions that <code>fish</code> provides:</p> <ul> <li>Completion of commands (builtins, functions and regular programs).</li> <li>Completion of shell variable names.</li> <li>Completion of usernames for tilde expansion.</li> <li>Completion of filenames, even on strings with wildcards such as '<code>*</code>', '<code>**</code>' and '<code>?</code>'.</li> </ul> <p><code>fish</code> provides a large number of program specific completions. Most of these completions are simple options like the <code>-l</code> option for <code>ls</code>, but some are more advanced. The latter include:</p> <ul> <li>The programs <code>man</code> and <code>whatis</code> show all installed manual pages as completions.</li> <li>The <code>make</code> program uses all targets in the Makefile in the current directory as completions.</li> <li>The <code>mount</code> command uses all mount points specified in fstab as completions.</li> <li>The <code>ssh</code> command uses all hosts that are stored in the known_hosts file as completions. (See the ssh documentation for more information)</li> <li>The <code>su</code> command uses all users on the system as completions.</li> <li>The <code>apt-get</code>, <code>rpm</code> and <code>yum</code> commands use all installed packages as completions.</li> </ul> <h3 id="completion-own">
 Writing your own completions</h3> <p>Specifying your own completions is not difficult. To specify a completion, use the <code>complete</code> command. <code>complete</code> takes as a parameter the name of the command to specify a completion for. For example, to add a completion for the program <code>myprog</code>, one would start the completion command with <code>complete -c myprog ...</code></p> <p>To provide a list of possible completions for myprog, use the <code>-a</code> switch. If <code>myprog</code> accepts the arguments start and stop, this can be specified as ‘complete -c myprog -a 'start stop’<code>. The argument to the</code>-a` switch is always a single string. At completion time, it will be tokenized on spaces and tabs, and variable expansion, command substitution and other forms of parameter expansion will take place.</p> <p><code>fish</code> has a special syntax to support specifying switches accepted by a command. The switches <code>-s</code>, <code>-l</code> and <code>-o</code> are used to specify a short switch (single character, such as <code>-l</code>), a gnu style long switch (such as '<code>--color</code>') and an old-style long switch (like '<code>-shuffle</code>'), respectively. If the command 'myprog' has an option '-o' which can also be written as '<code>--output</code>', and which can take an additional value of either 'yes' or 'no', this can be specified by writing:</p> <pre class="fish" data-language="fish">
complete -c myprog -s o -l output -a "yes no"
</pre>
<p>There are also special switches for specifying that a switch requires an argument, to disable filename completion, to create completions that are only available in some combinations, etc.. For a complete description of the various switches accepted by the <code>complete</code> command, see the documentation for the <a href="commands/#complete">complete</a> builtin, or write <code>complete --help</code> inside the <code>fish</code> shell.</p> <p>For examples of how to write your own complex completions, study the completions in <code>/usr/share/fish/completions</code>. (The exact path depends on your chosen installation prefix and may be slightly different)</p> <h3 id="completion-func">
 Useful functions for writing completions</h3> <p><code>fish</code> ships with several functions that are very useful when writing command specific completions. Most of these functions name begins with the string '<code>__fish_</code>'. Such functions are internal to <code>fish</code> and their name and interface may change in future fish versions. Still, some of them may be very useful when writing completions. A few of these functions are described here. Be aware that they may be removed or changed in future versions of fish.</p> <p>Functions beginning with the string <code>__fish_print_</code> print a newline separated list of strings. For example, <code>__fish_print_filesystems</code> prints a list of all known file systems. Functions beginning with <code>__fish_complete_</code> print out a newline separated list of completions with descriptions. The description is separated from the completion by a tab character.</p> <ul> <li>
<code>__fish_complete_directories STRING DESCRIPTION</code> performs path completion on STRING, allowing only directories, and giving them the description DESCRIPTION.</li> <li>
<code>__fish_complete_path STRING DESCRIPTION</code> performs path completion on STRING, giving them the description DESCRIPTION.</li> <li>
<code>__fish_complete_groups</code> prints a list of all user groups with the groups members as description.</li> <li>
<code>__fish_complete_pids</code> prints a list of all processes IDs with the command name as description.</li> <li>
<code>__fish_complete_suffix SUFFIX</code> performs file completion allowing only files ending in SUFFIX, with an optional description.</li> <li>
<code>__fish_complete_users</code> prints a list of all users with their full name as description.</li> <li>
<code>__fish_print_filesystems</code> prints a list of all known file systems. Currently, this is a static list, and not dependent on what file systems the host operating system actually understands.</li> <li>
<code>__fish_print_hostnames</code> prints a list of all known hostnames. This functions searches the fstab for nfs servers, ssh for known hosts and checks the <code>/etc/hosts</code> file.</li> <li>
<code>__fish_print_interfaces</code> prints a list of all known network interfaces.</li> <li>
<code>__fish_print_packages</code> prints a list of all installed packages. This function currently handles Debian, rpm and Gentoo packages.</li> </ul> <h3 id="completion-path">
 Where to put completions</h3> <p>Completions can be defined on the commandline or in a configuration file, but they can also be automatically loaded. Fish automatically searches through any directories in the array variable <code>$fish_complete_path</code>, and any completions defined are automatically loaded when needed. A completion file must have a filename consisting of the name of the command to complete and the suffix '<code>.fish</code>'.</p> <p>By default, Fish searches the following for completions, using the first available file that it finds:</p>
<ul> <li>A directory for end-users to keep their own completions, usually <code>~/.config/fish/completions</code> (controlled by the <code>XDG_CONFIG_HOME</code> environment variable);</li> <li>A directory for systems administrators to install completions for all users on the system, usually <code>/etc/fish/completions</code>;</li> <li>A directory for third-party software vendors to ship their own completions for their software, usually <code>/usr/share/fish/vendor_completions.d</code>;</li> <li>The completions shipped with fish, usually installed in <code>/usr/share/fish/completions</code>; and</li> <li>Completions automatically generated from the operating system's manual, usually stored in <code>~/.local/share/fish/generated_completions</code>.</li> </ul> <p>These paths are controlled by parameters set at build, install, or run time, and may vary from the defaults listed above.</p> <p>This wide search may be confusing. If you are unsure, your completions probably belong in <code>~/.config/fish/completions</code>.</p> <p>If you have written new completions for a common Unix command, please consider sharing your work by submitting it via the instructions in <a href="#more-help">Further help and development</a>.</p> <p>If you are developing another program and would like to ship completions with your program, install them to the "vendor" completions directory. As this path may vary from system to system, the <code>pkgconfig</code> framework should be used to discover this path with the output of <code>pkg-config --variable completionsdir fish</code>.</p> <h2 id="expand">
 Parameter expansion (Globbing)</h2> <p>When an argument for a program is given on the commandline, it undergoes the process of parameter expansion before it is sent on to the command. Parameter expansion is a powerful mechanism that allows you to expand the parameter in various ways, including performing wildcard matching on files, inserting the value of a shell variable into the parameter or even using the output of another command as a parameter list.</p> <h3 id="expand-wildcard">
 Wildcards</h3> <p>If a star (<code>*</code>) or a question mark (<code>?</code>) is present in the parameter, <code>fish</code> attempts to match the given parameter to any files in such a way that:</p> <ul> <li>
<code>?</code> can match any single character except '/'.</li> <li>
<code>*</code> can match any string of characters not containing '/'. This includes matching an empty string.</li> <li>
<code>**</code> matches any string of characters. This includes matching an empty string. The matched string may include the <code>/</code> character; that is, it recurses into subdirectories. Note that augmenting this wildcard with other strings will not match files in the current working directory (<code>$PWD</code>) if you separate the strings with a slash ("/"). This is unlike other shells such as zsh. For example, <code>**\/*.fish</code> in zsh will match <code>.fish</code> files in the PWD but in fish will only match such files in a subdirectory. In fish you should type <code>**.fish</code> to match files in the PWD as well as subdirectories.</li> </ul> <p>Other shells, such as zsh, provide a rich glob syntax for restricting the files matched by globs. For example, <code>**(.)</code>, to only match regular files. Fish prefers to defer such features to programs, such as <code>find</code>, rather than reinventing the wheel. Thus, if you want to limit the wildcard expansion to just regular files the fish approach is to define and use a function. For example,</p> <pre class="fish cli-dark" data-language="fish">
function ff --description 'Like ** but only returns plain files.'
    # This also ignores .git directories.
    find . \( -name .git -type d -prune \) -o -type f | \ 
        sed -n -e '/^\.\/\.git$/n' -e 's/^\.\///p'
end
</pre>
<p>You would then use it in place of <code>**</code> like this, <code>my_prog (ff)</code>, to pass only regular files in or below $PWD to <code>my_prog</code>.</p> <p>Wildcard matches are sorted case insensitively. When sorting matches containing numbers, consecutive digits are considered to be one element, so that the strings '1' '5' and '12' would be sorted in the order given.</p> <p>File names beginning with a dot are not considered when wildcarding unless a dot is specifically given as the first character of the file name.</p> <p>Examples:</p> <ul> <li>
<code>a*</code> matches any files beginning with an 'a' in the current directory.</li> <li>
<code>???</code> matches any file in the current directory whose name is exactly three characters long.</li> <li>
<code>**</code> matches any files and directories in the current directory and all of its subdirectories.</li> </ul> <p>Note that for most commands, if any wildcard fails to expand, the command is not executed, <a href="#variables-status"><code>$status</code></a> is set to nonzero, and a warning is printed. This behavior is consistent with setting <code>shopt -s failglob</code> in bash. There are exactly 3 exceptions, namely <a href="commands/#set"><code>set</code></a>, <a href="commands/#count"><code>count</code></a> and <a href="commands/#for"><code>for</code></a>. Their globs are permitted to expand to zero arguments, as with <code>shopt -s nullglob</code> in bash.</p> <p>Examples: </p> <pre class="fish" data-language="fish">
ls *.foo
# Lists the .foo files, or warns if there aren't any.

set foos *.foo
if count $foos &gt;/dev/null
    ls $foos
end
# Lists the .foo files, if any.
</pre>
<h3 id="expand-command-substitution">
 Command substitution</h3> <p>The output of a series of commands can be used as the parameters to another command. If a parameter contains a set of parenthesis, the text enclosed by the parenthesis will be interpreted as a list of commands. On expansion, this list is executed, and substituted by the output. If the output is more than one line long, each line will be expanded to a new parameter. Setting <code>IFS</code> to the empty string will disable line splitting.</p> <p>The exit status of the last run command substitution is available in the <a href="#variables-status">status</a> variable if the substitution occurs in the context of a <code>set</code> command.</p> <p>Only part of the output can be used, see <a href="#expand-index-range">index range expansion</a> for details.</p> <p>Fish has a default limit of 10 MiB on the amount of data a command substitution can output. If the limit is exceeded the entire command, not just the substitution, is failed and <code>$status</code> is set to 122. You can modify the limit by setting the <code>fish_read_limit</code> variable at any time including in the environment before fish starts running. If you set it to zero then no limit is imposed. This is a safety mechanism to keep the shell from consuming too much memory if a command outputs an unreasonable amount of data. Note that this limit also affects how much data the <code>read</code> command will process.</p> <p>Examples:</p> <pre class="fish" data-language="fish">
echo (basename image.jpg .jpg).png
# Outputs 'image.png'.

for i in *.jpg; convert $i (basename $i .jpg).png; end
# Convert all JPEG files in the current directory to the
# PNG format using the 'convert' program.

begin; set -l IFS; set data (cat data.txt); end
# Set the `data` variable to the contents of 'data.txt'
# without splitting it into an array.
</pre>
<h3 id="expand-brace">
 Brace expansion</h3> <p>A comma separated list of characters enclosed in curly braces will be expanded so each element of the list becomes a new parameter.</p> <p>Examples: </p> <pre class="fish" data-language="fish">
echo input.{c,h,txt}
# Outputs 'input.c input.h input.txt'

mv *.{c,h} src/
# Moves all files with the suffix '.c' or '.h' to the subdirectory src.
</pre>
<p>A literal "{}" will not be used as a brace expansion:</p> <pre class="fish" data-language="fish">
echo foo-{}
# Outputs foo-{}

echo foo-{}$undefinedvar
# Output is an empty line - see the cartesian product section
</pre>
<p>If there is nothing between a brace and a comma or two commas, it's interpreted as an empty element.</p> <p>So: </p> <pre class="fish" data-language="fish">
echo {,,/usr}/bin
# Output /bin /bin /usr/bin
</pre>
<p>To use a "," as an element, <a href="#quotes">quote</a> or <a href="#escapes">escape</a> it.</p> <h3 id="expand-variable">
 Variable expansion</h3> <p>A dollar sign followed by a string of characters is expanded into the value of the shell variable with the same name. For an introduction to the concept of shell variables, read the <a href="#variables">Shell variables</a> section.</p> <p>Undefined and empty variables expand to nothing.</p> <p>To separate a variable name from text encase the variable within double-quotes or braces.</p> <p>Examples: </p> <pre class="fish" data-language="fish">
echo $HOME
# Prints the home directory of the current user.

echo $nonexistentvariable
# Prints no output.

echo The plural of $WORD is "$WORD"s
# Prints "The plural of cat is cats" when $WORD is set to cat.
echo The plural of $WORD is {$WORD}s
# ditto
</pre>
<p>Note that without the quotes or braces, fish will try to expand a variable called <code>$WORDs</code>, which may not exist.</p> <p>The latter syntax <code>{$WORD}</code> works by exploiting <a href="#expand-brace">brace expansion</a>.</p> <p>In these cases, the expansion eliminates the string, as a result of the implicit <a href="#cartesian-product">cartesian product</a>.</p> <p>If, in the example above, $WORD is undefined or an empty list, the "s" is not printed. However, it is printed, if $WORD is the empty string.</p> <p>Unlike all other expanions, variable expansion also happens in double quoted strings. Inside double quotes (<code>"these"</code>), variables will always expand to exactly one argument. If they are empty or undefined, it will result in an empty string. If they have one element, they'll expand to that element. If they have more than that, the elements will be joined with spaces.</p> <p>Outside of double quotes, variables will expand to as many arguments as they have elements. That means an empty list will expand to nothing, a variable with one element will expand to that element, and a variable with multiple elements will expand to each of those elements separately.</p> <p>When two unquoted expansions directly follow each other, you need to watch out for expansions that expand to nothing. This includes undefined variables and empty lists, but also command substitutions with no output. See the <a href="#cartesian-product">cartesian product</a> section for more information.</p> <p>The <code>$</code> symbol can also be used multiple times, as a kind of "dereference" operator (the <code>*</code> in C or C++), like in the following code:</p> <pre class="fish" data-language="fish">
set foo a b c
set a 10; set b 20; set c 30
for i in (seq (count $$foo))
    echo $$foo[$i]
end

# Output is:
# 10
# 20
# 30
</pre>
<p>When using this feature together with array brackets, the brackets will always match the innermost <code>$</code> dereference. Thus, <code>$$foo[5]</code> will always mean the fifth element of the <code>foo</code> variable should be dereferenced, not the fifth element of the doubly dereferenced variable <code>foo</code>. The latter can instead be expressed as <code>$$foo[1][5]</code>.</p> <h3 id="cartesian-product">
 Cartesian Products</h3> <p>Lists adjacent to other lists or strings are expanded as cartesian products:</p> <p>Examples: </p> <pre class="fish cli-dark" data-language="fish">
&gt; echo {good,bad}" apples"
good apples bad apples

&gt; set -l a x y z
&gt; set -l b 1 2 3

&gt; echo $a$b
x1 y1 z1 x2 y2 z2 x3 y3 z3

&gt; echo $a"-"$b
x-1 y-1 z-1 x-2 y-2 z-2 x-3 y-3 z-3

&gt; echo {x,y,z}$b
x1 y1 z1 x2 y2 z2 x3 y3 z3

&gt; echo {$b}word
1word 2word 3word

&gt; echo {$c}word
# Output is an empty line
</pre>
<p>Be careful when you try to use braces to separate variable names from text. The problem shown above can be avoided by wrapping the variable in double quotes instead of braces (<code>echo "$c"word</code>).</p> <p>This also happens after <a href="#expand-command-substitution">command substitution</a>. Therefore strings might be eliminated. This can be avoided by making the inner command return a trailing newline.</p> <p>E.g.</p> <pre class="fish cli-dark" data-language="fish">
&gt; echo (printf '%s' '')banana ## the printf prints literally nothing
&gt; echo (printf '%s\n' '')banana ## the printf prints just a newline, so the command substitution expands to an empty string
banana
# After command substitution, the previous line looks like:
&gt; echo @dblq{}banana
</pre>
<p>Examples: </p> <pre class="fish cli-dark" data-language="fish">
&gt; set b 1 2 3
&gt; echo (echo x)$b
x1 x2 x3
</pre>
<h3 id="expand-index-range">
 Index range expansion</h3> <p>Both command substitution and shell variable expansion support accessing only specific items by providing a set of indices in square brackets. It's often needed to access a sequence of elements. To do this, use the range operator '<code>..</code>' for this. A range '<code>a..b</code>', where range limits 'a' and 'b' are integer numbers, is expanded into a sequence of indices '<code>a a+1 a+2 ... b</code>' or '<code>a a-1 a-2 ... b</code>' depending on which of 'a' or 'b' is higher. The negative range limits are calculated from the end of the array or command substitution. Note that invalid indexes for either end are silently clamped to one or the size of the array as appropriate.</p> <p>Range expansion will go in reverse if the end element is earlier in the list than the start and forward if the end is later than the start, unless exactly one of the given indices is negative. This is to enable clamping without changing direction if the list has fewer elements than expected.</p> <p>Some examples:</p> <pre class="fish" data-language="fish">
# Limit the command substitution output
echo (seq 10)[2..5]
# Uses elements from 2 to 5
# Output is: 2 3 4 5

# Use overlapping ranges:
echo (seq 10)[2..5 1..3]
# Takes elements from 2 to 5 and then elements from 1 to 3
# Output is: 2 3 4 5 1 2 3

# Reverse output
echo (seq 10)[-1..1]
# Uses elements from the last output line to
# the first one in reverse direction
# Output is: 10 9 8 7 6 5 4 3 2 1

# The command substitution has only one line,
# so these will result in empty output:
echo (echo one)[2..-1]
echo (echo one)[-3..1]
</pre>
<p>The same works when setting or expanding variables:</p> <pre class="fish" data-language="fish">
# Reverse path variable
set PATH $PATH[-1..1]
# or
set PATH[-1..1] $PATH

# Use only n last items of the PATH
set n -3
echo $PATH[$n..-1]
</pre>
<p>Variables can be used as indices for expansion of variables, like so: </p> <pre class="fish" data-language="fish">
set index 2
set letters a b c d
echo $letters[$index] ## returns &lt;'b'
</pre>
<p> However using variables as indices for command substitution is currently not supported, so </p> <pre class="fish" data-language="fish">
echo (seq 5)[$index] ## This won't work

set sequence (seq 5) ## It needs to be written on two lines like this.
echo $sequence[$index] ## returns &lt;'2'
</pre>
<h3 id="expand-home">
 Home directory expansion</h3> <p>The <code>~</code> (tilde) character at the beginning of a parameter, followed by a username, is expanded into the home directory of the specified user. A lone <code>~</code>, or a <code>~</code> followed by a slash, is expanded into the home directory of the process owner.</p> <h3 id="combine">
 Combining different expansions</h3> <p>All of the above expansions can be combined. If several expansions result in more than one parameter, all possible combinations are created.</p> <p>When combining multiple parameter expansions, expansions are performed in the following order:</p> <ul> <li>Command substitutions</li> <li>Variable expansions</li> <li>Bracket expansion</li> <li>Wildcard expansion</li> </ul> <p>Expansions are performed from right to left, nested bracket expansions are performed from the inside and out.</p> <p>Example:</p> <p>If the current directory contains the files 'foo' and 'bar', the command <code>echo a(ls){1,2,3}</code> will output 'abar1 abar2 abar3 afoo1 afoo2 afoo3'.</p> <h2 id="identifiers">
 Shell variable and function names</h2> <p>The names given to shell objects such as variables and function names are known as "identifiers". Each type of identifier has rules that define the valid sequence of characters which compose the identifier.</p> <p>A variable name cannot be empty. It can contain only letters, digits, and underscores. It may begin and end with any of those characters.</p> <p>A function name cannot be empty. It may not begin with a hyphen ("-") and may not contain a slash ("/"). All other characters, including a space, are valid.</p> <p>A bind mode name (e.g., <code>bind -m abc ...</code>) is restricted to the rules for valid variable names.</p> <h2 id="variables">
 Shell variables</h2> <p>Shell variables are named pieces of data, which can be created, deleted and their values changed and used by the user. Variables may optionally be "exported", so that a copy of the variable is available to any subprocesses the shell creates. An exported variable is referred to as an "environment variable".</p> <p>To set a variable value, use the <a href="commands/#set"><code>set</code> command</a>. A variable name can not be empty and can contain only letters, digits, and underscores. It may begin and end with any of those characters.</p> <p>Example:</p> <p>To set the variable <code>smurf_color</code> to the value <code>blue</code>, use the command <code>set smurf_color blue</code>.</p> <p>After a variable has been set, you can use the value of a variable in the shell through <a href="#expand-variable">variable expansion</a>.</p> <p>Example:</p> <p>To use the value of the variable <code>smurf_color</code>, write <code>$</code> (dollar symbol) followed by the name of the variable, like <code>echo Smurfs are usually $smurf_color</code>, which would print the result 'Smurfs are usually blue'.</p> <h3 id="variables-scope">
 Variable scope</h3> <p>There are three kinds of variables in fish: universal, global and local variables. Universal variables are shared between all fish sessions a user is running on one computer. Global variables are specific to the current fish session, but are not associated with any specific block scope, and will never be erased unless the user explicitly requests it using <code>set -e</code>. Local variables are specific to the current fish session, and associated with a specific block of commands, and is automatically erased when a specific block goes out of scope. A block of commands is a series of commands that begins with one of the commands <code>for</code>, <code>while</code> , <code>if</code>, <code>function</code>, <code>begin</code> or <code>switch</code>, and ends with the command <code>end</code>. The user can specify that a variable should have either global or local scope using the <code>-g/--global</code> or <code>-l/--local</code> switches.</p> <p>Variables can be explicitly set to be universal with the <code>-U</code> or <code>--universal</code> switch, global with the <code>-g</code> or <code>--global</code> switch, or local with the <code>-l</code> or <code>--local</code> switch. The scoping rules when creating or updating a variable are:</p> <ol type="1"> <li>If a variable is explicitly set to either universal, global or local, that setting will be honored. If a variable of the same name exists in a different scope, that variable will not be changed.</li> <li>If a variable is not explicitly set to be either universal, global or local, but has been previously defined, the variable scope is not changed.</li> <li>If a variable is not explicitly set to be either universal, global or local and has never before been defined, the variable will be local to the currently executing function. Note that this is different from using the <code>-l</code> or <code>--local</code> flag. If one of those flags is used, the variable will be local to the most inner currently executing block, while without these the variable will be local to the function. If no function is executing, the variable will be global.</li> </ol> <p>There may be many variables with the same name, but different scopes. When using a variable, the variable scope will be searched from the inside out, i.e. a local variable will be used rather than a global variable with the same name, a global variable will be used rather than a universal variable with the same name.</p> <p>Example:</p> <p>The following code will not output anything:</p> <pre class="fish" data-language="fish">
begin
    # This is a nice local scope where all variables will die
    set -l pirate 'There be treasure in them thar hills'
end

echo $pirate
# This will not output anything, since the pirate was local
</pre>
<h3 id="variables-universal">
 More on universal variables</h3> <p>Universal variables are variables that are shared between all the users' fish sessions on the computer. Fish stores many of its configuration options as universal variables. This means that in order to change fish settings, all you have to do is change the variable value once, and it will be automatically updated for all sessions, and preserved across computer reboots and login/logout.</p> <p>To see universal variables in action, start two fish sessions side by side, and issue the following command in one of them <code>set fish_color_cwd blue</code>. Since <code>fish_color_cwd</code> is a universal variable, the color of the current working directory listing in the prompt will instantly change to blue on both terminals.</p> <p><a href="#variables-universal">Universal variables</a> are stored in the file <code>.config/fish/fishd.MACHINE_ID</code>, where MACHINE_ID is typically your MAC address. Do not edit this file directly, as your edits may be overwritten. Edit them through fish scripts or by using fish interactively instead.</p> <p>Do not append to universal variables in <a href="/#initialization">config.fish</a>, because these variables will then get longer with each new shell instance. Instead, simply set them once at the command line.</p> <h3 id="variables-functions">
 Variable scope for functions</h3> <p>When calling a function, all current local variables temporarily disappear. This shadowing of the local scope is needed since the variable namespace would become cluttered, making it very easy to accidentally overwrite variables from another function.</p> <p>For example:</p> <pre class="fish" data-language="fish">
function shiver
    set phrase 'Shiver me timbers'
end

function avast
    set phrase 'Avast, mateys'
    # Calling the shiver function here can not
    # change any variables in the local scope
    shiver
    echo $phrase
end
avast

# Outputs "Avast, mateys"
</pre>
<h3 id="variables-export">
 Exporting variables</h3> <p>Variables in fish can be exported. This means the variable will be inherited by any commands started by fish. It is convention that exported variables are in uppercase and unexported variables are in lowercase.</p> <p>Variables can be explicitly set to be exported with the <code>-x</code> or <code>--export</code> switch, or not exported with the <code>-u</code> or <code>--unexport</code> switch. The exporting rules when creating or updating a variable are identical to the scoping rules for variables:</p> <ol type="1"> <li>If a variable is explicitly set to either be exported or not exported, that setting will be honored.</li> <li>If a variable is not explicitly set to be exported or not exported, but has been previously defined, the previous exporting rule for the variable is kept.</li> <li>If a variable is not explicitly set to be either exported or not exported and has never before been defined, the variable will not be exported.</li> <li>If a variable has local scope and is exported, any function called receives a <em>copy</em> of it, so any changes it makes to the variable disappear once the function returns.</li> <li>If a variable has global scope, it is accessible read-write to functions whether it is exported or not.</li> </ol> <h3 id="variables-arrays">
 Arrays</h3> <p><code>fish</code> can store a list of multiple strings inside of a variable. To access one element of an array, use the index of the element inside of square brackets, like this:</p> <p><code>echo $PATH[3]</code></p> <p>Note that array indices start at 1 in <code>fish</code>, not 0, as is more common in other languages. This is because many common Unix tools like <code>seq</code> are more suited to such use. An invalid index is silently ignored resulting in no value being substituted (not an empty string).</p> <p>If you do not use any brackets, all the elements of the array will be written as separate items. This means you can easily iterate over an array using this syntax:</p> <pre class="fish" data-language="fish">
for i in $PATH; echo $i is in the path; end
</pre>
<p>To create a variable <code>smurf</code>, containing the items <code>blue</code> and <code>small</code>, simply write:</p> <pre class="fish" data-language="fish">
set smurf blue small
</pre>
<p>It is also possible to set or erase individual elements of an array:</p> <pre class="fish" data-language="fish">
# Set smurf to be an array with the elements 'blue' and 'small'
set smurf blue small

# Change the second element of smurf to 'evil'
set smurf[2] evil

# Erase the first element
set -e smurf[1]

# Output 'evil'
echo $smurf
</pre>
<p>If you specify a negative index when expanding or assigning to an array variable, the index will be calculated from the end of the array. For example, the index -1 means the last index of an array.</p> <p>A range of indices can be specified, see <a href="#expand-index-range">index range expansion</a> for details.</p> <p>All arrays are one-dimensional and cannot contain other arrays, although it is possible to fake nested arrays using the dereferencing rules of <a href="#expand-variable">variable expansion</a>.</p> <p>When an array is exported as an environment variable, it is either space or colon delimited, depending on whether it is a path variable: </p> <pre class="fish" data-language="fish">
set -x smurf blue small
set -x smurf_PATH forest mushroom
env | grep smurf

# smurf=blue small
# smurf_PATH=forest:mushroom

</pre>
<p><code>fish</code> automatically creates arrays from all environment variables whose name ends in PATH, by splitting them on colons. Other variables are not automatically split.</p> <h3 id="variables-path">
 PATH variables</h3> <p>Path variables are a special kind of variable used to support colon-delimited path lists including PATH, CDPATH, MANPATH, PYTHONPATH, etc. All variables that end in <code>PATH</code> (case-sensitive) become PATH variables.</p> <p>PATH variables act as normal arrays, except they are are implicitly joined and split on colons. </p> <pre class="fish" data-language="fish">
set MYPATH 1 2 3
echo "$MYPATH"
# 1:2:3
set MYPATH "$MYPATH:4:5"
echo $MYPATH
# 1 2 3 4 5
echo "$MYPATH"
# 1:2:3:4:5
</pre>
<p>Variables can be marked or unmarked as PATH variables via the <code>--path</code> and <code>--unpath</code> options to <code>set</code>.</p> <h3 id="variables-special">
 Special variables</h3> <p>The user can change the settings of <code>fish</code> by changing the values of certain variables.</p> <ul> <li>A large number of variable starting with the prefixes <code>fish_color</code> and <code>fish_pager_color.</code> See <a href="#variables-color">Variables for changing highlighting colors</a> for more information.</li> <li>
<code>fish_emoji_width</code> controls the computed width of certain characters, in particular emoji, whose rendered width varies across terminal emulators. This should be set to 1 if your terminal emulator renders emoji single-width, or 2 if double-width. Set this only if you see graphical glitching when printing emoji.</li> <li>
<code>fish_ambiguous_width</code> controls the computed width of ambiguous East Asian characters. This should be set to 1 if your terminal emulator renders these characters as single-width (typical), or 2 if double-width.</li> <li>
<code>fish_escape_delay_ms</code> overrides the default timeout of 300ms (default key bindings) or 10ms (vi key bindings) after seeing an escape character before giving up on matching a key binding. See the documentation for the <a href="bind/#special-case-escape">bind</a> builtin command. This delay facilitates using escape as a meta key.</li> <li>
<code>fish_greeting</code>, the greeting message printed on startup.</li> <li>
<code>fish_history</code>, the current history session name. If set, all subsequent commands within an interactive fish session will be logged to a separate file identified by the value of the variable. If unset, or set to <code>default</code>, the default session name "fish" is used. If set to an empty string, history is not saved to disk (but is still available within the interactive session).</li> <li>
<code>fish_user_paths</code>, an array of directories that are prepended to <code>PATH</code>. This can be a universal variable.</li> <li>
<code>umask</code>, the current file creation mask. The preferred way to change the umask variable is through the <a href="commands/#umask">umask function</a>. An attempt to set umask to an invalid value will always fail.</li> <li>
<code>BROWSER</code>, the user's preferred web browser. If this variable is set, fish will use the specified browser instead of the system default browser to display the fish documentation.</li> <li>
<code>CDPATH</code>, an array of directories in which to search for the new directory for the <code>cd</code> builtin.</li> <li>
<code>LANG</code>, <code>LC_ALL</code>, <code>LC_COLLATE</code>, <code>LC_CTYPE</code>, <code>LC_MESSAGES</code>, <code>LC_MONETARY</code>, <code>LC_NUMERIC</code> and <code>LC_TIME</code> set the language option for the shell and subprograms. See the section <a href="#variables-locale">Locale variables</a> for more information.</li> <li>
<code>PATH</code>, an array of directories in which to search for commands</li> </ul> <p><code>fish</code> also sends additional information to the user through the values of certain environment variables. The user cannot change the values of most of these variables.</p> <ul> <li>
<code>_</code>, the name of the currently running command.</li> <li>
<code>argv</code>, an array of arguments to the shell or function. <code>argv</code> is only defined when inside a function call, or if fish was invoked with a list of arguments, like <code>fish myscript.fish foo bar</code>. This variable can be changed by the user.</li> <li>
<code>history</code>, an array containing the last commands that were entered.</li> <li>
<code>HOME</code>, the user's home directory. This variable can be changed by the user.</li> <li>
<code>hostname</code>, the machine's hostname.</li> <li>
<code>IFS</code>, the internal field separator that is used for word splitting with the <a href="commands/#read">read builtin</a>. Setting this to the empty string will also disable line splitting in <a href="#expand-command-substitution">command substitution</a>. This variable can be changed by the user.</li> <li>
<code>PWD</code>, the current working directory.</li> <li>
<code>status</code>, the <a href="#variables-status">exit status</a> of the last foreground job to exit. If the job was terminated through a signal, the exit status will be 128 plus the signal number.</li> <li>
<code>USER</code>, the current username. This variable can be changed by the user.</li> <li>
<code>CMD_DURATION</code>, the runtime of the last command in milliseconds.</li> <li>
<code>version</code>, the version of the currently running fish (also available as <code>FISH_VERSION</code> for backward compatibility).</li> <li>
<code>SHLVL</code>, the level of nesting of shells</li> <li>
<code>COLUMNS</code> and <code>LINES</code>, the current size of the terminal in height and width. These values are only used by fish if the operating system does not report the size of the terminal. Both variables must be set in that case otherwise a default of 80x24 will be used. They are updated when the window size changes.</li> </ul> <p>The names of these variables are mostly derived from the csh family of shells and differ from the ones used by Bourne style shells such as bash.</p> <p>Variables whose name are in uppercase are generally exported to the commands started by fish, while those in lowercase are not exported (<code>CMD_DURATION</code> is an exception, for historical reasons). This rule is not enforced by fish, but it is good coding practice to use casing to distinguish between exported and unexported variables. <code>fish</code> also uses several variables internally. Such variables are prefixed with the string <code>__FISH</code> or <code>__fish.</code> These should never be used by the user. Changing their value may break fish.</p> <h3 id="variables-status">
 The status variable</h3> <p>Whenever a process exits, an exit status is returned to the program that started it (usually the shell). This exit status is an integer number, which tells the calling application how the execution of the command went. In general, a zero exit status means that the command executed without problem, but a non-zero exit status means there was some form of problem.</p> <p>Fish stores the exit status of the last process in the last job to exit in the <code>status</code> variable.</p> <p>If <code>fish</code> encounters a problem while executing a command, the status variable may also be set to a specific value:</p> <ul> <li>0 is generally the exit status of fish commands if they successfully performed the requested operation.</li> <li>1 is generally the exit status of fish commands if they failed to perform the requested operation.</li> <li>121 is generally the exit status of fish commands if they were supplied with invalid arguments.</li> <li>123 means that the command was not executed because the command name contained invalid characters.</li> <li>124 means that the command was not executed because none of the wildcards in the command produced any matches.</li> <li>125 means that while an executable with the specified name was located, the operating system could not actually execute the command.</li> <li>126 means that while a file with the specified name was located, it was not executable.</li> <li>127 means that no function, builtin or command with the given name could be located.</li> </ul> <p>If a process exits through a signal, the exit status will be 128 plus the number of the signal.</p> <h3 id="variables-color">
 Variables for changing highlighting colors</h3> <p>The colors used by fish for syntax highlighting can be configured by changing the values of a various variables. The value of these variables can be one of the colors accepted by the <a href="commands/#set_color">set_color</a> command. The <code>--bold</code> or <code>-b</code> switches accepted by <code>set_color</code> are also accepted.</p> <p>The following variables are available to change the highlighting colors in fish:</p> <ul> <li>
<code>fish_color_normal</code>, the default color</li> <li>
<code>fish_color_command</code>, the color for commands</li> <li>
<code>fish_color_quote</code>, the color for quoted blocks of text</li> <li>
<code>fish_color_redirection</code>, the color for IO redirections</li> <li>
<code>fish_color_end</code>, the color for process separators like ';' and '&amp;'</li> <li>
<code>fish_color_error</code>, the color used to highlight potential errors</li> <li>
<code>fish_color_param</code>, the color for regular command parameters</li> <li>
<code>fish_color_comment</code>, the color used for code comments</li> <li>
<code>fish_color_match</code>, the color used to highlight matching parenthesis</li> <li>
<code>fish_color_selection</code>, the color used when selecting text (in vi visual mode)</li> <li>
<code>fish_color_search_match</code>, used to highlight history search matches and the selected pager item (must be a background)</li> <li>
<code>fish_color_operator</code>, the color for parameter expansion operators like '*' and '~'</li> <li>
<code>fish_color_escape</code>, the color used to highlight character escapes like '\n' and '\x70'</li> <li>
<code>fish_color_cwd</code>, the color used for the current working directory in the default prompt</li> <li>
<code>fish_color_autosuggestion</code>, the color used for autosuggestions</li> <li>
<code>fish_color_user</code>, the color used to print the current username in some of fish default prompts</li> <li>
<code>fish_color_host</code>, the color used to print the current host system in some of fish default prompts</li> <li>
<code>fish_color_cancel</code>, the color for the '^C' indicator on a canceled command</li> </ul> <p>Additionally, the following variables are available to change the highlighting in the completion pager:</p> <ul> <li>
<code>fish_pager_color_prefix</code>, the color of the prefix string, i.e. the string that is to be completed</li> <li>
<code>fish_pager_color_completion</code>, the color of the completion itself</li> <li>
<code>fish_pager_color_description</code>, the color of the completion description</li> <li>
<code>fish_pager_color_progress</code>, the color of the progress bar at the bottom left corner</li> <li>
<code>fish_pager_color_secondary</code>, the background color of the every second completion</li> </ul> <p>Example:</p> <p>To make errors highlighted and red, use:</p> <pre class="fish" data-language="fish">
set fish_color_error red --bold
</pre>
<h3 id="variables-locale">
 Locale variables</h3> <p>The most common way to set the locale to use a command like 'set -x LANG en_GB.utf8', which sets the current locale to be the English language, as used in Great Britain, using the UTF-8 character set. For a list of available locales, use 'locale -a'.</p> <p><code>LANG</code>, <code>LC_ALL</code>, <code>LC_COLLATE</code>, <code>LC_CTYPE</code>, <code>LC_MESSAGES</code>, <code>LC_MONETARY</code>, <code>LC_NUMERIC</code> and <code>LC_TIME</code> set the language option for the shell and subprograms. These variables work as follows: <code>LC_ALL</code> forces all the aspects of the locale to the specified value. If <code>LC_ALL</code> is set, all other locale variables will be ignored. The other <code>LC_</code> variables set the specified aspect of the locale information. <code>LANG</code> is a fallback value, it will be used if none of the <code>LC_</code> variables are specified.</p> <h2 id="builtin-overview">
 Builtin commands</h2> <p>Many other shells have a large library of builtin commands. Most of these commands are also available as standalone commands, but have been implemented in the shell anyway. To avoid code duplication, and to avoid the confusion of subtly differing versions of the same command, <code>fish</code> generally only implements builtins for actions which cannot be performed by a regular command.</p> <p>For a list of all builtins, functions and commands shipped with fish, see the <a href="#toc-commands">table of contents</a>. The documentation is also available by using the <code>--help</code> switch of the command.</p> <h2 id="editor">
 Command line editor</h2> <p>The <code>fish</code> editor features copy and paste, a searchable history and many editor functions that can be bound to special keyboard shortcuts.</p> <p>Similar to bash, fish has Emacs and Vi editing modes. The default editing mode is Emacs. You can switch to Vi mode with <code>fish_vi_key_bindings</code> and switch back with <code>fish_default_key_bindings</code>. You can also make your own key bindings by creating a function and setting $fish_key_bindings to its name. For example:</p> <pre class="fish" data-language="fish">
function hybrid_bindings --description "Vi-style bindings that inherit emacs-style bindings in all modes"
    for mode in default insert visual
        fish_default_key_bindings -M $mode
    end
    fish_vi_key_bindings --no-erase
end
set -g fish_key_bindings hybrid_bindings
</pre>
<h3 id="shared-binds">
 Shared bindings</h3> <p>Some bindings are shared between emacs- and vi-mode because they aren't text editing bindings or because what Vi/Vim does for a particular key doesn't make sense for a shell.</p> <ul> <li>
<span class="key"><b>Tab</b></span> <a href="#completion">completes</a> the current token. <span class="key"><em>Shift</em><span>-</span><b> Tab</b></span> completes the current token and starts the pager's search mode.</li> <li>
<span class="key"><em>Alt</em><span>-</span><b>←</b></span> and <span class="key"><em>Alt</em><span>-</span><b>→</b></span> move the cursor one word left or right, or moves forward/backward in the directory history if the command line is empty. If the cursor is already at the end of the line, and an autosuggestion is available, <span class="key"><em>Alt</em><span>-</span><b>→</b></span> (or <span class="key"><em>Alt</em><span>-</span><b>F</b></span>) accepts the first word in the suggestion.</li> <li>
<span class="key"><b>↑</b></span> and <span class="key"><b>↓</b></span> (or <span class="key"><em>Control</em><span>-</span><b>P</b></span> and <span class="key"><em>Control</em><span>-</span><b>N</b></span> for emacs aficionados) search the command history for the previous/next command containing the string that was specified on the commandline before the search was started. If the commandline was empty when the search started, all commands match. See the <a href="#history">history</a> section for more information on history searching.</li> <li>
<span class="key"><em>Alt</em><span>-</span><b>↑</b></span> and <span class="key"><em>Alt</em><span>-</span><b>↓</b></span> search the command history for the previous/next token containing the token under the cursor before the search was started. If the commandline was not on a token when the search started, all tokens match. See the <a href="#history">history</a> section for more information on history searching.</li> <li>
<span class="key"><em>Control</em><span>-</span><b>C</b></span> cancels the entire line.</li> <li>
<span class="key"><em>Control</em><span>-</span><b>D</b></span> delete one character to the right of the cursor. If the command line is empty, <span class="key"><em>Control</em><span>-</span><b>D</b></span> will exit fish.</li> <li>
<span class="key"><em>Control</em><span>-</span><b>U</b></span> moves contents from the beginning of line to the cursor to the <a href="#killring">killring</a>.</li> <li>
<span class="key"><em>Control</em><span>-</span><b>L</b></span> clears and repaints the screen.</li> <li>
<span class="key"><em>Control</em><span>-</span><b>W</b></span> moves the previous path component (everything up to the previous "/") to the <a href="#killring">killring</a>.</li> <li>
<span class="key"><em>Control</em><span>-</span><b>X</b></span> copies the current buffer to the system's clipboard, <span class="key"><em>Control</em><span>-</span><b>V</b></span> inserts the clipboard contents.</li> <li>
<span class="key"><em>Alt</em><span>-</span><b>d</b></span> moves the next word to the <a href="#killring">killring</a>.</li> <li>
<span class="key"><em>Alt</em><span>-</span><b>h</b></span> (or <span class="key"><b>F1</b></span>) shows the manual page for the current command, if one exists.</li> <li>
<span class="key"><em>Alt</em><span>-</span><b>l</b></span> lists the contents of the current directory, unless the cursor is over a directory argument, in which case the contents of that directory will be listed.</li> <li>
<span class="key"><em>Alt</em><span>-</span><b>p</b></span> adds the string '<code>| less;</code>' to the end of the job under the cursor. The result is that the output of the command will be paged.</li> <li>
<span class="key"><em>Alt</em><span>-</span><b>w</b></span> prints a short description of the command under the cursor.</li> <li>
<span class="key"><em>Alt</em><span>-</span><b>e</b></span> edit the current command line in an external editor. The editor is chosen from the first available of the <code>$VISUAL</code> or <code>$EDITOR</code> variables.</li> <li>
<span class="key"><em>Alt</em><span>-</span><b>v</b></span> Same as <span class="key"><em>Alt</em><span>-</span><b>e</b></span>.</li> </ul> <h3 id="emacs-mode">
 Emacs mode commands</h3> <ul> <li>
<span class="key"><b>Home</b></span> or <span class="key"><em>Control</em><span>-</span><b>A</b></span> moves the cursor to the beginning of the line.</li> <li>
<span class="key"><b>End</b></span> or <span class="key"><em>Control</em><span>-</span><b>E</b></span> moves to the end of line. If the cursor is already at the end of the line, and an autosuggestion is available, <span class="key"><b>End</b></span> or <span class="key"><em>Control</em><span>-</span><b>E</b></span> accepts the autosuggestion.</li> <li>
<span class="key"><b>←</b></span> (or <span class="key"><em>Control</em><span>-</span><b>B</b></span>) and <span class="key"><b>→</b></span> (or <span class="key"><em>Control</em><span>-</span><b>F</b></span>) move the cursor left or right by one character. If the cursor is already at the end of the line, and an autosuggestion is available, the <span class="key"><b>→</b></span> key and the <span class="key"><em>Control</em><span>-</span><b>F</b></span> combination accept the suggestion.</li> <li>
<span class="key"><b>Delete</b></span> and <span class="key"><b>Backspace</b></span> removes one character forwards or backwards respectively.</li> <li>
<span class="key"><em>Control</em><span>-</span><b>K</b></span> moves contents from the cursor to the end of line to the <a href="#killring">killring</a>.</li> <li>
<span class="key"><em>Alt</em><span>-</span><b>c</b></span> capitalizes the current word.</li> <li>
<span class="key"><em>Alt</em><span>-</span><b>u</b></span> makes the current word uppercase.</li> <li>
<span class="key"><em>Control</em><span>-</span><b>t</b></span> transposes the last two characters</li> <li>
<span class="key"><em>Alt</em><span>-</span><b>t</b></span> transposes the last two words</li> </ul> <p>You can change these key bindings using the <a href="commands/#bind">bind</a> builtin command.</p> <h3 id="vi-mode">
 Vi mode commands</h3> <p>Vi mode allows for the use of Vi-like commands at the prompt. Initially, <a href="#vi-mode-insert">insert mode</a> is active. <span class="key"><b>Escape</b></span> enters <a href="#vi-mode-command">command mode</a>. The commands available in command, insert and visual mode are described below. Vi mode shares <a href="#shared-binds">some bindings</a> with <a href="#emacs-mode">Emacs mode</a>.</p> <p>It is also possible to add all emacs-mode bindings to vi-mode by using something like</p> <pre class="fish" data-language="fish">
function fish_user_key_bindings
    # Execute this once per mode that emacs bindings should be used in
    fish_default_key_bindings -M insert
    # Without an argument, fish_vi_key_bindings will default to
    # resetting all bindings.
    # The argument specifies the initial mode (insert, "default" or visual).
    fish_vi_key_bindings insert
end
</pre>
<p>When in vi-mode, the <a href="fish_mode_prompt/"><code>fish_mode_prompt</code></a> function will display a mode indicator to the left of the prompt. The <code>fish_vi_cursor</code> function will be used to change the cursor's shape depending on the mode in supported terminals. To disable this feature, override it with an empty function. To display the mode elsewhere (like in your right prompt), use the output of the <code>fish_default_mode_prompt</code> function.</p> <h3 id="vi-mode-command">
 Command mode</h3> <p>Command mode is also known as normal mode.</p> <ul> <li>
<span class="key"><b>h</b></span> moves the cursor left.</li> <li>
<span class="key"><b>l</b></span> moves the cursor right.</li> <li>
<span class="key"><b>i</b></span> enters <a href="#vi-mode-insert">insert mode</a> at the current cursor position.</li> <li>
<span class="key"><b>v</b></span> enters <a href="#vi-mode-visual">visual mode</a> at the current cursor position.</li> <li>
<span class="key"><b>a</b></span> enters <a href="#vi-mode-insert">insert mode</a> after the current cursor position.</li> <li>
<span class="key"><em>Shift</em><span>-</span><b>A</b></span> enters <a href="#vi-mode-insert">insert mode</a> at the end of the line.</li> <li>
<span class="key"><b>0</b></span> (zero) moves the cursor to beginning of line (remaining in command mode).</li> <li>
<span class="key"><b>d</b></span><span class="key"><b>d</b></span> deletes the current line and moves it to the <a href="#killring">killring</a>.</li> <li>
<span class="key"><em>Shift</em><span>-</span><b>D</b></span> deletes text after the current cursor position and moves it to the <a href="#killring">killring</a>.</li> <li>
<span class="key"><b>p</b></span> pastes text from the <a href="#killring">killring</a>.</li> <li>
<span class="key"><b>u</b></span> search history backwards.</li> <li>
<span class="key"><b>[</b></span> and <span class="key"><b>]</b></span> search the command history for the previous/next token containing the token under the cursor before the search was started. See the <a href="#history">history</a> section for more information on history searching.</li> <li>
<span class="key"><b>Backspace</b></span> moves the cursor left.</li> </ul> <h3 id="vi-mode-insert">
 Insert mode</h3> <ul> <li>
<span class="key"><b>Escape</b></span> enters <a href="#vi-mode-command">command mode</a>.</li> <li>
<span class="key"><b>Backspace</b></span> removes one character to the left.</li> </ul> <h3 id="vi-mode-visual">
 Visual mode</h3> <ul> <li>
<span class="key"><b>←</b></span> and <span class="key"><b>→</b></span> extend the selection backward/forward by one character.</li> <li>
<span class="key"><b>b</b></span> and <span class="key"><b>w</b></span> extend the selection backward/forward by one word.</li> <li>
<span class="key"><b>d</b></span> and <span class="key"><b>x</b></span> move the selection to the <a href="#killring">killring</a> and enter <a href="#vi-mode-command">command mode</a>.</li> <li>
<span class="key"><b>Escape</b></span> and <span class="key"><em>Control</em><span>-</span><b>C</b></span> enter <a href="#vi-mode-command">command mode</a>.</li> </ul> <h3 id="killring">
 Copy and paste (Kill Ring)</h3> <p><code>fish</code> uses an Emacs style kill ring for copy and paste functionality. Use <span class="key"><em>Control</em><span>-</span><b>K</b></span> to cut from the current cursor position to the end of the line. The string that is cut (a.k.a. killed) is inserted into a linked list of kills, called the kill ring. To paste the latest value from the kill ring use <span class="key"><em>Control</em><span>-</span><b>Y</b></span>. After pasting, use <span class="key"><em>Alt</em><span>-</span><b>Y</b></span> to rotate to the previous kill.</p> <p>Copy and paste from outside are also supported, both via the <span class="key"><em>Control</em><span>-</span><b>X</b></span> / <span class="key"><em>Control</em><span>-</span><b>V</b></span> bindings and via the terminal's paste function, for which fish enables "Bracketed Paste Mode". When pasting inside single quotes, pasted single quotes and backslashes are automatically escaped so that the result can be used as a single token simply by closing the quote after.</p> <h3 id="history-search">
 Searchable history</h3> <p>After a command has been entered, it is inserted at the end of a history list. Any duplicate history items are automatically removed. By pressing the up and down keys, the user can search forwards and backwards in the history. If the current command line is not empty when starting a history search, only the commands containing the string entered into the command line are shown.</p> <p>By pressing <span class="key"><em>Alt</em><span>-</span><b>↑</b></span> and <span class="key"><em>Alt</em><span>-</span><b>↓</b></span>, a history search is also performed, but instead of searching for a complete commandline, each commandline is broken into separate elements just like it would be before execution, and the history is searched for an element matching that under the cursor.</p> <p>History searches can be aborted by pressing the escape key.</p> <p>Prefixing the commandline with a space will prevent the entire line from being stored in the history.</p> <p>The command history is stored in the file <code>~/.local/share/fish/fish_history</code> (or <code>$XDG_DATA_HOME/fish/fish_history</code> if that variable is set) by default. However, you can set the <code>fish_history</code> environment variable to change the name of the history session (resulting in a <code>&lt;session&gt;_history</code> file); both before starting the shell and while the shell is running.</p> <p>Examples:</p> <p>To search for previous entries containing the word 'make', type <code>make</code> in the console and press the up key.</p> <p>If the commandline reads <code>cd m</code>, place the cursor over the <code>m</code> character and press <span class="key"><em>Alt</em><span>-</span><b>↑</b></span> to search for previously typed words containing 'm'.</p> <h3 id="multiline">
 Multiline editing</h3> <p>The fish commandline editor can be used to work on commands that are several lines long. There are three ways to make a command span more than a single line:</p> <ul> <li>Pressing the <span class="key"><b>Enter</b></span> key while a block of commands is unclosed, such as when one or more block commands such as <code>for</code>, <code>begin</code> or <code>if</code> do not have a corresponding <code>end</code> command.</li> <li>Pressing <span class="key"><em>Alt</em><span>-</span><b>Enter</b></span> instead of pressing the <span class="key"><b>Enter</b></span> key.</li> <li>By inserting a backslash (<code>\</code>) character before pressing the <span class="key"><b>Enter</b></span> key, escaping the newline.</li> </ul> <p>The fish commandline editor works exactly the same in single line mode and in multiline mode. To move between lines use the left and right arrow keys and other such keyboard shortcuts.</p> <h2 id="job-control">
 Running multiple programs</h2> <p>Normally when <code>fish</code> starts a program, this program will be put in the foreground, meaning it will take control of the terminal and <code>fish</code> will be stopped until the program finishes. Sometimes this is not desirable. For example, you may wish to start an application with a graphical user interface from the terminal, and then be able to continue using the shell. In such cases, there are several ways in which the user can change fish's behavior.</p> <ol type="1"> <li>By ending a command with the <code>&amp;</code> (ampersand) symbol, the user tells <code>fish</code> to put the specified command into the background. A background process will be run simultaneous with <code>fish</code>. <code>fish</code> will retain control of the terminal, so the program will not be able to read from the keyboard.</li> <li>By pressing <span class="key"><em>Control</em><span>-</span><b>Z</b></span>, the user stops a currently running foreground program and returns control to <code>fish</code>. Some programs do not support this feature, or remap it to another key. GNU Emacs uses <span class="key"><em>Control</em><span>-</span><b>X</b></span> <span class="key"><b>z</b></span> to stop running.</li> <li>By using the <a href="commands/#fg"><code>fg</code></a> and <a href="commands/#bg"><code>bg</code></a> builtin commands, the user can send any currently running job into the foreground or background.</li> </ol> <p>Note that functions cannot be started in the background. Functions that are stopped and then restarted in the background using the <code>bg</code> command will not execute correctly.</p> <h2 id="initialization">
 Initialization files</h2> <p>On startup, Fish evaluates a number of configuration files, which can be used to control the behavior of the shell. The location of these configuration variables is controlled by a number of environment variables, and their default or usual location is given below.</p> <p>Configuration files are evaluated in the following order:</p>
<ul> <li>Configuration shipped with fish, which should not be edited, in <code>$__fish_data_dir/config.fish</code> (usually <code>/usr/share/fish/config.fish</code>).</li> <li>System-wide configuration files, where administrators can include initialization that should be run for all users on the system - similar to <code>/etc/profile</code> for POSIX-style shells - in <code>$__fish_sysconf_dir</code> (usually <code>/etc/fish/config.fish</code>);</li> <li>
<p class="startli">Configuration snippets in files ending in <code>.fish</code>, in the directories:</p>
<ul> <li>
<code>$__fish_config_dir/conf.d</code> (by default, <code>~/.config/fish/conf.d/</code>)</li> <li>
<code>$__fish_sysconf_dir/conf.d</code> (by default, <code>/etc/fish/conf.d</code>)</li> <li>
<code>/usr/share/fish/vendor_conf.d</code> (set at compile time; by default, <code>$__fish_data_dir/conf.d</code>)</li> </ul> <p class="startli">If there are multiple files with the same name in these directories, only the first will be executed. They are executed in order of their filename, sorted (like globs) in a natural order (i.e. "01" sorts before "2").</p> </li> <li>User initialization, usually in <code>~/.config/fish/config.fish</code> (controlled by the <code>XDG_CONFIG_HOME</code> environment variable, and accessible as <code>$__fish_config_dir</code>).</li> </ul> <p>These paths are controlled by parameters set at build, install, or run time, and may vary from the defaults listed above.</p> <p>This wide search may be confusing. If you are unsure where to put your own customisations, use <code>~/.config/fish/config.fish</code>.</p> <p>Note that ~/.config/fish/config.fish is sourced <em>after</em> the snippets. This is so users can copy snippets and override some of their behavior.</p> <p>These files are all executed on the startup of every shell. If you want to run a command only on starting an interactive shell, use the exit status of the command <code>status --is-interactive</code> to determine if the shell is interactive. If you want to run a command only when using a login shell, use <code>status --is-login</code> instead. This will speed up the starting of non-interactive or non-login shells.</p> <p>If you are developing another program, you may wish to install configuration which is run for all users of the fish shell on a system. This is discouraged; if not carefully written, they may have side-effects or slow the startup of the shell. Additionally, users of other shells will not benefit from the Fish-specific configuration. However, if they are absolutely required, you may install them to the "vendor" configuration directory. As this path may vary from system to system, the <code>pkgconfig</code> framework should be used to discover this path with the output of <code>pkg-config --variable confdir fish</code>.</p> <p>Examples:</p> <p>If you want to add the directory <code>~/linux/bin</code> to your PATH variable when using a login shell, add the following to your <code>~/.config/fish/config.fish</code> file:</p> <pre class="fish" data-language="fish">
if status --is-login
    set -x PATH $PATH ~/linux/bin
end
</pre>
<p>If you want to run a set of commands when <code>fish</code> exits, use an <a href="#event">event handler</a> that is triggered by the exit of the shell:</p> <pre class="fish" data-language="fish">
function on_exit --on-event fish_exit
    echo fish is now exiting
end
</pre>
<h2 id="featureflags">
 Future feature flags</h2> <p>Feature flags are how fish stages changes that might break scripts. Breaking changes are introduced as opt-in, in a few releases they become opt-out, and eventually the old behavior is removed.</p> <p>You can see the current list of features via <code>status features</code>:</p> <pre class="fish" data-language="fish">
&gt; status features
stderr-nocaret  on     3.0      ^ no longer redirects stderr
qmark-noglob    off    3.0      ? no longer globs
</pre>
<p>There are two breaking changes in fish 3.0: caret <code>^</code> no longer redirects stderr, and question mark <code>?</code> is no longer a glob. These changes are off by default. They can be enabled on a per session basis:</p> <pre class="fish" data-language="fish">
&gt; fish --features qmark-noglob,stderr-nocaret
</pre>
<p>or opted into globally for a user:</p> <pre class="fish" data-language="fish">
&gt; set -U fish_features stderr-nocaret qmark-noglob
</pre>
<h2 id="other">
 Other features</h2> <h3 id="color">
 Syntax highlighting</h3> <p><code>fish</code> interprets the command line as it is typed and uses syntax highlighting to provide feedback to the user. The most important feedback is the detection of potential errors. By default, errors are marked red.</p> <p>Detected errors include:</p> <ul> <li>Non existing commands.</li> <li>Reading from or appending to a non existing file.</li> <li>Incorrect use of output redirects</li> <li>Mismatched parenthesis</li> </ul> <p>When the cursor is over a parenthesis or a quote, <code>fish</code> also highlights its matching quote or parenthesis.</p> <p>To customize the syntax highlighting, you can set the environment variables listed in the <a href="/#variables-color">Variables for changing highlighting colors</a> section.</p> <h3 id="title">
 Programmable title</h3> <p>When using most virtual terminals, it is possible to set the message displayed in the titlebar of the terminal window. This can be done automatically in fish by defining the <code>fish_title</code> function. The <code>fish_title</code> function is executed before and after a new command is executed or put into the foreground and the output is used as a titlebar message. The <code>status current-command</code> builtin will always return the name of the job to be put into the foreground (or 'fish' if control is returning to the shell) when the <code>fish_prompt</code> function is called. The first argument to fish_title will contain the most recently executed foreground command as a string, starting with fish 2.2.</p> <p>Examples: The default <code>fish</code> title is</p> <pre class="fish" data-language="fish">
function fish_title
    echo (status current-command) ' '
    pwd
end
</pre>
<p>To show the last command in the title:</p> <pre class="fish" data-language="fish">
function fish_title
    echo $argv[1]
end
</pre>
<h3 id="prompt">
 Programmable prompt</h3> <p>When fish waits for input, it will display a prompt by evaluating the <code>fish_prompt</code> and <code>fish_right_prompt</code> functions. The output of the former is displayed on the left and the latter's output on the right side of the terminal. The output of <code>fish_mode_prompt</code> will be prepended on the left, though the default function only does this when in <a href="/#vi-mode">vi-mode</a>.</p> <h3 id="greeting">
 Configurable greeting</h3> <p>If a function named <code>fish_greeting</code> exists, it will be run when entering interactive mode. Otherwise, if an environment variable named <code>fish_greeting</code> exists, it will be printed.</p> <h3 id="private-mode">
 Private mode</h3> <p>fish supports launching in private mode via <code>fish --private</code> (or <code>fish -P</code> for short). In private mode, old history is not available and any interactive commands you execute will not be appended to the global history file, making it useful both for avoiding inadvertently leaking personal information (e.g. for screencasts) and when dealing with sensitive information to prevent it being persisted to disk. You can query the global variable <code>fish_private_mode</code> (<code>if set -q fish_private_mode ...</code>) if you would like to respect the user's wish for privacy and alter the behavior of your own fish scripts.</p> <h3 id="event">
 Event handlers</h3> <p>When defining a new function in fish, it is possible to make it into an event handler, i.e. a function that is automatically run when a specific event takes place. Events that can trigger a handler currently are:</p> <ul> <li>When a signal is delivered</li> <li>When a process or job exits</li> <li>When the value of a variable is updated</li> <li>When the prompt is about to be shown</li> <li>When a command lookup fails</li> </ul> <p>Example:</p> <p>To specify a signal handler for the WINCH signal, write:</p> <pre class="fish" data-language="fish">
function my_signal_handler --on-signal WINCH
    echo Got WINCH signal!
end
</pre>
<p>Please note that event handlers only become active when a function is loaded, which means you might need to otherwise <a href="commands/#source">source</a> or execute a function instead of relying on <a href="#syntax-function-autoloading">autoloading</a>. One approach is to put it into your <a href="/#initialization">initialization file</a>.</p> <p>For more information on how to define new event handlers, see the documentation for the <a href="commands/#function">function</a> command.</p> <h3 id="debugging">
 Debugging fish scripts</h3> <p>Fish includes a built in debugging facility. The debugger allows you to stop execution of a script at an arbitrary point. When this happens you are presented with an interactive prompt. At this prompt you can execute any fish command (there are no debug commands as such). For example, you can check or change the value of any variables using <code>printf</code> and <code>set</code>. As another example, you can run <code>status print-stack-trace</code> to see how this breakpoint was reached. To resume normal execution of the script, simply type <code>exit</code> or [ctrl-D].</p> <p>To start a debug session simply run the builtin command <code>breakpoint</code> at the point in a function or script where you wish to gain control. Also, the default action of the TRAP signal is to call this builtin. So a running script can be debugged by sending it the TRAP signal with the <code>kill</code> command. Once in the debugger, it is easy to insert new breakpoints by using the funced function to edit the definition of a function.</p> <p>Note: At the moment the debug prompt is identical to your normal fish prompt. This can make it hard to recognize that you've entered a debug session. Issue 1310 is open to improve this.</p> <h2 id="more-help">
 Further help and development</h2> <p>If you have a question not answered by this documentation, there are several avenues for help:</p> <ol type="1"> <li>The official mailing list at <a href="https://lists.sourceforge.net/lists/listinfo/fish-users" target="_blank">fish-users@lists.sourceforge.net</a>
</li> <li>The Internet Relay Chat channel, #fish on <code>irc.oftc.net</code>
</li> <li>The <a href="https://github.com/fish-shell/fish-shell/" target="_blank">project GitHub page</a>
</li> </ol> <p>If you have an improvement for fish, you can submit it via the mailing list or the GitHub page.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2009 Axel Liljencrantz<br>Licensed under the GNU General Public License, version 2.<br>
    <a href="https://fishshell.com/docs/3.0/index.html" class="_attribution-link" target="_blank">https://fishshell.com/docs/3.0/index.html</a>
  </p>
</div>

				
			</div>
			<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
</amp-auto-ads>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
