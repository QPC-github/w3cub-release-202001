
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Perf_hooks - Node.js - W3cubDocs</title>
  
  <meta name="description" content="The Performance Timing API provides an implementation of the W3C Performance Timeline specification. The purpose of the API is to support collection &hellip;">
  <meta name="keywords" content="performance, timing, api, perf, hooks, -, node, js">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/node/perf_hooks/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" integrity="sha256-6/DH7X+2hvUPElJfGsvzm+tgIpmM9zjbYxnpsr6gR1A=" crossorigin="anonymous" href="/assets/application-ebf0c7ed7fb686f50f12525f1acbf39beb6022998cf738db6319e9b2bea04750.css">
  <script type="text/javascript" src="/assets/application-db285287b40ed28fac520fcfd75d7d874692b647b5b5e05968c741dda5de4148.js" integrity="sha256-2yhSh7QO0o+sUg/P1119h0aStke1teBZaMdB3aXeQUg=" crossorigin="anonymous"></script>
  <script src="/json/node.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2572770204602497",
            enable_page_level_ads: true
        });
  </script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/node/" class="_nav-link" title="" style="margin-left:0;">Node.js</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _node">
				
				
<h1 id="perf_hooks_performance_timing_api">Performance Timing API</h1> 
<div class="api_stability api_stability_1">
<a href="https://nodejs.org/dist/latest-v12.x/docs/api/documentation.html#documentation_stability_index" target="_blank">Stability: 1</a> - Experimental</div>
 <p>The Performance Timing API provides an implementation of the <a href="https://w3c.github.io/performance-timeline/" target="_blank">W3C Performance Timeline</a> specification. The purpose of the API is to support collection of high resolution performance metrics. This is the same Performance API as implemented in modern Web browsers.</p> <pre data-language="js">const { PerformanceObserver, performance } = require('perf_hooks');

const obs = new PerformanceObserver((items) =&gt; {
  console.log(items.getEntries()[0].duration);
  performance.clearMarks();
});
obs.observe({ entryTypes: ['measure'] });

performance.mark('A');
doSomeLongRunningProcess(() =&gt; {
  performance.mark('B');
  performance.measure('A to B', 'A', 'B');
});
</pre> <h2 id="perf_hooks_class_performance">Class: Performance</h2> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <h3 id="perf_hooks_performance_clearmarks_name">performance.clearMarks([name])</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li>
<code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type" target="_blank">&lt;string&gt;</a>
</li> </ul> <p>If <code>name</code> is not provided, removes all <code>PerformanceMark</code> objects from the Performance Timeline. If <code>name</code> is provided, removes only the named mark.</p> <h3 id="perf_hooks_performance_mark_name">performance.mark([name])</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li>
<code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type" target="_blank">&lt;string&gt;</a>
</li> </ul> <p>Creates a new <code>PerformanceMark</code> entry in the Performance Timeline. A <code>PerformanceMark</code> is a subclass of <code>PerformanceEntry</code> whose <code>performanceEntry.entryType</code> is always <code>'mark'</code>, and whose <code>performanceEntry.duration</code> is always <code>0</code>. Performance marks are used to mark specific significant moments in the Performance Timeline.</p> <h3 id="perf_hooks_performance_measure_name_startmark_endmark">performance.measure(name, startMark, endMark)</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li>
<code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type" target="_blank">&lt;string&gt;</a>
</li> <li>
<code>startMark</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type" target="_blank">&lt;string&gt;</a>
</li> <li>
<code>endMark</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type" target="_blank">&lt;string&gt;</a>
</li> </ul> <p>Creates a new <code>PerformanceMeasure</code> entry in the Performance Timeline. A <code>PerformanceMeasure</code> is a subclass of <code>PerformanceEntry</code> whose <code>performanceEntry.entryType</code> is always <code>'measure'</code>, and whose <code>performanceEntry.duration</code> measures the number of milliseconds elapsed since <code>startMark</code> and <code>endMark</code>.</p> <p>The <code>startMark</code> argument may identify any <em>existing</em> <code>PerformanceMark</code> in the Performance Timeline, or <em>may</em> identify any of the timestamp properties provided by the <code>PerformanceNodeTiming</code> class. If the named <code>startMark</code> does not exist, then <code>startMark</code> is set to <a href="https://w3c.github.io/hr-time/#dom-performance-timeorigin" target="_blank"><code>timeOrigin</code></a> by default.</p> <p>The <code>endMark</code> argument must identify any <em>existing</em> <code>PerformanceMark</code> in the Performance Timeline or any of the timestamp properties provided by the <code>PerformanceNodeTiming</code> class. If the named <code>endMark</code> does not exist, an error will be thrown.</p> <h3 id="perf_hooks_performance_nodetiming">performance.nodeTiming</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="../perf_hooks/#perf_hooks_class_performancenodetiming_extends_performanceentry" class="type">&lt;PerformanceNodeTiming&gt;</a></li> </ul> <p>An instance of the <code>PerformanceNodeTiming</code> class that provides performance metrics for specific Node.js operational milestones.</p> <h3 id="perf_hooks_performance_now">performance.now()</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type" target="_blank">&lt;number&gt;</a>
</li> </ul> <p>Returns the current high resolution millisecond timestamp, where 0 represents the start of the current <code>node</code> process.</p> <h3 id="perf_hooks_performance_timeorigin">performance.timeOrigin</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type" target="_blank">&lt;number&gt;</a></li> </ul> <p>The <a href="https://w3c.github.io/hr-time/#dom-performance-timeorigin" target="_blank"><code>timeOrigin</code></a> specifies the high resolution millisecond timestamp at which the current <code>node</code> process began, measured in Unix time.</p> <h3 id="perf_hooks_performance_timerify_fn">performance.timerify(fn)</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li>
<code>fn</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" class="type" target="_blank">&lt;Function&gt;</a>
</li> </ul> <p>Wraps a function within a new function that measures the running time of the wrapped function. A <code>PerformanceObserver</code> must be subscribed to the <code>'function'</code> event type in order for the timing details to be accessed.</p> <pre data-language="js">const {
  performance,
  PerformanceObserver
} = require('perf_hooks');

function someFunction() {
  console.log('hello world');
}

const wrapped = performance.timerify(someFunction);

const obs = new PerformanceObserver((list) =&gt; {
  console.log(list.getEntries()[0].duration);
  obs.disconnect();
});
obs.observe({ entryTypes: ['function'] });

// A performance timeline entry will be created
wrapped();
</pre> <h2 id="perf_hooks_class_performanceentry">Class: PerformanceEntry</h2> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <h3 id="perf_hooks_performanceentry_duration">performanceEntry.duration</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type" target="_blank">&lt;number&gt;</a></li> </ul> <p>The total number of milliseconds elapsed for this entry. This value will not be meaningful for all Performance Entry types.</p> <h3 id="perf_hooks_performanceentry_name">performanceEntry.name</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type" target="_blank">&lt;string&gt;</a></li> </ul> <p>The name of the performance entry.</p> <h3 id="perf_hooks_performanceentry_starttime">performanceEntry.startTime</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type" target="_blank">&lt;number&gt;</a></li> </ul> <p>The high resolution millisecond timestamp marking the starting time of the Performance Entry.</p> <h3 id="perf_hooks_performanceentry_entrytype">performanceEntry.entryType</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type" target="_blank">&lt;string&gt;</a></li> </ul> <p>The type of the performance entry. Currently it may be one of: <code>'node'</code>, <code>'mark'</code>, <code>'measure'</code>, <code>'gc'</code>, <code>'function'</code>, <code>'http2'</code> or <code>'http'</code>.</p> <h3 id="perf_hooks_performanceentry_kind">performanceEntry.kind</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type" target="_blank">&lt;number&gt;</a></li> </ul> <p>When <code>performanceEntry.entryType</code> is equal to <code>'gc'</code>, the <code>performance.kind</code> property identifies the type of garbage collection operation that occurred. The value may be one of:</p> <ul> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_MAJOR</code></li> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_MINOR</code></li> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_INCREMENTAL</code></li> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_WEAKCB</code></li> </ul> <h2 id="perf_hooks_class_performancenodetiming_extends_performanceentry">Class: PerformanceNodeTiming extends PerformanceEntry</h2> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <p>Provides timing details for Node.js itself.</p> <h3 id="perf_hooks_performancenodetiming_bootstrapcomplete">performanceNodeTiming.bootstrapComplete</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type" target="_blank">&lt;number&gt;</a></li> </ul> <p>The high resolution millisecond timestamp at which the Node.js process completed bootstrapping. If bootstrapping has not yet finished, the property has the value of -1.</p> <h3 id="perf_hooks_performancenodetiming_environment">performanceNodeTiming.environment</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type" target="_blank">&lt;number&gt;</a></li> </ul> <p>The high resolution millisecond timestamp at which the Node.js environment was initialized.</p> <h3 id="perf_hooks_performancenodetiming_loopexit">performanceNodeTiming.loopExit</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type" target="_blank">&lt;number&gt;</a></li> </ul> <p>The high resolution millisecond timestamp at which the Node.js event loop exited. If the event loop has not yet exited, the property has the value of -1. It can only have a value of not -1 in a handler of the <a href="../process/#process_event_exit"><code>'exit'</code></a> event.</p> <h3 id="perf_hooks_performancenodetiming_loopstart">performanceNodeTiming.loopStart</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type" target="_blank">&lt;number&gt;</a></li> </ul> <p>The high resolution millisecond timestamp at which the Node.js event loop started. If the event loop has not yet started (e.g., in the first tick of the main script), the property has the value of -1.</p> <h3 id="perf_hooks_performancenodetiming_nodestart">performanceNodeTiming.nodeStart</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type" target="_blank">&lt;number&gt;</a></li> </ul> <p>The high resolution millisecond timestamp at which the Node.js process was initialized.</p> <h3 id="perf_hooks_performancenodetiming_v8start">performanceNodeTiming.v8Start</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type" target="_blank">&lt;number&gt;</a></li> </ul> <p>The high resolution millisecond timestamp at which the V8 platform was initialized.</p> <h2 id="perf_hooks_class_performanceobserver">Class: PerformanceObserver<a class="srclink" href="https://github.com/nodejs/node/blob/9cfb3841785cd658bb13369ed642247e089a5533/lib/perf_hooks.js#L285" target="_blank">[src]</a>
</h2> <h3 id="perf_hooks_new_performanceobserver_callback">new PerformanceObserver(callback)<a class="srclink" href="https://github.com/nodejs/node/blob/9cfb3841785cd658bb13369ed642247e089a5533/lib/perf_hooks.js#L286" target="_blank">[src]</a>
</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li> <p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" class="type" target="_blank">&lt;Function&gt;</a></p> <ul> <li>
<code>list</code> <a href="../perf_hooks/#perf_hooks_class_performanceobserverentrylist" class="type">&lt;PerformanceObserverEntryList&gt;</a>
</li> <li>
<code>observer</code> <a href="../perf_hooks/#perf_hooks_class_performanceobserver" class="type">&lt;PerformanceObserver&gt;</a>
</li> </ul> </li> </ul> <p><code>PerformanceObserver</code> objects provide notifications when new <code>PerformanceEntry</code> instances have been added to the Performance Timeline.</p> <pre data-language="js">const {
  performance,
  PerformanceObserver
} = require('perf_hooks');

const obs = new PerformanceObserver((list, observer) =&gt; {
  console.log(list.getEntries());
  observer.disconnect();
});
obs.observe({ entryTypes: ['mark'], buffered: true });

performance.mark('test');
</pre> <p>Because <code>PerformanceObserver</code> instances introduce their own additional performance overhead, instances should not be left subscribed to notifications indefinitely. Users should disconnect observers as soon as they are no longer needed.</p> <p>The <code>callback</code> is invoked when a <code>PerformanceObserver</code> is notified about new <code>PerformanceEntry</code> instances. The callback receives a <code>PerformanceObserverEntryList</code> instance and a reference to the <code>PerformanceObserver</code>.</p> <h3 id="perf_hooks_performanceobserver_disconnect">performanceObserver.disconnect()<a class="srclink" href="https://github.com/nodejs/node/blob/9cfb3841785cd658bb13369ed642247e089a5533/lib/perf_hooks.js#L320" target="_blank">[src]</a>
</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <p>Disconnects the <code>PerformanceObserver</code> instance from all notifications.</p> <h3 id="perf_hooks_performanceobserver_observe_options">performanceObserver.observe(options)<a class="srclink" href="https://github.com/nodejs/node/blob/9cfb3841785cd658bb13369ed642247e089a5533/lib/perf_hooks.js#L333" target="_blank">[src]</a>
</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li> <p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type" target="_blank">&lt;Object&gt;</a></p> <ul> <li>
<code>entryTypes</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type" target="_blank">&lt;string[]&gt;</a> An array of strings identifying the types of <code>PerformanceEntry</code> instances the observer is interested in. If not provided an error will be thrown.</li> <li>
<code>buffered</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type" target="_blank">&lt;boolean&gt;</a> If true, the notification callback will be called using <code>setImmediate()</code> and multiple <code>PerformanceEntry</code> instance notifications will be buffered internally. If <code>false</code>, notifications will be immediate and synchronous. <strong>Default:</strong> <code>false</code>.</li> </ul> </li> </ul> <p>Subscribes the <code>PerformanceObserver</code> instance to notifications of new <code>PerformanceEntry</code> instances identified by <code>options.entryTypes</code>.</p> <p>When <code>options.buffered</code> is <code>false</code>, the <code>callback</code> will be invoked once for every <code>PerformanceEntry</code> instance:</p> <pre data-language="js">const {
  performance,
  PerformanceObserver
} = require('perf_hooks');

const obs = new PerformanceObserver((list, observer) =&gt; {
  // Called three times synchronously. `list` contains one item.
});
obs.observe({ entryTypes: ['mark'] });

for (let n = 0; n &lt; 3; n++)
  performance.mark(`test${n}`);
</pre> <pre data-language="js">const {
  performance,
  PerformanceObserver
} = require('perf_hooks');

const obs = new PerformanceObserver((list, observer) =&gt; {
  // Called once. `list` contains three items.
});
obs.observe({ entryTypes: ['mark'], buffered: true });

for (let n = 0; n &lt; 3; n++)
  performance.mark(`test${n}`);
</pre> <h2 id="perf_hooks_class_performanceobserverentrylist">Class: PerformanceObserverEntryList</h2> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <p>The <code>PerformanceObserverEntryList</code> class is used to provide access to the <code>PerformanceEntry</code> instances passed to a <code>PerformanceObserver</code>.</p> <h3 id="perf_hooks_performanceobserverentrylist_getentries">performanceObserverEntryList.getEntries()</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li>Returns: <a href="../perf_hooks/#perf_hooks_class_performanceentry" class="type">&lt;PerformanceEntry[]&gt;</a>
</li> </ul> <p>Returns a list of <code>PerformanceEntry</code> objects in chronological order with respect to <code>performanceEntry.startTime</code>.</p> <h3 id="perf_hooks_performanceobserverentrylist_getentriesbyname_name_type">performanceObserverEntryList.getEntriesByName(name[, type])</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li>
<code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type" target="_blank">&lt;string&gt;</a>
</li> <li>
<code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type" target="_blank">&lt;string&gt;</a>
</li> <li>Returns: <a href="../perf_hooks/#perf_hooks_class_performanceentry" class="type">&lt;PerformanceEntry[]&gt;</a>
</li> </ul> <p>Returns a list of <code>PerformanceEntry</code> objects in chronological order with respect to <code>performanceEntry.startTime</code> whose <code>performanceEntry.name</code> is equal to <code>name</code>, and optionally, whose <code>performanceEntry.entryType</code> is equal to <code>type</code>.</p> <h3 id="perf_hooks_performanceobserverentrylist_getentriesbytype_type">performanceObserverEntryList.getEntriesByType(type)</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li>
<code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type" target="_blank">&lt;string&gt;</a>
</li> <li>Returns: <a href="../perf_hooks/#perf_hooks_class_performanceentry" class="type">&lt;PerformanceEntry[]&gt;</a>
</li> </ul> <p>Returns a list of <code>PerformanceEntry</code> objects in chronological order with respect to <code>performanceEntry.startTime</code> whose <code>performanceEntry.entryType</code> is equal to <code>type</code>.</p> <h2 id="perf_hooks_perf_hooks_monitoreventloopdelay_options">perf_hooks.monitorEventLoopDelay([options])<a class="srclink" href="https://github.com/nodejs/node/blob/9cfb3841785cd658bb13369ed642247e089a5533/lib/perf_hooks.js#L594" target="_blank">[src]</a>
</h2> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <ul> <li> <p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type" target="_blank">&lt;Object&gt;</a></p> <ul> <li>
<code>resolution</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type" target="_blank">&lt;number&gt;</a> The sampling rate in milliseconds. Must be greater than zero. <strong>Default:</strong> <code>10</code>.</li> </ul> </li> <li>Returns: <a href="../perf_hooks/#perf_hooks_class_histogram" class="type">&lt;Histogram&gt;</a>
</li> </ul> <p>Creates a <code>Histogram</code> object that samples and reports the event loop delay over time. The delays will be reported in nanoseconds.</p> <p>Using a timer to detect approximate event loop delay works because the execution of timers is tied specifically to the lifecycle of the libuv event loop. That is, a delay in the loop will cause a delay in the execution of the timer, and those delays are specifically what this API is intended to detect.</p> <pre data-language="js">const { monitorEventLoopDelay } = require('perf_hooks');
const h = monitorEventLoopDelay({ resolution: 20 });
h.enable();
// Do something.
h.disable();
console.log(h.min);
console.log(h.max);
console.log(h.mean);
console.log(h.stddev);
console.log(h.percentiles);
console.log(h.percentile(50));
console.log(h.percentile(99));
</pre> <h3 id="perf_hooks_class_histogram">Class: Histogram</h3> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <p>Tracks the event loop delay at a given sampling rate.</p> <h4 id="perf_hooks_histogram_disable">histogram.disable()</h4> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <ul> <li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type" target="_blank">&lt;boolean&gt;</a>
</li> </ul> <p>Disables the event loop delay sample timer. Returns <code>true</code> if the timer was stopped, <code>false</code> if it was already stopped.</p> <h4 id="perf_hooks_histogram_enable">histogram.enable()</h4> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <ul> <li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type" target="_blank">&lt;boolean&gt;</a>
</li> </ul> <p>Enables the event loop delay sample timer. Returns <code>true</code> if the timer was started, <code>false</code> if it was already started.</p> <h4 id="perf_hooks_histogram_exceeds">histogram.exceeds</h4> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type" target="_blank">&lt;number&gt;</a></li> </ul> <p>The number of times the event loop delay exceeded the maximum 1 hour event loop delay threshold.</p> <h4 id="perf_hooks_histogram_max">histogram.max</h4> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type" target="_blank">&lt;number&gt;</a></li> </ul> <p>The maximum recorded event loop delay.</p> <h4 id="perf_hooks_histogram_mean">histogram.mean</h4> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type" target="_blank">&lt;number&gt;</a></li> </ul> <p>The mean of the recorded event loop delays.</p> <h4 id="perf_hooks_histogram_min">histogram.min</h4> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type" target="_blank">&lt;number&gt;</a></li> </ul> <p>The minimum recorded event loop delay.</p> <h4 id="perf_hooks_histogram_percentile_percentile">histogram.percentile(percentile)</h4> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <ul> <li>
<code>percentile</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type" target="_blank">&lt;number&gt;</a> A percentile value between 1 and 100.</li> <li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type" target="_blank">&lt;number&gt;</a>
</li> </ul> <p>Returns the value at the given percentile.</p> <h4 id="perf_hooks_histogram_percentiles">histogram.percentiles</h4> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map" class="type" target="_blank">&lt;Map&gt;</a></li> </ul> <p>Returns a <code>Map</code> object detailing the accumulated percentile distribution.</p> <h4 id="perf_hooks_histogram_reset">histogram.reset()</h4> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <p>Resets the collected histogram data.</p> <h4 id="perf_hooks_histogram_stddev">histogram.stddev</h4> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type" target="_blank">&lt;number&gt;</a></li> </ul> <p>The standard deviation of the recorded event loop delays.</p> <h2 id="perf_hooks_examples">Examples</h2> <h3 id="perf_hooks_measuring_the_duration_of_async_operations">Measuring the duration of async operations</h3> <p>The following example uses the <a href="../async_hooks/">Async Hooks</a> and Performance APIs to measure the actual duration of a Timeout operation (including the amount of time it to execute the callback).</p> <pre data-language="js">'use strict';
const async_hooks = require('async_hooks');
const {
  performance,
  PerformanceObserver
} = require('perf_hooks');

const set = new Set();
const hook = async_hooks.createHook({
  init(id, type) {
    if (type === 'Timeout') {
      performance.mark(`Timeout-${id}-Init`);
      set.add(id);
    }
  },
  destroy(id) {
    if (set.has(id)) {
      set.delete(id);
      performance.mark(`Timeout-${id}-Destroy`);
      performance.measure(`Timeout-${id}`,
                          `Timeout-${id}-Init`,
                          `Timeout-${id}-Destroy`);
    }
  }
});
hook.enable();

const obs = new PerformanceObserver((list, observer) =&gt; {
  console.log(list.getEntries()[0]);
  performance.clearMarks();
  observer.disconnect();
});
obs.observe({ entryTypes: ['measure'], buffered: true });

setTimeout(() =&gt; {}, 1000);
</pre> <h3 id="perf_hooks_measuring_how_long_it_takes_to_load_dependencies">Measuring how long it takes to load dependencies</h3> <p>The following example measures the duration of <code>require()</code> operations to load dependencies:</p>  <pre data-language="js">'use strict';
const {
  performance,
  PerformanceObserver
} = require('perf_hooks');
const mod = require('module');

// Monkey patch the require function
mod.Module.prototype.require =
  performance.timerify(mod.Module.prototype.require);
require = performance.timerify(require);

// Activate the observer
const obs = new PerformanceObserver((list) =&gt; {
  const entries = list.getEntries();
  entries.forEach((entry) =&gt; {
    console.log(`require('${entry[0]}')`, entry.duration);
  });
  obs.disconnect();
});
obs.observe({ entryTypes: ['function'], buffered: true });

require('some-module');
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © Joyent, Inc. and other Node contributors<br>Licensed under the MIT License.<br>Node.js is a trademark of Joyent, Inc. and is used with its permission.<br>We are not endorsed by or affiliated with Joyent.<br>
    <a href="https://nodejs.org/dist/latest-v12.x/docs/api/perf_hooks.html" class="_attribution-link" target="_blank">https://nodejs.org/dist/latest-v12.x/docs/api/perf_hooks.html</a>
  </p>
</div>

				
			</div>
			<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
</amp-auto-ads>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
