
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>WriteCompilerDetectionHeader - CMake 3.15 - W3cubDocs</title>
  
  <meta name="description" content=" This module provides the function write_compiler_detection_header(). ">
  <meta name="keywords" content="writecompilerdetectionheader, -, cmake, cmake~3.15">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/cmake~3.15/module/writecompilerdetectionheader/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" integrity="sha256-6/DH7X+2hvUPElJfGsvzm+tgIpmM9zjbYxnpsr6gR1A=" crossorigin="anonymous" href="/assets/application-ebf0c7ed7fb686f50f12525f1acbf39beb6022998cf738db6319e9b2bea04750.css">
  <script type="text/javascript" src="/assets/application-db285287b40ed28fac520fcfd75d7d874692b647b5b5e05968c741dda5de4148.js" integrity="sha256-2yhSh7QO0o+sUg/P1119h0aStke1teBZaMdB3aXeQUg=" crossorigin="anonymous"></script>
  <script src="/json/cmake~3.15.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2572770204602497",
            enable_page_level_ads: true
        });
  </script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cmake~3.15/" class="_nav-link" title="" style="margin-left:0;">CMake 3.15</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx_simple">
				
				
<h1 id="module:WriteCompilerDetectionHeader">WriteCompilerDetectionHeader</h1> <p id="writecompilerdetectionheader">This module provides the function <code>write_compiler_detection_header()</code>.</p> <p>This function can be used to generate a file suitable for preprocessor inclusion which contains macros to be used in source code:</p> <pre data-language="none">write_compiler_detection_header(
          FILE &lt;file&gt;
          PREFIX &lt;prefix&gt;
          [OUTPUT_FILES_VAR &lt;output_files_var&gt; OUTPUT_DIR &lt;output_dir&gt;]
          COMPILERS &lt;compiler&gt; [...]
          FEATURES &lt;feature&gt; [...]
          [BARE_FEATURES &lt;feature&gt; [...]]
          [VERSION &lt;version&gt;]
          [PROLOG &lt;prolog&gt;]
          [EPILOG &lt;epilog&gt;]
          [ALLOW_UNKNOWN_COMPILERS]
          [ALLOW_UNKNOWN_COMPILER_VERSIONS]
)
</pre> <p>This generates the file <code>&lt;file&gt;</code> with macros which all have the prefix <code>&lt;prefix&gt;</code>.</p> <p>By default, all content is written directly to the <code>&lt;file&gt;</code>. The <code>OUTPUT_FILES_VAR</code> may be specified to cause the compiler-specific content to be written to separate files. The separate files are then available in the <code>&lt;output_files_var&gt;</code> and may be consumed by the caller for installation for example. The <code>OUTPUT_DIR</code> specifies a relative path from the main <code>&lt;file&gt;</code> to the compiler-specific files. For example:</p> <pre data-language="cmake">write_compiler_detection_header(
  FILE climbingstats_compiler_detection.h
  PREFIX ClimbingStats
  OUTPUT_FILES_VAR support_files
  OUTPUT_DIR compilers
  COMPILERS GNU Clang MSVC Intel
  FEATURES cxx_variadic_templates
)
install(FILES
  ${CMAKE_CURRENT_BINARY_DIR}/climbingstats_compiler_detection.h
  DESTINATION include
)
install(FILES
  ${support_files}
  DESTINATION include/compilers
)
</pre> <p><code>VERSION</code> may be used to specify the API version to be generated. Future versions of CMake may introduce alternative APIs. A given API is selected by any <code>&lt;version&gt;</code> value greater than or equal to the version of CMake that introduced the given API and less than the version of CMake that introduced its succeeding API. The value of the <a class="reference internal" href="../../variable/cmake_minimum_required_version/#variable:CMAKE_MINIMUM_REQUIRED_VERSION" title="CMAKE_MINIMUM_REQUIRED_VERSION" id="index-0-variable:CMAKE_MINIMUM_REQUIRED_VERSION"><code>CMAKE_MINIMUM_REQUIRED_VERSION</code></a> variable is used if no explicit version is specified. (As of CMake version 3.15.2 there is only one API version.)</p> <p><code>PROLOG</code> may be specified as text content to write at the start of the header. <code>EPILOG</code> may be specified as text content to write at the end of the header</p> <p>At least one <code>&lt;compiler&gt;</code> and one <code>&lt;feature&gt;</code> must be listed. Compilers which are known to CMake, but not specified are detected and a preprocessor <code>#error</code> is generated for them. A preprocessor macro matching <code>&lt;PREFIX&gt;_COMPILER_IS_&lt;compiler&gt;</code> is generated for each compiler known to CMake to contain the value <code>0</code> or <code>1</code>.</p> <p>Possible compiler identifiers are documented with the <a class="reference internal" href="#" title="CMAKE_&lt;LANG&gt;_COMPILER_ID" id="index-0-variable:CMAKE_&lt;LANG&gt;_COMPILER_ID"><code>CMAKE_&lt;LANG&gt;_COMPILER_ID</code></a> variable. Available features in this version of CMake are listed in the <a class="reference internal" href="../../prop_gbl/cmake_c_known_features/#prop_gbl:CMAKE_C_KNOWN_FEATURES" title="CMAKE_C_KNOWN_FEATURES" id="index-0-prop_gbl:CMAKE_C_KNOWN_FEATURES"><code>CMAKE_C_KNOWN_FEATURES</code></a> and <a class="reference internal" href="../../prop_gbl/cmake_cxx_known_features/#prop_gbl:CMAKE_CXX_KNOWN_FEATURES" title="CMAKE_CXX_KNOWN_FEATURES" id="index-0-prop_gbl:CMAKE_CXX_KNOWN_FEATURES"><code>CMAKE_CXX_KNOWN_FEATURES</code></a> global properties. The <code>{c,cxx}_std_*</code> meta-features are ignored if requested.</p> <p>See the <a class="reference internal" href="../../manual/cmake-compile-features.7/#manual:cmake-compile-features(7)" title="cmake-compile-features(7)" id="index-0-manual:cmake-compile-features(7)"><code>cmake-compile-features(7)</code></a> manual for information on compile features.</p> <p><code>BARE_FEATURES</code> will define the compatibility macros with the name used in newer versions of the language standard, so the code can use the new feature name unconditionally.</p> <p><code>ALLOW_UNKNOWN_COMPILERS</code> and <code>ALLOW_UNKNOWN_COMPILER_VERSIONS</code> cause the module to generate conditions that treat unknown compilers as simply lacking all features. Without these options the default behavior is to generate a <code>#error</code> for unknown compilers and versions.</p>  <h2 id="feature-test-macros">Feature Test Macros</h2> <p>For each compiler, a preprocessor macro is generated matching <code>&lt;PREFIX&gt;_COMPILER_IS_&lt;compiler&gt;</code> which has the content either <code>0</code> or <code>1</code>, depending on the compiler in use. Preprocessor macros for compiler version components are generated matching <code>&lt;PREFIX&gt;_COMPILER_VERSION_MAJOR</code> <code>&lt;PREFIX&gt;_COMPILER_VERSION_MINOR</code> and <code>&lt;PREFIX&gt;_COMPILER_VERSION_PATCH</code> containing decimal values for the corresponding compiler version components, if defined.</p> <p>A preprocessor test is generated based on the compiler version denoting whether each feature is enabled. A preprocessor macro matching <code>&lt;PREFIX&gt;_COMPILER_&lt;FEATURE&gt;</code>, where <code>&lt;FEATURE&gt;</code> is the upper-case <code>&lt;feature&gt;</code> name, is generated to contain the value <code>0</code> or <code>1</code> depending on whether the compiler in use supports the feature:</p> <pre data-language="cmake">write_compiler_detection_header(
  FILE climbingstats_compiler_detection.h
  PREFIX ClimbingStats
  COMPILERS GNU Clang AppleClang MSVC Intel
  FEATURES cxx_variadic_templates
)
</pre> <pre data-language="c">#if ClimbingStats_COMPILER_CXX_VARIADIC_TEMPLATES
template&lt;typename... T&gt;
void someInterface(T t...) { /* ... */ }
#else
// Compatibility versions
template&lt;typename T1&gt;
void someInterface(T1 t1) { /* ... */ }
template&lt;typename T1, typename T2&gt;
void someInterface(T1 t1, T2 t2) { /* ... */ }
template&lt;typename T1, typename T2, typename T3&gt;
void someInterface(T1 t1, T2 t2, T3 t3) { /* ... */ }
#endif
</pre>   <h2 id="symbol-macros">Symbol Macros</h2> <p>Some additional symbol-defines are created for particular features for use as symbols which may be conditionally defined empty:</p> <pre data-language="c">class MyClass ClimbingStats_FINAL
{
    ClimbingStats_CONSTEXPR int someInterface() { return 42; }
};
</pre> <p>The <code>ClimbingStats_FINAL</code> macro will expand to <code>final</code> if the compiler (and its flags) support the <code>cxx_final</code> feature, and the <code>ClimbingStats_CONSTEXPR</code> macro will expand to <code>constexpr</code> if <code>cxx_constexpr</code> is supported.</p> <p>If <code>BARE_FEATURES cxx_final</code> was given as argument the <code>final</code> keyword will be defined for old compilers, too.</p> <p>The following features generate corresponding symbol defines and if they are available as <code>BARE_FEATURES</code>:</p> <table class="docutils">  <thead valign="bottom"> <tr>
<th class="head">Feature</th> <th class="head">Define</th> <th class="head">Symbol</th> <th class="head">bare</th> </tr> </thead>  <tr>
<td><code>c_restrict</code></td> <td><code>&lt;PREFIX&gt;_RESTRICT</code></td> <td><code>restrict</code></td> <td>yes</td> </tr> <tr>
<td><code>cxx_constexpr</code></td> <td><code>&lt;PREFIX&gt;_CONSTEXPR</code></td> <td><code>constexpr</code></td> <td>yes</td> </tr> <tr>
<td><code>cxx_deleted_functions</code></td> <td><code>&lt;PREFIX&gt;_DELETED_FUNCTION</code></td> <td><code>= delete</code></td> <td> </td> </tr> <tr>
<td><code>cxx_extern_templates</code></td> <td><code>&lt;PREFIX&gt;_EXTERN_TEMPLATE</code></td> <td><code>extern</code></td> <td> </td> </tr> <tr>
<td><code>cxx_final</code></td> <td><code>&lt;PREFIX&gt;_FINAL</code></td> <td><code>final</code></td> <td>yes</td> </tr> <tr>
<td><code>cxx_noexcept</code></td> <td><code>&lt;PREFIX&gt;_NOEXCEPT</code></td> <td><code>noexcept</code></td> <td>yes</td> </tr> <tr>
<td><code>cxx_noexcept</code></td> <td><code>&lt;PREFIX&gt;_NOEXCEPT_EXPR(X)</code></td> <td><code>noexcept(X)</code></td> <td> </td> </tr> <tr>
<td><code>cxx_override</code></td> <td><code>&lt;PREFIX&gt;_OVERRIDE</code></td> <td><code>override</code></td> <td>yes</td> </tr>  </table>   <h2 id="compatibility-implementation-macros">Compatibility Implementation Macros</h2> <p>Some features are suitable for wrapping in a macro with a backward compatibility implementation if the compiler does not support the feature.</p> <p>When the <code>cxx_static_assert</code> feature is not provided by the compiler, a compatibility implementation is available via the <code>&lt;PREFIX&gt;_STATIC_ASSERT(COND)</code> and <code>&lt;PREFIX&gt;_STATIC_ASSERT_MSG(COND, MSG)</code> function-like macros. The macros expand to <code>static_assert</code> where that compiler feature is available, and to a compatibility implementation otherwise. In the first form, the condition is stringified in the message field of <code>static_assert</code>. In the second form, the message <code>MSG</code> is passed to the message field of <code>static_assert</code>, or ignored if using the backward compatibility implementation.</p> <p>The <code>cxx_attribute_deprecated</code> feature provides a macro definition <code>&lt;PREFIX&gt;_DEPRECATED</code>, which expands to either the standard <code>[[deprecated]]</code> attribute or a compiler-specific decorator such as <code>__attribute__((__deprecated__))</code> used by GNU compilers.</p> <p>The <code>cxx_alignas</code> feature provides a macro definition <code>&lt;PREFIX&gt;_ALIGNAS</code> which expands to either the standard <code>alignas</code> decorator or a compiler-specific decorator such as <code>__attribute__ ((__aligned__))</code> used by GNU compilers.</p> <p>The <code>cxx_alignof</code> feature provides a macro definition <code>&lt;PREFIX&gt;_ALIGNOF</code> which expands to either the standard <code>alignof</code> decorator or a compiler-specific decorator such as <code>__alignof__</code> used by GNU compilers.</p> <table class="docutils">  <thead valign="bottom"> <tr>
<th class="head">Feature</th> <th class="head">Define</th> <th class="head">Symbol</th> <th class="head">bare</th> </tr> </thead>  <tr>
<td><code>cxx_alignas</code></td> <td><code>&lt;PREFIX&gt;_ALIGNAS</code></td> <td><code>alignas</code></td> <td> </td> </tr> <tr>
<td><code>cxx_alignof</code></td> <td><code>&lt;PREFIX&gt;_ALIGNOF</code></td> <td><code>alignof</code></td> <td> </td> </tr> <tr>
<td><code>cxx_nullptr</code></td> <td><code>&lt;PREFIX&gt;_NULLPTR</code></td> <td><code>nullptr</code></td> <td>yes</td> </tr> <tr>
<td><code>cxx_static_assert</code></td> <td><code>&lt;PREFIX&gt;_STATIC_ASSERT</code></td> <td><code>static_assert</code></td> <td> </td> </tr> <tr>
<td><code>cxx_static_assert</code></td> <td><code>&lt;PREFIX&gt;_STATIC_ASSERT_MSG</code></td> <td><code>static_assert</code></td> <td> </td> </tr> <tr>
<td><code>cxx_attribute_deprecated</code></td> <td><code>&lt;PREFIX&gt;_DEPRECATED</code></td> <td><code>[[deprecated]]</code></td> <td> </td> </tr> <tr>
<td><code>cxx_attribute_deprecated</code></td> <td><code>&lt;PREFIX&gt;_DEPRECATED_MSG</code></td> <td><code>[[deprecated]]</code></td> <td> </td> </tr> <tr>
<td><code>cxx_thread_local</code></td> <td><code>&lt;PREFIX&gt;_THREAD_LOCAL</code></td> <td><code>thread_local</code></td> <td> </td> </tr>  </table> <p>A use-case which arises with such deprecation macros is the deprecation of an entire library. In that case, all public API in the library may be decorated with the <code>&lt;PREFIX&gt;_DEPRECATED</code> macro. This results in very noisy build output when building the library itself, so the macro may be may be defined to empty in that case when building the deprecated library:</p> <pre data-language="cmake">add_library(compat_support ${srcs})
target_compile_definitions(compat_support
  PRIVATE
    CompatSupport_DEPRECATED=
)
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © 2000–2019 Kitware, Inc. and Contributors<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://cmake.org/cmake/help/v3.15/module/WriteCompilerDetectionHeader.html" class="_attribution-link" target="_blank">https://cmake.org/cmake/help/v3.15/module/WriteCompilerDetectionHeader.html</a>
  </p>
</div>

				
			</div>
			<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
</amp-auto-ads>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
