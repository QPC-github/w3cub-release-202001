
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Bundler&#58;&#58;SharedHelpers - Ruby 2.6 - W3cubDocs</title>
  
  <meta name="description" content=" Rescues permissions errors raised by file system operations (ie. Errno&#58;EACCESS, Errno&#58;&#58;EAGAIN) and raises more friendly errors instead. ">
  <meta name="keywords" content="module, bundler, sharedhelpers, -, ruby, ruby~2.6">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/ruby~2.6/bundler/sharedhelpers/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" integrity="sha256-6/DH7X+2hvUPElJfGsvzm+tgIpmM9zjbYxnpsr6gR1A=" crossorigin="anonymous" href="/assets/application-ebf0c7ed7fb686f50f12525f1acbf39beb6022998cf738db6319e9b2bea04750.css">
  <script type="text/javascript" src="/assets/application-db285287b40ed28fac520fcfd75d7d874692b647b5b5e05968c741dda5de4148.js" integrity="sha256-2yhSh7QO0o+sUg/P1119h0aStke1teBZaMdB3aXeQUg=" crossorigin="anonymous"></script>
  <script src="/json/ruby~2.6.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2572770204602497",
            enable_page_level_ads: true
        });
  </script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ruby~2.6/" class="_nav-link" title="" style="margin-left:0;">Ruby 2.6</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _rdoc">
				
				
<h1 id="module-Bundler::SharedHelpers" class="module"> module Bundler::SharedHelpers </h1>  <section id="5Buntitled-5D" class="documentation-section"> <section id="public-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-i-chdir"> <span class="method-name">chdir</span><span class="method-args">(dir, &amp;blk)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="chdir-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 63
def chdir(dir, &amp;blk)
  Bundler.rubygems.ext_lock.synchronize do
    Dir.chdir dir, &amp;blk
  end
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-const_get_safely"> <span class="method-name">const_get_safely</span><span class="method-args">(constant_name, namespace)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="const_get_safely-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 135
def const_get_safely(constant_name, namespace)
  const_in_namespace = namespace.constants.include?(constant_name.to_s) ||
    namespace.constants.include?(constant_name.to_sym)
  return nil unless const_in_namespace
  namespace.const_get(constant_name)
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-default_bundle_dir"> <span class="method-name">default_bundle_dir</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="default_bundle_dir-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 47
def default_bundle_dir
  bundle_dir = find_directory(".bundle")
  return nil unless bundle_dir

  bundle_dir = Pathname.new(bundle_dir)

  global_bundle_dir = Bundler.user_home.join(".bundle")
  return nil if bundle_dir == global_bundle_dir

  bundle_dir
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-default_gemfile"> <span class="method-name">default_gemfile</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="default_gemfile-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 32
def default_gemfile
  gemfile = find_gemfile(:order_matters)
  raise GemfileNotFound, "Could not locate Gemfile" unless gemfile
  Pathname.new(gemfile).untaint.expand_path
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-default_lockfile"> <span class="method-name">default_lockfile</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="default_lockfile-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 38
def default_lockfile
  gemfile = default_gemfile

  case gemfile.basename.to_s
  when "gems.rb" then Pathname.new(gemfile.sub(/.rb$/, ".locked"))
  else Pathname.new("#{gemfile}.lock")
  end.untaint
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-digest"> <span class="method-name">digest</span><span class="method-args">(name)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="digest-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 223
def digest(name)
  require "digest"
  Digest(name)
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-ensure_same_dependencies"> <span class="method-name">ensure_same_dependencies</span><span class="method-args">(spec, old_deps, new_deps)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="ensure_same_dependencies-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 179
def ensure_same_dependencies(spec, old_deps, new_deps)
  new_deps = new_deps.reject {|d| d.type == :development }
  old_deps = old_deps.reject {|d| d.type == :development }

  without_type = proc {|d| Gem::Dependency.new(d.name, d.requirements_list.sort) }
  new_deps.map!(&amp;without_type)
  old_deps.map!(&amp;without_type)

  extra_deps = new_deps - old_deps
  return if extra_deps.empty?

  Bundler.ui.debug "#{spec.full_name} from #{spec.remote} has either corrupted API or lockfile dependencies" \
    " (was expecting #{old_deps.map(&amp;:to_s)}, but the real spec has #{new_deps.map(&amp;:to_s)})"
  raise APIResponseMismatchError,
    "Downloading #{spec.full_name} revealed dependencies not in the API or the lockfile (#{extra_deps.join(", ")})." \
    "\nEither installing with `--full-index` or running `bundle update #{spec.name}` should fix the problem."
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-filesystem_access"> <span class="method-name">filesystem_access</span><span class="method-args">(path, action = :write, &amp;block)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="filesystem_access-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 115
def filesystem_access(path, action = :write, &amp;block)
  # Use block.call instead of yield because of a bug in Ruby 2.2.2
  # See https://github.com/bundler/bundler/issues/5341 for details
  block.call(path.dup.untaint)
rescue Errno::EACCES
  raise PermissionError.new(path, action)
rescue Errno::EAGAIN
  raise TemporaryResourceError.new(path, action)
rescue Errno::EPROTO
  raise VirtualProtocolError.new
rescue Errno::ENOSPC
  raise NoSpaceOnDeviceError.new(path, action)
rescue *[const_get_safely(:ENOTSUP, Errno)].compact
  raise OperationNotSupportedError.new(path, action)
rescue Errno::EEXIST, Errno::ENOENT
  raise
rescue SystemCallError =&gt; e
  raise GenericSystemCallError.new(e, "There was an error accessing `#{path}`.")
end</pre> </div> <p>Rescues permissions errors raised by file system operations (ie. Errno:EACCESS, Errno::EAGAIN) and raises more friendly errors instead.</p> <p>@param path [String] the path that the action will be attempted to @param action [Symbol, to_s] the type of operation that will be</p> <pre>performed. For example: :write, :read, :exec</pre> <p>@yield path</p> <p>@raise [Bundler::PermissionError] if Errno:EACCES is raised in the</p> <pre class="ruby" data-language="ruby">given block
</pre> <p>@raise [Bundler::TemporaryResourceError] if Errno:EAGAIN is raised in the</p> <pre class="ruby" data-language="ruby">given block
</pre> <p>@example</p> <pre class="ruby" data-language="ruby">filesystem_access("vendor/cache", :write) do
  FileUtils.mkdir_p("vendor/cache")
end
</pre> <p>@see {Bundler::PermissionError}</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-in_bundle-3F"> <span class="method-name">in_bundle?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="in_bundle-3F-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 59
def in_bundle?
  find_gemfile
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-major_deprecation"> <span class="method-name">major_deprecation</span><span class="method-args">(major_version, message)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="major_deprecation-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 142
def major_deprecation(major_version, message)
  if Bundler.bundler_major_version &gt;= major_version
    require "bundler/errors"
    raise DeprecatedError, "[REMOVED FROM #{major_version}.0] #{message}"
  end

  return unless prints_major_deprecations?
  @major_deprecation_ui ||= Bundler::UI::Shell.new("no-color" =&gt; true)
  ui = Bundler.ui.is_a?(@major_deprecation_ui.class) ? Bundler.ui : @major_deprecation_ui
  ui.warn("[DEPRECATED FOR #{major_version}.0] #{message}")
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-md5_available-3F"> <span class="method-name">md5_available?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="md5_available-3F-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 210
def md5_available?
  return @md5_available if defined?(@md5_available)
  @md5_available = begin
    require "openssl"
    OpenSSL::Digest::MD5.digest("")
    true
  rescue LoadError
    true
  rescue OpenSSL::Digest::DigestError
    false
  end
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-pretty_dependency"> <span class="method-name">pretty_dependency</span><span class="method-args">(dep, print_source = false)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="pretty_dependency-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 197
def pretty_dependency(dep, print_source = false)
  msg = String.new(dep.name)
  msg &lt;&lt; " (#{dep.requirement})" unless dep.requirement == Gem::Requirement.default

  if dep.is_a?(Bundler::Dependency)
    platform_string = dep.platforms.join(", ")
    msg &lt;&lt; " " &lt;&lt; platform_string if !platform_string.empty? &amp;&amp; platform_string != Gem::Platform::RUBY
  end

  msg &lt;&lt; " from the `#{dep.source}` source" if print_source &amp;&amp; dep.source
  msg
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-print_major_deprecations-21"> <span class="method-name">print_major_deprecations!</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="print_major_deprecations-21-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 154
def print_major_deprecations!
  multiple_gemfiles = search_up(".") do |dir|
    gemfiles = gemfile_names.select {|gf| File.file? File.expand_path(gf, dir) }
    next if gemfiles.empty?
    break false if gemfiles.size == 1
  end
  if multiple_gemfiles &amp;&amp; Bundler.bundler_major_version == 1
    Bundler::SharedHelpers.major_deprecation 2, \
      "gems.rb and gems.locked will be preferred to Gemfile and Gemfile.lock."
  end

  if RUBY_VERSION &lt; "2"
    major_deprecation(2, "Bundler will only support ruby &gt;= 2.0, you are running #{RUBY_VERSION}")
  end
  return if Bundler.rubygems.provides?("&gt;= 2")
  major_deprecation(2, "Bundler will only support rubygems &gt;= 2.0, you are running #{Bundler.rubygems.version}")
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-pwd"> <span class="method-name">pwd</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="pwd-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 69
def pwd
  Bundler.rubygems.ext_lock.synchronize do
    Pathname.pwd
  end
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-root"> <span class="method-name">root</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="root-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 26
def root
  gemfile = find_gemfile
  raise GemfileNotFound, "Could not locate Gemfile" unless gemfile
  Pathname.new(gemfile).untaint.expand_path.parent
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-set_bundle_environment"> <span class="method-name">set_bundle_environment</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="set_bundle_environment-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 88
def set_bundle_environment
  set_bundle_variables
  set_path
  set_rubyopt
  set_rubylib
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-set_env"> <span class="method-name">set_env</span><span class="method-args">(key, value)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="set_env-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 297
def set_env(key, value)
  raise ArgumentError, "new key #{key}" unless EnvironmentPreserver::BUNDLER_KEYS.include?(key)
  orig_key = "#{EnvironmentPreserver::BUNDLER_PREFIX}#{key}"
  orig = ENV[key]
  orig ||= EnvironmentPreserver::INTENTIONALLY_NIL
  ENV[orig_key] ||= orig

  ENV[key] = value
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-trap"> <span class="method-name">trap</span><span class="method-args">(signal, override = false, &amp;block)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="trap-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 172
def trap(signal, override = false, &amp;block)
  prior = Signal.trap(signal) do
    block.call
    prior.call unless override
  end
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-with_clean_git_env"> <span class="method-name">with_clean_git_env</span><span class="method-args">(&amp;block)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="with_clean_git_env-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 75
def with_clean_git_env(&amp;block)
  keys    = %w[GIT_DIR GIT_WORK_TREE]
  old_env = keys.inject({}) do |h, k|
    h.update(k =&gt; ENV[k])
  end

  keys.each {|key| ENV.delete(key) }

  block.call
ensure
  keys.each {|key| ENV[key] = old_env[key] }
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-write_to_gemfile"> <span class="method-name">write_to_gemfile</span><span class="method-args">(gemfile_path, contents)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="write_to_gemfile-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 228
def write_to_gemfile(gemfile_path, contents)
  filesystem_access(gemfile_path) {|g| File.open(g, "w") {|file| file.puts contents } }
end</pre> </div>  </div> </div> </section> <section id="private-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Private Instance Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-i-bundler_ruby_lib"> <span class="method-name">bundler_ruby_lib</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="bundler_ruby_lib-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 347
def bundler_ruby_lib
  resolve_path File.expand_path("../..", __FILE__)
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-clean_load_path"> <span class="method-name">clean_load_path</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="clean_load_path-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 351
def clean_load_path
  # handle 1.9 where system gems are always on the load path
  return unless defined?(::Gem)

  bundler_lib = bundler_ruby_lib

  loaded_gem_paths = Bundler.rubygems.loaded_gem_paths

  $LOAD_PATH.reject! do |p|
    next if resolve_path(p).start_with?(bundler_lib)
    loaded_gem_paths.delete(p)
  end
  $LOAD_PATH.uniq!
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-find_directory"> <span class="method-name">find_directory</span><span class="method-args">(*names)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="find_directory-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 264
def find_directory(*names)
  search_up(*names) do |dirname|
    return dirname if File.directory?(dirname)
  end
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-find_file"> <span class="method-name">find_file</span><span class="method-args">(*names)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="find_file-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 258
def find_file(*names)
  search_up(*names) do |filename|
    return filename if File.file?(filename)
  end
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-find_gemfile"> <span class="method-name">find_gemfile</span><span class="method-args">(order_matters = false)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="find_gemfile-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 246
def find_gemfile(order_matters = false)
  given = ENV["BUNDLE_GEMFILE"]
  return given if given &amp;&amp; !given.empty?
  names = gemfile_names
  names.reverse! if order_matters &amp;&amp; Bundler.feature_flag.prefer_gems_rb?
  find_file(*names)
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-gemfile_names"> <span class="method-name">gemfile_names</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="gemfile_names-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 254
def gemfile_names
  ["Gemfile", "gems.rb"]
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-prints_major_deprecations-3F"> <span class="method-name">prints_major_deprecations?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="prints_major_deprecations-3F-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 373
def prints_major_deprecations?
  require "bundler"
  deprecation_release = Bundler::VERSION.split(".").drop(1).include?("99")
  return false if !deprecation_release &amp;&amp; !Bundler.settings[:major_deprecations]
  require "bundler/deprecate"
  return false if Bundler::Deprecate.skip
  true
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-resolve_path"> <span class="method-name">resolve_path</span><span class="method-args">(path)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="resolve_path-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 366
def resolve_path(path)
  expanded = File.expand_path(path)
  return expanded unless File.respond_to?(:realpath) &amp;&amp; File.exist?(expanded)

  File.realpath(expanded)
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-search_up"> <span class="method-name">search_up</span><span class="method-args">(*names) { |filename| ... }</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="search_up-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 270
def search_up(*names)
  previous = nil
  current  = File.expand_path(SharedHelpers.pwd).untaint

  until !File.directory?(current) || current == previous
    if ENV["BUNDLE_SPEC_RUN"]
      # avoid stepping above the tmp directory when testing
      gemspec = if ENV["BUNDLE_RUBY"] &amp;&amp; ENV["BUNDLE_GEM"]
        # for Ruby Core
        "lib/bundler.gemspec"
      else
        "bundler.gemspec"
      end

      # avoid stepping above the tmp directory when testing
      return nil if File.file?(File.join(current, gemspec))
    end

    names.each do |name|
      filename = File.join(current, name)
      yield filename
    end
    previous = current
    current = File.expand_path("..", current)
  end
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-set_bundle_variables"> <span class="method-name">set_bundle_variables</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="set_bundle_variables-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 308
def set_bundle_variables
  begin
    exe_file = Bundler.rubygems.bin_path("bundler", "bundle", VERSION)
    unless File.exist?(exe_file)
      exe_file = File.expand_path("../../../exe/bundle", __FILE__)
    end
    Bundler::SharedHelpers.set_env "BUNDLE_BIN_PATH", exe_file
  rescue Gem::GemNotFoundException
    exe_file = File.expand_path("../../../exe/bundle", __FILE__)
    # for Ruby core repository
    exe_file = File.expand_path("../../../../bin/bundle", __FILE__) unless File.exist?(exe_file)
    Bundler::SharedHelpers.set_env "BUNDLE_BIN_PATH", exe_file
  end

  # Set BUNDLE_GEMFILE
  Bundler::SharedHelpers.set_env "BUNDLE_GEMFILE", find_gemfile(:order_matters).to_s
  Bundler::SharedHelpers.set_env "BUNDLER_VERSION", Bundler::VERSION
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-set_path"> <span class="method-name">set_path</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="set_path-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 327
def set_path
  validate_bundle_path
  paths = (ENV["PATH"] || "").split(File::PATH_SEPARATOR)
  paths.unshift "#{Bundler.bundle_path}/bin"
  Bundler::SharedHelpers.set_env "PATH", paths.uniq.join(File::PATH_SEPARATOR)
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-set_rubylib"> <span class="method-name">set_rubylib</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="set_rubylib-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 341
def set_rubylib
  rubylib = (ENV["RUBYLIB"] || "").split(File::PATH_SEPARATOR)
  rubylib.unshift bundler_ruby_lib unless RbConfig::CONFIG["rubylibdir"] == bundler_ruby_lib
  Bundler::SharedHelpers.set_env "RUBYLIB", rubylib.uniq.join(File::PATH_SEPARATOR)
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-set_rubyopt"> <span class="method-name">set_rubyopt</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="set_rubyopt-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 334
def set_rubyopt
  rubyopt = [ENV["RUBYOPT"]].compact
  return if !rubyopt.empty? &amp;&amp; rubyopt.first =~ %r{-rbundler/setup}
  rubyopt.unshift %(-rbundler/setup)
  Bundler::SharedHelpers.set_env "RUBYOPT", rubyopt.join(" ")
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-validate_bundle_path"> <span class="method-name">validate_bundle_path</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="validate_bundle_path-source"> <pre class="ruby" data-language="ruby"># File lib/bundler/shared_helpers.rb, line 234
def validate_bundle_path
  path_separator = Bundler.rubygems.path_separator
  return unless Bundler.bundle_path.to_s.split(path_separator).size &gt; 1
  message = "Your bundle path contains text matching #{path_separator.inspect}, " \
            "which is the path separator for your system. Bundler cannot " \
            "function correctly when the Bundle path contains the " \
            "system's PATH separator. Please change your " \
            "bundle path to not match #{path_separator.inspect}." \
            "\nYour current bundle path is '#{Bundler.bundle_path}'."
  raise Bundler::PathError, message
end</pre> </div>  </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    Ruby Core © 1993–2017 Yukihiro Matsumoto<br>Licensed under the Ruby License.<br>Ruby Standard Library © contributors<br>Licensed under their own licenses.<br>
    
  </p>
</div>

				
			</div>
			<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
</amp-auto-ads>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
