
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>ENV - Ruby 2.6 - W3cubDocs</title>
  
  <meta name="description" content=" ENV is a hash-like accessor for environment variables. ">
  <meta name="keywords" content="class, env, -, ruby, ruby~2.6">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/ruby~2.6/env/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" integrity="sha256-6/DH7X+2hvUPElJfGsvzm+tgIpmM9zjbYxnpsr6gR1A=" crossorigin="anonymous" href="/assets/application-ebf0c7ed7fb686f50f12525f1acbf39beb6022998cf738db6319e9b2bea04750.css">
  <script type="text/javascript" src="/assets/application-db285287b40ed28fac520fcfd75d7d874692b647b5b5e05968c741dda5de4148.js" integrity="sha256-2yhSh7QO0o+sUg/P1119h0aStke1teBZaMdB3aXeQUg=" crossorigin="anonymous"></script>
  <script src="/json/ruby~2.6.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2572770204602497",
            enable_page_level_ads: true
        });
  </script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ruby~2.6/" class="_nav-link" title="" style="margin-left:0;">Ruby 2.6</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _rdoc">
				
				
<h1 id="class-ENV" class="class"> class ENV </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent"><a href="../object/">Object</a></dd>
</dl> <section class="description"> <p><a href="../env/"><code>ENV</code></a> is a hash-like accessor for environment variables.</p> </section> <section id="5Buntitled-5D" class="documentation-section"> <section id="public-class-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-c-5B-5D"> <span class="method-callseq"> ENV[name] → value </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="5B-5D-source"> <pre class="c" data-language="c">static VALUE
rb_f_getenv(VALUE obj, VALUE name)
{
    const char *nam, *env;

    nam = env_name(name);
    env = getenv(nam);
    if (env) {
        return env_name_new(nam, env);
    }
    return Qnil;
}</pre> </div> <p>Retrieves the <code>value</code> for environment variable <code>name</code> as a <a href="../string/"><code>String</code></a>. Returns <code>nil</code> if the named variable does not exist.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-5B-5D-3D"> <span class="method-callseq"> ENV[name] = value </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="5B-5D-3D-source"> <pre class="c" data-language="c">static VALUE
env_aset(VALUE obj, VALUE nm, VALUE val)
{
    char *name, *value;

    if (NIL_P(val)) {
        env_delete(obj, nm);
        return Qnil;
    }
    SafeStringValue(nm);
    SafeStringValue(val);
    /* nm can be modified in `val.to_str`, don't get `name` before
     * check for `val` */
    get_env_ptr(name, nm);
    get_env_ptr(value, val);

    ruby_setenv(name, value);
    if (ENVMATCH(name, PATH_ENV)) {
        RB_GC_GUARD(nm);
        if (OBJ_TAINTED(val)) {
            /* already tainted, no check */
            path_tainted = 1;
            return val;
        }
        else {
            path_tainted_p(value);
        }
    }
    else if (ENVMATCH(name, TZ_ENV)) {
        ruby_tz_uptodate_p = FALSE;
    }
    return val;
}</pre> </div> <p>Sets the environment variable <code>name</code> to <code>value</code>. If the value given is <code>nil</code> the environment variable is deleted. <code>name</code> must be a string.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-assoc"> <span class="method-callseq"> assoc(name) → Array or nil </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="assoc-source"> <pre class="c" data-language="c">static VALUE
env_assoc(VALUE env, VALUE key)
{
    const char *s, *e;

    s = env_name(key);
    e = getenv(s);
    if (e) return rb_assoc_new(key, env_str_new2(e));
    return Qnil;
}</pre> </div> <p>Returns an <a href="../array/"><code>Array</code></a> of the name and value of the environment variable with <code>name</code> or <code>nil</code> if the name cannot be found.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-clear"> <span class="method-callseq"> clear </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="clear-source"> <pre class="c" data-language="c">VALUE
rb_env_clear(void)
{
    VALUE keys;
    long i;

    keys = env_keys();
    for (i=0; i&lt;RARRAY_LEN(keys); i++) {
        VALUE val = rb_f_getenv(Qnil, RARRAY_AREF(keys, i));
        if (!NIL_P(val)) {
            env_delete(Qnil, RARRAY_AREF(keys, i));
        }
    }
    RB_GC_GUARD(keys);
    return envtbl;
}</pre> </div> <p>Removes every environment variable.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-delete"> <span class="method-callseq"> delete(name) → value </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> delete(name) { |name| block } → value </span> </div> <div class="method-description">
<div class="method-source-code" id="delete-source"> <pre class="c" data-language="c">static VALUE
env_delete_m(VALUE obj, VALUE name)
{
    VALUE val;

    val = env_delete(obj, name);
    if (NIL_P(val) &amp;&amp; rb_block_given_p()) rb_yield(name);
    return val;
}</pre> </div> <p>Deletes the environment variable with <code>name</code> and returns the value of the variable. If a block is given it will be called when the named environment does not exist.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-delete_if"> <span class="method-callseq"> delete_if { |name, value| block } → Hash </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> delete_if → Enumerator </span> </div> <div class="method-description">
<div class="method-source-code" id="delete_if-source"> <pre class="c" data-language="c">static VALUE
env_delete_if(VALUE ehash)
{
    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    env_reject_bang(ehash);
    return envtbl;
}</pre> </div> <p>Deletes every environment variable for which the block evaluates to <code>true</code>.</p> <p>If no block is given an enumerator is returned instead.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-each"> <span class="method-callseq"> each { |name, value| block } → Hash </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> each → Enumerator </span> </div> <div class="method-heading"> <span class="method-callseq"> each_pair { |name, value| block } → Hash </span> </div> <div class="method-heading"> <span class="method-callseq"> each_pair → Enumerator </span> </div> <div class="method-description">
<div class="method-source-code" id="each-source"> <pre class="c" data-language="c">static VALUE
env_each_pair(VALUE ehash)
{
    char **env;
    VALUE ary;
    long i;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);

    ary = rb_ary_new();
    env = GET_ENVIRON(environ);
    while (*env) {
        char *s = strchr(*env, '=');
        if (s) {
            rb_ary_push(ary, env_str_new(*env, s-*env));
            rb_ary_push(ary, env_str_new2(s+1));
        }
        env++;
    }
    FREE_ENVIRON(environ);

    if (rb_block_arity() &gt; 1) {
        for (i=0; i&lt;RARRAY_LEN(ary); i+=2) {
            rb_yield_values(2, RARRAY_AREF(ary, i), RARRAY_AREF(ary, i+1));
        }
    }
    else {
        for (i=0; i&lt;RARRAY_LEN(ary); i+=2) {
            rb_yield(rb_assoc_new(RARRAY_AREF(ary, i), RARRAY_AREF(ary, i+1)));
        }
    }
    return ehash;
}</pre> </div> <p>Yields each environment variable <code>name</code> and <code>value</code>.</p> <p>If no block is given an <a href="../enumerator/"><code>Enumerator</code></a> is returned.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-each_key"> <span class="method-callseq"> each_key { |name| block } → Hash </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> each_key → Enumerator </span> </div> <div class="method-description">
<div class="method-source-code" id="each_key-source"> <pre class="c" data-language="c">static VALUE
env_each_key(VALUE ehash)
{
    VALUE keys;
    long i;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    keys = env_keys();
    for (i=0; i&lt;RARRAY_LEN(keys); i++) {
        rb_yield(RARRAY_AREF(keys, i));
    }
    return ehash;
}</pre> </div> <p>Yields each environment variable name.</p> <p>An <a href="../enumerator/"><code>Enumerator</code></a> is returned if no block is given.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-each_pair"> <span class="method-callseq"> each_pair { |name, value| block } → Hash </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> each_pair → Enumerator </span> </div> <div class="method-description">
<div class="method-source-code" id="each_pair-source"> <pre class="c" data-language="c">static VALUE
env_each_pair(VALUE ehash)
{
    char **env;
    VALUE ary;
    long i;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);

    ary = rb_ary_new();
    env = GET_ENVIRON(environ);
    while (*env) {
        char *s = strchr(*env, '=');
        if (s) {
            rb_ary_push(ary, env_str_new(*env, s-*env));
            rb_ary_push(ary, env_str_new2(s+1));
        }
        env++;
    }
    FREE_ENVIRON(environ);

    if (rb_block_arity() &gt; 1) {
        for (i=0; i&lt;RARRAY_LEN(ary); i+=2) {
            rb_yield_values(2, RARRAY_AREF(ary, i), RARRAY_AREF(ary, i+1));
        }
    }
    else {
        for (i=0; i&lt;RARRAY_LEN(ary); i+=2) {
            rb_yield(rb_assoc_new(RARRAY_AREF(ary, i), RARRAY_AREF(ary, i+1)));
        }
    }
    return ehash;
}</pre> </div> <p>Yields each environment variable <code>name</code> and <code>value</code>.</p> <p>If no block is given an <a href="../enumerator/"><code>Enumerator</code></a> is returned.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-each_value"> <span class="method-callseq"> each_value { |value| block } → Hash </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> each_value → Enumerator </span> </div> <div class="method-description">
<div class="method-source-code" id="each_value-source"> <pre class="c" data-language="c">static VALUE
env_each_value(VALUE ehash)
{
    VALUE values;
    long i;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    values = env_values();
    for (i=0; i&lt;RARRAY_LEN(values); i++) {
        rb_yield(RARRAY_AREF(values, i));
    }
    return ehash;
}</pre> </div> <p>Yields each environment variable <code>value</code>.</p> <p>An <a href="../enumerator/"><code>Enumerator</code></a> is returned if no block was given.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-empty-3F"> <span class="method-callseq"> empty? → true or false </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="empty-3F-source"> <pre class="c" data-language="c">static VALUE
env_empty_p(void)
{
    char **env;

    env = GET_ENVIRON(environ);
    if (env[0] == 0) {
        FREE_ENVIRON(environ);
        return Qtrue;
    }
    FREE_ENVIRON(environ);
    return Qfalse;
}</pre> </div> <p>Returns true when there are no environment variables</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-fetch"> <span class="method-callseq"> fetch(name) → value </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> fetch(name, default) → value </span> </div> <div class="method-heading"> <span class="method-callseq"> fetch(name) { |missing_name| block } → value </span> </div> <div class="method-description">
<div class="method-source-code" id="fetch-source"> <pre class="c" data-language="c">static VALUE
env_fetch(int argc, VALUE *argv)
{
    VALUE key;
    long block_given;
    const char *nam, *env;

    rb_check_arity(argc, 1, 2);
    key = argv[0];
    block_given = rb_block_given_p();
    if (block_given &amp;&amp; argc == 2) {
        rb_warn("block supersedes default value argument");
    }
    nam = env_name(key);
    env = getenv(nam);
    if (!env) {
        if (block_given) return rb_yield(key);
        if (argc == 1) {
            rb_key_err_raise(rb_sprintf("key not found: \"%"PRIsVALUE"\"", key), envtbl, key);
        }
        return argv[1];
    }
    return env_name_new(nam, env);
}</pre> </div> <p>Retrieves the environment variable <code>name</code>.</p> <p>If the given name does not exist and neither <code>default</code> nor a block a provided an <a href="../keyerror/"><code>KeyError</code></a> is raised. If a block is given it is called with the missing name to provide a value. If a default value is given it will be returned when no block is given.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-filter"> <span class="method-callseq"> filter { |name, value| block } → Hash </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> filter → Enumerator </span> </div> <div class="method-description">
<div class="method-source-code" id="filter-source"> <pre class="c" data-language="c">static VALUE
env_select(VALUE ehash)
{
    VALUE result;
    VALUE keys;
    long i;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    result = rb_hash_new();
    keys = env_keys();
    for (i = 0; i &lt; RARRAY_LEN(keys); ++i) {
        VALUE key = RARRAY_AREF(keys, i);
        VALUE val = rb_f_getenv(Qnil, key);
        if (!NIL_P(val)) {
            if (RTEST(rb_yield_values(2, key, val))) {
                rb_hash_aset(result, key, val);
            }
        }
    }
    RB_GC_GUARD(keys);

    return result;
}</pre> </div> <p>Returns a copy of the environment for entries where the block returns true.</p> <p>Returns an <a href="../enumerator/"><code>Enumerator</code></a> if no block was given.</p> <p><a href="../env/#method-c-filter"><code>ENV.filter</code></a> is an alias for <a href="../env/#method-c-select"><code>ENV.select</code></a>.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-filter-21"> <span class="method-callseq"> filter! { |name, value| block } → ENV or nil </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> filter! → Enumerator </span> </div> <div class="method-description">
<div class="method-source-code" id="filter-21-source"> <pre class="c" data-language="c">static VALUE
env_select_bang(VALUE ehash)
{
    VALUE keys;
    long i;
    int del = 0;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    keys = env_keys();
    RBASIC_CLEAR_CLASS(keys);
    for (i=0; i&lt;RARRAY_LEN(keys); i++) {
        VALUE val = rb_f_getenv(Qnil, RARRAY_AREF(keys, i));
        if (!NIL_P(val)) {
            if (!RTEST(rb_yield_values(2, RARRAY_AREF(keys, i), val))) {
                FL_UNSET(RARRAY_AREF(keys, i), FL_TAINT);
                env_delete(Qnil, RARRAY_AREF(keys, i));
                del++;
            }
        }
    }
    RB_GC_GUARD(keys);
    if (del == 0) return Qnil;
    return envtbl;
}</pre> </div> <p>Equivalent to <a href="../env/#method-c-keep_if"><code>ENV.keep_if</code></a> but returns <code>nil</code> if no changes were made.</p> <p><a href="../env/#method-c-filter-21"><code>ENV.filter!</code></a> is an alias for <a href="../env/#method-c-select-21"><code>ENV.select!</code></a>.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-has_key-3F"> <span class="method-callseq"> has_key?(name) → true or false </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="has_key-3F-source"> <pre class="c" data-language="c">static VALUE
env_has_key(VALUE env, VALUE key)
{
    const char *s;

    s = env_name(key);
    if (getenv(s)) return Qtrue;
    return Qfalse;
}</pre> </div> <p>Returns <code>true</code> if there is an environment variable with the given <code>name</code>.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-has_value-3F"> <span class="method-callseq"> has_value?(value) → true or false </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="has_value-3F-source"> <pre class="c" data-language="c">static VALUE
env_has_value(VALUE dmy, VALUE obj)
{
    char **env;

    obj = rb_check_string_type(obj);
    if (NIL_P(obj)) return Qnil;
    rb_check_safe_obj(obj);
    env = GET_ENVIRON(environ);
    while (*env) {
        char *s = strchr(*env, '=');
        if (s++) {
            long len = strlen(s);
            if (RSTRING_LEN(obj) == len &amp;&amp; strncmp(s, RSTRING_PTR(obj), len) == 0) {
                FREE_ENVIRON(environ);
                return Qtrue;
            }
        }
        env++;
    }
    FREE_ENVIRON(environ);
    return Qfalse;
}</pre> </div> <p>Returns <code>true</code> if there is an environment variable with the given <code>value</code>.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-include-3F"> <span class="method-callseq"> include?(name) → true or false </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="include-3F-source"> <pre class="c" data-language="c">static VALUE
env_has_key(VALUE env, VALUE key)
{
    const char *s;

    s = env_name(key);
    if (getenv(s)) return Qtrue;
    return Qfalse;
}</pre> </div> <p>Returns <code>true</code> if there is an environment variable with the given <code>name</code>.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-index"> <span class="method-callseq"> index(value) → key </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="index-source"> <pre class="c" data-language="c">static VALUE
env_index(VALUE dmy, VALUE value)
{
    rb_warn("ENV.index is deprecated; use ENV.key");
    return env_key(dmy, value);
}</pre> </div> <p>Deprecated method that is equivalent to <a href="../env/#method-c-key"><code>ENV.key</code></a></p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-inspect"> <span class="method-callseq"> inspect → string </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="inspect-source"> <pre class="c" data-language="c">static VALUE
env_inspect(void)
{
    char **env;
    VALUE str, i;

    str = rb_str_buf_new2("{");
    env = GET_ENVIRON(environ);
    while (*env) {
        char *s = strchr(*env, '=');

        if (env != environ) {
            rb_str_buf_cat2(str, ", ");
        }
        if (s) {
            rb_str_buf_cat2(str, "\"");
            rb_str_buf_cat(str, *env, s-*env);
            rb_str_buf_cat2(str, "\"=&gt;");
            i = rb_inspect(rb_str_new2(s+1));
            rb_str_buf_append(str, i);
        }
        env++;
    }
    FREE_ENVIRON(environ);
    rb_str_buf_cat2(str, "}");
    OBJ_TAINT(str);

    return str;
}</pre> </div> <p>Returns the contents of the environment as a <a href="../string/"><code>String</code></a>.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-invert"> <span class="method-callseq"> invert → Hash </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="invert-source"> <pre class="c" data-language="c">static VALUE
env_invert(void)
{
    return rb_hash_invert(env_to_hash());
}</pre> </div> <p>Returns a new hash created by using environment variable names as values and values as names.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-keep_if"> <span class="method-callseq"> keep_if { |name, value| block } → Hash </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> keep_if → Enumerator </span> </div> <div class="method-description">
<div class="method-source-code" id="keep_if-source"> <pre class="c" data-language="c">static VALUE
env_keep_if(VALUE ehash)
{
    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    env_select_bang(ehash);
    return envtbl;
}</pre> </div> <p>Deletes every environment variable where the block evaluates to <code>false</code>.</p> <p>Returns an enumerator if no block was given.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-key"> <span class="method-callseq"> key(value) → name </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="key-source"> <pre class="c" data-language="c">static VALUE
env_key(VALUE dmy, VALUE value)
{
    char **env;
    VALUE str;

    SafeStringValue(value);
    env = GET_ENVIRON(environ);
    while (*env) {
        char *s = strchr(*env, '=');
        if (s++) {
            long len = strlen(s);
            if (RSTRING_LEN(value) == len &amp;&amp; strncmp(s, RSTRING_PTR(value), len) == 0) {
                str = env_str_new(*env, s-*env-1);
                FREE_ENVIRON(environ);
                return str;
            }
        }
        env++;
    }
    FREE_ENVIRON(environ);
    return Qnil;
}</pre> </div> <p>Returns the name of the environment variable with <code>value</code>. If the value is not found <code>nil</code> is returned.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-key-3F"> <span class="method-callseq"> key?(name) → true or false </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="key-3F-source"> <pre class="c" data-language="c">static VALUE
env_has_key(VALUE env, VALUE key)
{
    const char *s;

    s = env_name(key);
    if (getenv(s)) return Qtrue;
    return Qfalse;
}</pre> </div> <p>Returns <code>true</code> if there is an environment variable with the given <code>name</code>.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-keys"> <span class="method-callseq"> keys → Array </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="keys-source"> <pre class="c" data-language="c">static VALUE
env_keys(void)
{
    char **env;
    VALUE ary;

    ary = rb_ary_new();
    env = GET_ENVIRON(environ);
    while (*env) {
        char *s = strchr(*env, '=');
        if (s) {
            rb_ary_push(ary, env_str_new(*env, s-*env));
        }
        env++;
    }
    FREE_ENVIRON(environ);
    return ary;
}</pre> </div> <p>Returns every environment variable name in an <a href="../array/"><code>Array</code></a></p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-length"> <span class="method-callseq"> length </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="length-source"> <pre class="c" data-language="c">static VALUE
env_size(void)
{
    int i;
    char **env;

    env = GET_ENVIRON(environ);
    for (i=0; env[i]; i++)
        ;
    FREE_ENVIRON(environ);
    return INT2FIX(i);
}</pre> </div> <p>Returns the number of environment variables.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-member-3F"> <span class="method-callseq"> member?(name) → true or false </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="member-3F-source"> <pre class="c" data-language="c">static VALUE
env_has_key(VALUE env, VALUE key)
{
    const char *s;

    s = env_name(key);
    if (getenv(s)) return Qtrue;
    return Qfalse;
}</pre> </div> <p>Returns <code>true</code> if there is an environment variable with the given <code>name</code>.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-rassoc"> <span class="method-callseq"> rassoc(value) </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="rassoc-source"> <pre class="c" data-language="c">static VALUE
env_rassoc(VALUE dmy, VALUE obj)
{
    char **env;

    obj = rb_check_string_type(obj);
    if (NIL_P(obj)) return Qnil;
    rb_check_safe_obj(obj);
    env = GET_ENVIRON(environ);
    while (*env) {
        char *s = strchr(*env, '=');
        if (s++) {
            long len = strlen(s);
            if (RSTRING_LEN(obj) == len &amp;&amp; strncmp(s, RSTRING_PTR(obj), len) == 0) {
                VALUE result = rb_assoc_new(rb_tainted_str_new(*env, s-*env-1), obj);
                FREE_ENVIRON(environ);
                return result;
            }
        }
        env++;
    }
    FREE_ENVIRON(environ);
    return Qnil;
}</pre> </div> <p>Returns an <a href="../array/"><code>Array</code></a> of the name and value of the environment variable with <code>value</code> or <code>nil</code> if the value cannot be found.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-rehash"> <span class="method-callseq"> rehash </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="rehash-source"> <pre class="c" data-language="c">static VALUE
env_none(void)
{
    return Qnil;
}</pre> </div> <p>Re-hashing the environment variables does nothing. It is provided for compatibility with <a href="../hash/"><code>Hash</code></a>.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-reject"> <span class="method-callseq"> reject { |name, value| block } → Hash </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> reject → Enumerator </span> </div> <div class="method-description">
<div class="method-source-code" id="reject-source"> <pre class="c" data-language="c">static VALUE
env_reject(void)
{
    return rb_hash_delete_if(env_to_hash());
}</pre> </div> <p>Same as <a href="../env/#method-c-delete_if"><code>ENV.delete_if</code></a>, but works on (and returns) a copy of the environment.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-reject-21"> <span class="method-callseq"> reject! { |name, value| block } → ENV or nil </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> reject! → Enumerator </span> </div> <div class="method-description">
<div class="method-source-code" id="reject-21-source"> <pre class="c" data-language="c">static VALUE
env_reject_bang(VALUE ehash)
{
    VALUE keys;
    long i;
    int del = 0;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    keys = env_keys();
    RBASIC_CLEAR_CLASS(keys);
    for (i=0; i&lt;RARRAY_LEN(keys); i++) {
        VALUE val = rb_f_getenv(Qnil, RARRAY_AREF(keys, i));
        if (!NIL_P(val)) {
            if (RTEST(rb_yield_values(2, RARRAY_AREF(keys, i), val))) {
                FL_UNSET(RARRAY_AREF(keys, i), FL_TAINT);
                env_delete(Qnil, RARRAY_AREF(keys, i));
                del++;
            }
        }
    }
    RB_GC_GUARD(keys);
    if (del == 0) return Qnil;
    return envtbl;
}</pre> </div> <p>Equivalent to <a href="../env/#method-c-delete_if"><code>ENV.delete_if</code></a> but returns <code>nil</code> if no changes were made.</p> <p>Returns an <a href="../enumerator/"><code>Enumerator</code></a> if no block was given.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-replace"> <span class="method-callseq"> replace(hash) → env </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="replace-source"> <pre class="c" data-language="c">static VALUE
env_replace(VALUE env, VALUE hash)
{
    VALUE keys;
    long i;

    keys = env_keys();
    if (env == hash) return env;
    hash = to_hash(hash);
    rb_hash_foreach(hash, env_replace_i, keys);

    for (i=0; i&lt;RARRAY_LEN(keys); i++) {
        env_delete(env, RARRAY_AREF(keys, i));
    }
    RB_GC_GUARD(keys);
    return env;
}</pre> </div> <p>Replaces the contents of the environment variables with the contents of <code>hash</code>.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-select"> <span class="method-callseq"> select { |name, value| block } → Hash </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> select → Enumerator </span> </div> <div class="method-description">
<div class="method-source-code" id="select-source"> <pre class="c" data-language="c">static VALUE
env_select(VALUE ehash)
{
    VALUE result;
    VALUE keys;
    long i;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    result = rb_hash_new();
    keys = env_keys();
    for (i = 0; i &lt; RARRAY_LEN(keys); ++i) {
        VALUE key = RARRAY_AREF(keys, i);
        VALUE val = rb_f_getenv(Qnil, key);
        if (!NIL_P(val)) {
            if (RTEST(rb_yield_values(2, key, val))) {
                rb_hash_aset(result, key, val);
            }
        }
    }
    RB_GC_GUARD(keys);

    return result;
}</pre> </div> <p>Returns a copy of the environment for entries where the block returns true.</p> <p>Returns an <a href="../enumerator/"><code>Enumerator</code></a> if no block was given.</p> <p><a href="../env/#method-c-filter"><code>ENV.filter</code></a> is an alias for <a href="../env/#method-c-select"><code>ENV.select</code></a>.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-select-21"> <span class="method-callseq"> select! { |name, value| block } → ENV or nil </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> select! → Enumerator </span> </div> <div class="method-description">
<div class="method-source-code" id="select-21-source"> <pre class="c" data-language="c">static VALUE
env_select_bang(VALUE ehash)
{
    VALUE keys;
    long i;
    int del = 0;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    keys = env_keys();
    RBASIC_CLEAR_CLASS(keys);
    for (i=0; i&lt;RARRAY_LEN(keys); i++) {
        VALUE val = rb_f_getenv(Qnil, RARRAY_AREF(keys, i));
        if (!NIL_P(val)) {
            if (!RTEST(rb_yield_values(2, RARRAY_AREF(keys, i), val))) {
                FL_UNSET(RARRAY_AREF(keys, i), FL_TAINT);
                env_delete(Qnil, RARRAY_AREF(keys, i));
                del++;
            }
        }
    }
    RB_GC_GUARD(keys);
    if (del == 0) return Qnil;
    return envtbl;
}</pre> </div> <p>Equivalent to <a href="../env/#method-c-keep_if"><code>ENV.keep_if</code></a> but returns <code>nil</code> if no changes were made.</p> <p><a href="../env/#method-c-filter-21"><code>ENV.filter!</code></a> is an alias for <a href="../env/#method-c-select-21"><code>ENV.select!</code></a>.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-shift"> <span class="method-callseq"> shift → Array or nil </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="shift-source"> <pre class="c" data-language="c">static VALUE
env_shift(void)
{
    char **env;
    VALUE result = Qnil;

    env = GET_ENVIRON(environ);
    if (*env) {
        char *s = strchr(*env, '=');
        if (s) {
            VALUE key = env_str_new(*env, s-*env);
            VALUE val = env_str_new2(getenv(RSTRING_PTR(key)));
            env_delete(Qnil, key);
            result = rb_assoc_new(key, val);
        }
    }
    FREE_ENVIRON(environ);
    return result;
}</pre> </div> <p>Removes an environment variable name-value pair from <a href="../env/"><code>ENV</code></a> and returns it as an <a href="../array/"><code>Array</code></a>. Returns <code>nil</code> if when the environment is empty.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-size"> <span class="method-callseq"> size </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="size-source"> <pre class="c" data-language="c">static VALUE
env_size(void)
{
    int i;
    char **env;

    env = GET_ENVIRON(environ);
    for (i=0; env[i]; i++)
        ;
    FREE_ENVIRON(environ);
    return INT2FIX(i);
}</pre> </div> <p>Returns the number of environment variables.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-slice"> <span class="method-callseq"> slice(*keys) → a_hash </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="slice-source"> <pre class="c" data-language="c">static VALUE
env_slice(int argc, VALUE *argv)
{
    int i;
    VALUE key, value, result;

    if (argc == 0) {
        return rb_hash_new();
    }
    result = rb_hash_new_with_size(argc);

    for (i = 0; i &lt; argc; i++) {
        key = argv[i];
        value = rb_f_getenv(Qnil, key);
        if (value != Qnil)
            rb_hash_aset(result, key, value);
    }

    return result;
}</pre> </div> <p>Returns a hash containing only the given keys from <a href="../env/"><code>ENV</code></a> and their values.</p> <pre class="ruby" data-language="ruby">ENV.slice("TERM","HOME")  #=&gt; {"TERM"=&gt;"xterm-256color", "HOME"=&gt;"/Users/rhc"}
</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-store"> <span class="method-callseq"> store(name, value) → value </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="store-source"> <pre class="c" data-language="c">static VALUE
env_aset(VALUE obj, VALUE nm, VALUE val)
{
    char *name, *value;

    if (NIL_P(val)) {
        env_delete(obj, nm);
        return Qnil;
    }
    SafeStringValue(nm);
    SafeStringValue(val);
    /* nm can be modified in `val.to_str`, don't get `name` before
     * check for `val` */
    get_env_ptr(name, nm);
    get_env_ptr(value, val);

    ruby_setenv(name, value);
    if (ENVMATCH(name, PATH_ENV)) {
        RB_GC_GUARD(nm);
        if (OBJ_TAINTED(val)) {
            /* already tainted, no check */
            path_tainted = 1;
            return val;
        }
        else {
            path_tainted_p(value);
        }
    }
    else if (ENVMATCH(name, TZ_ENV)) {
        ruby_tz_uptodate_p = FALSE;
    }
    return val;
}</pre> </div> <p>Sets the environment variable <code>name</code> to <code>value</code>. If the value given is <code>nil</code> the environment variable is deleted. <code>name</code> must be a string.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-to_a"> <span class="method-callseq"> to_a → Array </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="to_a-source"> <pre class="c" data-language="c">static VALUE
env_to_a(void)
{
    char **env;
    VALUE ary;

    ary = rb_ary_new();
    env = GET_ENVIRON(environ);
    while (*env) {
        char *s = strchr(*env, '=');
        if (s) {
            rb_ary_push(ary, rb_assoc_new(env_str_new(*env, s-*env),
                                          env_str_new2(s+1)));
        }
        env++;
    }
    FREE_ENVIRON(environ);
    return ary;
}</pre> </div> <p>Converts the environment variables into an array of names and value arrays.</p> <pre class="ruby" data-language="ruby">ENV.to_a # =&gt; [["TERM", "xterm-color"], ["SHELL", "/bin/bash"], ...]
</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-to_h"> <span class="method-callseq"> to_h → hash </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> to_h {|name, value| block } → hash </span> </div> <div class="method-description">
<div class="method-source-code" id="to_h-source"> <pre class="c" data-language="c">static VALUE
env_to_h(void)
{
    VALUE hash = env_to_hash();
    if (rb_block_given_p()) {
        hash = rb_hash_to_h_block(hash);
    }
    return hash;
}</pre> </div> <p>Creates a hash with a copy of the environment variables.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-to_hash"> <span class="method-callseq"> to_hash → hash </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="to_hash-source"> <pre class="c" data-language="c">static VALUE
env_to_hash(void)
{
    char **env;
    VALUE hash;

    hash = rb_hash_new();
    env = GET_ENVIRON(environ);
    while (*env) {
        char *s = strchr(*env, '=');
        if (s) {
            rb_hash_aset(hash, env_str_new(*env, s-*env),
                               env_str_new2(s+1));
        }
        env++;
    }
    FREE_ENVIRON(environ);
    return hash;
}</pre> </div> <p>Creates a hash with a copy of the environment variables.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-to_s"> <span class="method-callseq"> to_s → "ENV" </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="to_s-source"> <pre class="c" data-language="c">static VALUE
env_to_s(void)
{
    return rb_usascii_str_new2("ENV");
}</pre> </div> <p>Returns “ENV”</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-update"> <span class="method-callseq"> update(hash) → Hash </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> update(hash) { |name, old_value, new_value| block } → Hash </span> </div> <div class="method-description">
<div class="method-source-code" id="update-source"> <pre class="c" data-language="c">static VALUE
env_update(VALUE env, VALUE hash)
{
    if (env == hash) return env;
    hash = to_hash(hash);
    rb_hash_foreach(hash, env_update_i, 0);
    return env;
}</pre> </div> <p>Adds the contents of <code>hash</code> to the environment variables. If no block is specified entries with duplicate keys are overwritten, otherwise the value of each duplicate name is determined by calling the block with the key, its value from the environment and its value from the hash.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-value-3F"> <span class="method-callseq"> value?(value) → true or false </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="value-3F-source"> <pre class="c" data-language="c">static VALUE
env_has_value(VALUE dmy, VALUE obj)
{
    char **env;

    obj = rb_check_string_type(obj);
    if (NIL_P(obj)) return Qnil;
    rb_check_safe_obj(obj);
    env = GET_ENVIRON(environ);
    while (*env) {
        char *s = strchr(*env, '=');
        if (s++) {
            long len = strlen(s);
            if (RSTRING_LEN(obj) == len &amp;&amp; strncmp(s, RSTRING_PTR(obj), len) == 0) {
                FREE_ENVIRON(environ);
                return Qtrue;
            }
        }
        env++;
    }
    FREE_ENVIRON(environ);
    return Qfalse;
}</pre> </div> <p>Returns <code>true</code> if there is an environment variable with the given <code>value</code>.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-values"> <span class="method-callseq"> values → Array </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="values-source"> <pre class="c" data-language="c">static VALUE
env_values(void)
{
    VALUE ary;
    char **env;

    ary = rb_ary_new();
    env = GET_ENVIRON(environ);
    while (*env) {
        char *s = strchr(*env, '=');
        if (s) {
            rb_ary_push(ary, env_str_new2(s+1));
        }
        env++;
    }
    FREE_ENVIRON(environ);
    return ary;
}</pre> </div> <p>Returns every environment variable value as an <a href="../array/"><code>Array</code></a></p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-values_at"> <span class="method-callseq"> values_at(name, ...) → Array </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="values_at-source"> <pre class="c" data-language="c">static VALUE
env_values_at(int argc, VALUE *argv)
{
    VALUE result;
    long i;

    result = rb_ary_new();
    for (i=0; i&lt;argc; i++) {
        rb_ary_push(result, rb_f_getenv(Qnil, argv[i]));
    }
    return result;
}</pre> </div> <p>Returns an array containing the environment variable values associated with the given names. See also <a href="../env/#method-c-select"><code>ENV.select</code></a>.</p>  </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    Ruby Core © 1993–2017 Yukihiro Matsumoto<br>Licensed under the Ruby License.<br>Ruby Standard Library © contributors<br>Licensed under their own licenses.<br>
    
  </p>
</div>

				
			</div>
			<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
</amp-auto-ads>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
